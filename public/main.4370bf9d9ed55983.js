"use strict";(self.webpackChunkfirebase_login=self.webpackChunkfirebase_login||[]).push([[179],{6304:(ot,De,O)=>{O.d(De,{Dh:()=>Oe,GT:()=>pe,cc:()=>Me,hO:()=>Ue,on:()=>U,pX:()=>ne,xv:()=>he});var m=O(5879),X=O(7142),F=O(8186);ot=O.hmd(ot);const ee=["ngOnDestroy"],ne=(Le,pt,ut,ie={})=>new Proxy(Le,{get:(_e,te)=>ut.runOutsideAngular(()=>{var be;if(Le[te])return!(null===(be=ie?.spy)||void 0===be)&&be.get&&ie.spy.get(te,Le[te]),Le[te];if(ee.indexOf(te)>-1)return()=>{};const Fe=pt.toPromise().then(ze=>{const ae=ze&&ze[te];return"function"==typeof ae?ae.bind(ze):ae&&ae.then?ae.then(_t=>ut.run(()=>_t)):ut.run(()=>ae)});return new Proxy(()=>{},{get:(ze,ae)=>Fe[ae],apply:(ze,ae,_t)=>Fe.then(Ut=>{var pr;const zr=Ut&&Ut(..._t);return!(null===(pr=ie?.spy)||void 0===pr)&&pr.apply&&ie.spy.apply(te,_t,zr),zr})})})}),pe=(Le,pt)=>{pt.forEach(ut=>{Object.getOwnPropertyNames(ut.prototype||ut).forEach(ie=>{Object.defineProperty(Le.prototype,ie,Object.getOwnPropertyDescriptor(ut.prototype||ut,ie))})})};class ge{constructor(pt){return pt}}const Oe=new m.OlP("angularfire2.app.options"),he=new m.OlP("angularfire2.app.name");function U(Le,pt,ut){const _e="object"==typeof ut&&ut||{};_e.name=_e.name||"string"==typeof ut&&ut||"[DEFAULT]";const be=X.Z.apps.filter(Fe=>Fe&&Fe.name===_e.name)[0]||pt.runOutsideAngular(()=>X.Z.initializeApp(Le,_e));try{JSON.stringify(Le)!==JSON.stringify(be.options)&&G("error",`${be.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(be)}const G=(Le,...pt)=>{(0,m.X6Q)()&&typeof console<"u"&&console[Le](...pt)},J={provide:ge,useFactory:U,deps:[Oe,m.R0b,[new m.FiY,he]]};let Ue=(()=>{class Le{constructor(ut){X.Z.registerVersion("angularfire",F.q4.full,"core"),X.Z.registerVersion("angularfire",F.q4.full,"app-compat"),X.Z.registerVersion("angular",m.q4F.full,ut.toString())}static initializeApp(ut,ie){return{ngModule:Le,providers:[{provide:Oe,useValue:ut},{provide:he,useValue:ie}]}}}return Le.\u0275fac=function(ut){return new(ut||Le)(m.LFG(m.Lbi))},Le.\u0275mod=m.oAB({type:Le}),Le.\u0275inj=m.cJS({providers:[J]}),Le})();function Me(Le,pt,ut,ie,_e){const[,te,be]=globalThis.\u0275AngularfireInstanceCache.find(Fe=>Fe[0]===Le)||[];if(te)return function We(Le,pt){try{return Le.toString()===pt.toString()}catch{return Le===pt}}(_e,be)||(Ge("error",`${pt} was already initialized on the ${ut} Firebase App with different settings.${Pe?" You may need to reload as Firebase is not HMR aware.":""}`),Ge("warn",{is:_e,was:be})),te;{const Fe=ie();return globalThis.\u0275AngularfireInstanceCache.push([Le,Fe,_e]),Fe}}const Pe=!!ot.hot,Ge=(Le,...pt)=>{(0,m.X6Q)()&&typeof console<"u"&&console[Le](...pt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8186:(ot,De,O)=>{O.d(De,{q4:()=>Ou,iC:()=>Fu,HU:()=>js,vb:()=>Jm,JM:()=>ku});var m=O(5879),X=O(3182),F=O(5861),ee=O(534),ne=O(9058),pe=O(4537),ge=O(7879);const Oe=(C,b)=>b.some(x=>C instanceof x);let he,U;const Ue=new WeakMap,Me=new WeakMap,We=new WeakMap,Pe=new WeakMap,Ge=new WeakMap;let ut={get(C,b,x){if(C instanceof IDBTransaction){if("done"===b)return Me.get(C);if("objectStoreNames"===b)return C.objectStoreNames||We.get(C);if("store"===b)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return be(C[b])},set:(C,b,x)=>(C[b]=x,!0),has:(C,b)=>C instanceof IDBTransaction&&("done"===b||"store"===b)||b in C};function te(C){return"function"==typeof C?function _e(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function J(){return U||(U=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...b){return C.apply(Fe(this),b),be(Ue.get(this))}:function(...b){return be(C.apply(Fe(this),b))}:function(b,...x){const L=C.call(Fe(this),b,...x);return We.set(L,b.sort?b.sort():[b]),be(L)}}(C):(C instanceof IDBTransaction&&function pt(C){if(Me.has(C))return;const b=new Promise((x,L)=>{const z=()=>{C.removeEventListener("complete",K),C.removeEventListener("error",le),C.removeEventListener("abort",le)},K=()=>{x(),z()},le=()=>{L(C.error||new DOMException("AbortError","AbortError")),z()};C.addEventListener("complete",K),C.addEventListener("error",le),C.addEventListener("abort",le)});Me.set(C,b)}(C),Oe(C,function G(){return he||(he=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,ut):C)}function be(C){if(C instanceof IDBRequest)return function Le(C){const b=new Promise((x,L)=>{const z=()=>{C.removeEventListener("success",K),C.removeEventListener("error",le)},K=()=>{x(be(C.result)),z()},le=()=>{L(C.error),z()};C.addEventListener("success",K),C.addEventListener("error",le)});return b.then(x=>{x instanceof IDBCursor&&Ue.set(x,C)}).catch(()=>{}),Ge.set(b,C),b}(C);if(Pe.has(C))return Pe.get(C);const b=te(C);return b!==C&&(Pe.set(C,b),Ge.set(b,C)),b}const Fe=C=>Ge.get(C),_t=["get","getKey","getAll","getAllKeys","count"],Ut=["put","add","delete","clear"],pr=new Map;function zr(C,b){if(!(C instanceof IDBDatabase)||b in C||"string"!=typeof b)return;if(pr.get(b))return pr.get(b);const x=b.replace(/FromIndex$/,""),L=b!==x,z=Ut.includes(x);if(!(x in(L?IDBIndex:IDBObjectStore).prototype)||!z&&!_t.includes(x))return;const K=function(){var le=(0,F.Z)(function*(He,...je){const tt=this.transaction(He,z?"readwrite":"readonly");let Dt=tt.store;return L&&(Dt=Dt.index(je.shift())),(yield Promise.all([Dt[x](...je),z&&tt.done]))[0]});return function(je){return le.apply(this,arguments)}}();return pr.set(b,K),K}!function ie(C){ut=C(ut)}(C=>({...C,get:(b,x,L)=>zr(b,x)||C.get(b,x,L),has:(b,x)=>!!zr(b,x)||C.has(b,x)}));const xs="@firebase/installations",qn="0.6.4",Mo=1e4,Ns=`w:${qn}`,ue="FIS_v2",de="https://firebaseinstallations.googleapis.com/v1",ve=36e5,Qe=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(C){return C instanceof ne.ZR&&C.code.includes("request-failed")}function Vn({projectId:C}){return`${de}/projects/${C}/installations`}function dt(C){return{token:C.token,requestStatus:2,expiresIn:Cr(C.expiresIn),creationTime:Date.now()}}function en(C,b){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,F.Z)(function*(C,b){const L=(yield b.json()).error;return Qe.create("request-failed",{requestName:C,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Dn({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function lr(C){return cn.apply(this,arguments)}function cn(){return(cn=(0,F.Z)(function*(C){const b=yield C();return b.status>=500&&b.status<600?C():b})).apply(this,arguments)}function Cr(C){return Number(C.replace("s","000"))}function ni(){return(ni=(0,F.Z)(function*({appConfig:C,heartbeatServiceProvider:b},{fid:x}){const L=Vn(C),z=Dn(C),K=b.getImmediate({optional:!0});if(K){const tt=yield K.getHeartbeatsHeader();tt&&z.append("x-firebase-client",tt)}const He={method:"POST",headers:z,body:JSON.stringify({fid:x,authVersion:ue,appId:C.appId,sdkVersion:Ns})},je=yield lr(()=>fetch(L,He));if(je.ok){const tt=yield je.json();return{fid:tt.fid||x,registrationStatus:2,refreshToken:tt.refreshToken,authToken:dt(tt.authToken)}}throw yield en("Create Installation",je)})).apply(this,arguments)}function ri(C){return new Promise(b=>{setTimeout(b,C)})}const iu=/^[cdef][\w-]{21}$/,ht="";function Bt(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const x=function bt(C){return function Xs(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return iu.test(x)?x:ht}catch{return ht}}function _n(C){return`${C.appName}!${C.appId}`}const Nn=new Map;function Wr(C,b){const x=_n(C);ma(x,b),function an(C,b){const x=function Ot(){return!Dr&&"BroadcastChannel"in self&&(Dr=new BroadcastChannel("[Firebase] FID Change"),Dr.onmessage=C=>{ma(C.data.key,C.data.fid)}),Dr}();x&&x.postMessage({key:C,fid:b}),function Bi(){0===Nn.size&&Dr&&(Dr.close(),Dr=null)}()}(x,b)}function ma(C,b){const x=Nn.get(C);if(x)for(const L of x)L(b)}let Dr=null;const eo="firebase-installations-database",ya=1,ii="firebase-installations-store";let us=null;function mr(){return us||(us=function ze(C,b,{blocked:x,upgrade:L,blocking:z,terminated:K}={}){const le=indexedDB.open(C,b),He=be(le);return L&&le.addEventListener("upgradeneeded",je=>{L(be(le.result),je.oldVersion,je.newVersion,be(le.transaction))}),x&&le.addEventListener("blocked",()=>x()),He.then(je=>{K&&je.addEventListener("close",()=>K()),z&&je.addEventListener("versionchange",()=>z())}).catch(()=>{}),He}(eo,ya,{upgrade:(C,b)=>{0===b&&C.createObjectStore(ii)}})),us}function tr(C,b){return En.apply(this,arguments)}function En(){return(En=(0,F.Z)(function*(C,b){const x=_n(C),z=(yield mr()).transaction(ii,"readwrite"),K=z.objectStore(ii),le=yield K.get(x);return yield K.put(b,x),yield z.done,(!le||le.fid!==b.fid)&&Wr(C,b.fid),b})).apply(this,arguments)}function ls(C){return tn.apply(this,arguments)}function tn(){return(tn=(0,F.Z)(function*(C){const b=_n(C),L=(yield mr()).transaction(ii,"readwrite");yield L.objectStore(ii).delete(b),yield L.done})).apply(this,arguments)}function cs(C,b){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,F.Z)(function*(C,b){const x=_n(C),z=(yield mr()).transaction(ii,"readwrite"),K=z.objectStore(ii),le=yield K.get(x),He=b(le);return void 0===He?yield K.delete(x):yield K.put(He,x),yield z.done,He&&(!le||le.fid!==He.fid)&&Wr(C,He.fid),He})).apply(this,arguments)}function $(C){return B.apply(this,arguments)}function B(){return B=(0,F.Z)(function*(C){let b;const x=yield cs(C.appConfig,L=>{const z=function q(C){return pn(C||{fid:Bt(),registrationStatus:0})}(L),K=function Ce(C,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Qe.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},L=function se(C,b){return et.apply(this,arguments)}(C,x);return{installationEntry:x,registrationPromise:L}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:ft(C)}:{installationEntry:b}}(C,z);return b=K.registrationPromise,K.installationEntry});return x.fid===ht?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}}),B.apply(this,arguments)}function et(){return et=(0,F.Z)(function*(C,b){try{const x=yield function ga(C,b){return ni.apply(this,arguments)}(C,b);return tr(C.appConfig,x)}catch(x){throw rt(x)&&409===x.customData.serverCode?yield ls(C.appConfig):yield tr(C.appConfig,{fid:b.fid,registrationStatus:0}),x}}),et.apply(this,arguments)}function ft(C){return jt.apply(this,arguments)}function jt(){return(jt=(0,F.Z)(function*(C){let b=yield Tn(C.appConfig);for(;1===b.registrationStatus;)yield ri(100),b=yield Tn(C.appConfig);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:L}=yield $(C);return L||x}return b})).apply(this,arguments)}function Tn(C){return cs(C,b=>{if(!b)throw Qe.create("installation-not-found");return pn(b)})}function pn(C){return function Et(C){return 1===C.registrationStatus&&C.registrationTime+Mo<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function yr(){return(yr=(0,F.Z)(function*({appConfig:C,heartbeatServiceProvider:b},x){const L=function Di(C,{fid:b}){return`${Vn(C)}/${b}/authTokens:generate`}(C,x),z=function bn(C,{refreshToken:b}){const x=Dn(C);return x.append("Authorization",function ti(C){return`${ue} ${C}`}(b)),x}(C,x),K=b.getImmediate({optional:!0});if(K){const tt=yield K.getHeartbeatsHeader();tt&&z.append("x-firebase-client",tt)}const He={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:Ns,appId:C.appId}})},je=yield lr(()=>fetch(L,He));if(je.ok)return dt(yield je.json());throw yield en("Generate Auth Token",je)})).apply(this,arguments)}function ds(C){return si.apply(this,arguments)}function si(){return si=(0,F.Z)(function*(C,b=!1){let x;const L=yield cs(C.appConfig,K=>{if(!Rt(K))throw Qe.create("not-registered");const le=K.authToken;if(!b&&function Qt(C){return 2===C.requestStatus&&!function nr(C){const b=Date.now();return b<C.creationTime||C.creationTime+C.expiresIn<b+ve}(C)}(le))return K;if(1===le.requestStatus)return x=function fe(C,b){return re.apply(this,arguments)}(C,b),K;{if(!navigator.onLine)throw Qe.create("app-offline");const He=function Kn(C){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:b})}(K);return x=function at(C,b){return It.apply(this,arguments)}(C,He),He}});return x?yield x:L.authToken}),si.apply(this,arguments)}function re(){return(re=(0,F.Z)(function*(C,b){let x=yield ke(C.appConfig);for(;1===x.authToken.requestStatus;)yield ri(100),x=yield ke(C.appConfig);const L=x.authToken;return 0===L.requestStatus?ds(C,b):L})).apply(this,arguments)}function ke(C){return cs(C,b=>{if(!Rt(b))throw Qe.create("not-registered");return function Rs(C){return 1===C.requestStatus&&C.requestTime+Mo<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function It(){return It=(0,F.Z)(function*(C,b){try{const x=yield function zt(C,b){return yr.apply(this,arguments)}(C,b),L=Object.assign(Object.assign({},b),{authToken:x});return yield tr(C.appConfig,L),x}catch(x){if(!rt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const L=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield tr(C.appConfig,L)}else yield ls(C.appConfig);throw x}}),It.apply(this,arguments)}function Rt(C){return void 0!==C&&2===C.registrationStatus}function su(){return(su=(0,F.Z)(function*(C){const b=C,{installationEntry:x,registrationPromise:L}=yield $(b);return L?L.catch(console.error):ds(b).catch(console.error),x.fid})).apply(this,arguments)}function oi(){return oi=(0,F.Z)(function*(C,b=!1){const x=C;return yield function Hd(C){return bi.apply(this,arguments)}(x),(yield ds(x,b)).token}),oi.apply(this,arguments)}function bi(){return(bi=(0,F.Z)(function*(C){const{registrationPromise:b}=yield $(C);b&&(yield b)})).apply(this,arguments)}function Ro(C){return Qe.create("missing-app-config-values",{valueName:C})}const zd="installations",$m=C=>{const b=C.getProvider("app").getImmediate(),x=function rl(C){if(!C||!C.options)throw Ro("App Configuration");if(!C.name)throw Ro("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!C.options[x])throw Ro(x);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(b);return{app:b,appConfig:x,heartbeatServiceProvider:(0,ee._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Ps=C=>{const b=C.getProvider("app").getImmediate(),x=(0,ee._getProvider)(b,zd).getImmediate();return{getId:()=>function xo(C){return su.apply(this,arguments)}(x),getToken:z=>function $d(C){return oi.apply(this,arguments)}(x,z)}};(function _p(){(0,ee._registerComponent)(new pe.wA(zd,$m,"PUBLIC")),(0,ee._registerComponent)(new pe.wA("installations-internal",Ps,"PRIVATE"))})(),(0,ee.registerVersion)(xs,qn),(0,ee.registerVersion)(xs,qn,"esm2017");const ou="@firebase/remote-config",dn=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class qr{constructor(b,x,L,z){this.client=b,this.storage=x,this.storageCache=L,this.logger=z}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-x,z=L<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${z}.`),z}fetch(b){var x=this;return(0,F.Z)(function*(){const[L,z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(z&&x.isCachedDataFresh(b.cacheMaxAgeMillis,L))return z;b.eTag=z&&z.eTag;const K=yield x.client.fetch(b),le=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===K.status&&le.push(x.storage.setLastSuccessfulFetchResponse(K)),yield Promise.all(le),K})()}}function Kd(C=navigator){return C.languages&&C.languages[0]||C.language}class hs{constructor(b,x,L,z,K,le){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=L,this.projectId=z,this.apiKey=K,this.appId=le}fetch(b){var x=this;return(0,F.Z)(function*(){const[L,z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),le=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,He={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},je={sdk_version:x.sdkVersion,app_instance_id:L,app_instance_id_token:z,app_id:x.appId,language_code:Kd()},tt={method:"POST",headers:He,body:JSON.stringify(je)},Dt=fetch(le,tt),St=new Promise((Ur,Zi)=>{b.signal.addEventListener(()=>{const Dh=new Error("The operation was aborted.");Dh.name="AbortError",Zi(Dh)})});let Rr;try{yield Promise.race([Dt,St]),Rr=yield Dt}catch(Ur){let Zi="fetch-client-network";throw"AbortError"===Ur?.name&&(Zi="fetch-timeout"),dn.create(Zi,{originalErrorMessage:Ur?.message})}let $n=Rr.status;const $s=Rr.headers.get("ETag")||void 0;let qo,fo;if(200===Rr.status){let Ur;try{Ur=yield Rr.json()}catch(Zi){throw dn.create("fetch-client-parse",{originalErrorMessage:Zi?.message})}qo=Ur.entries,fo=Ur.state}if("INSTANCE_STATE_UNSPECIFIED"===fo?$n=500:"NO_CHANGE"===fo?$n=304:("NO_TEMPLATE"===fo||"EMPTY_CONFIG"===fo)&&(qo={}),304!==$n&&200!==$n)throw dn.create("fetch-status",{httpStatus:$n});return{status:$n,eTag:$s,config:qo}})()}}class lu{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,F.Z)(function*(){const L=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,L)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:L}){var z=this;return(0,F.Z)(function*(){yield function Rn(C,b){return new Promise((x,L)=>{const z=Math.max(b-Date.now(),0),K=setTimeout(x,z);C.addEventListener(()=>{clearTimeout(K),L(dn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const K=yield z.client.fetch(b);return yield z.storage.deleteThrottleMetadata(),K}catch(K){if(!function wa(C){if(!(C instanceof ne.ZR&&C.customData))return!1;const b=Number(C.customData.httpStatus);return 429===b||500===b||503===b||504===b}(K))throw K;const le={throttleEndTimeMillis:Date.now()+(0,ne.$s)(L),backoffCount:L+1};return yield z.storage.setThrottleMetadata(le),z.attemptFetch(b,le)}})()}}class Zd{constructor(b,x,L,z,K){this.app=b,this._client=x,this._storageCache=L,this._storage=z,this._logger=K,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ui(C,b){const x=C.target.error||void 0;return dn.create(b,{originalErrorMessage:x&&x?.message})}const Gn="app_namespace_store";class XI{constructor(b,x,L,z=function Ft(){return new Promise((C,b)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=L=>{b(ui(L,"storage-open"))},x.onsuccess=L=>{C(L.target.result)},x.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(Gn,{keyPath:"compositeKey"})}}catch(x){b(dn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=b,this.appName=x,this.namespace=L,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,F.Z)(function*(){const L=yield x.openDbPromise;return new Promise((z,K)=>{const He=L.transaction([Gn],"readonly").objectStore(Gn),je=x.createCompositeKey(b);try{const tt=He.get(je);tt.onerror=Dt=>{K(ui(Dt,"storage-get"))},tt.onsuccess=Dt=>{const St=Dt.target.result;z(St?St.value:void 0)}}catch(tt){K(dn.create("storage-get",{originalErrorMessage:tt?.message}))}})})()}set(b,x){var L=this;return(0,F.Z)(function*(){const z=yield L.openDbPromise;return new Promise((K,le)=>{const je=z.transaction([Gn],"readwrite").objectStore(Gn),tt=L.createCompositeKey(b);try{const Dt=je.put({compositeKey:tt,value:x});Dt.onerror=St=>{le(ui(St,"storage-set"))},Dt.onsuccess=()=>{K()}}catch(Dt){le(dn.create("storage-set",{originalErrorMessage:Dt?.message}))}})})()}delete(b){var x=this;return(0,F.Z)(function*(){const L=yield x.openDbPromise;return new Promise((z,K)=>{const He=L.transaction([Gn],"readwrite").objectStore(Gn),je=x.createCompositeKey(b);try{const tt=He.delete(je);tt.onerror=Dt=>{K(ui(Dt,"storage-delete"))},tt.onsuccess=()=>{z()}}catch(tt){K(dn.create("storage-delete",{originalErrorMessage:tt?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class il{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,F.Z)(function*(){const x=b.storage.getLastFetchStatus(),L=b.storage.getLastSuccessfulFetchTimestampMillis(),z=b.storage.getActiveConfig(),K=yield x;K&&(b.lastFetchStatus=K);const le=yield L;le&&(b.lastSuccessfulFetchTimestampMillis=le);const He=yield z;He&&(b.activeConfig=He)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function ko(){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,F.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}!function fs(){(0,ee._registerComponent)(new pe.wA("remote-config",function C(b,{instanceIdentifier:x}){const L=b.getProvider("app").getImmediate(),z=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw dn.create("registration-window");if(!(0,ne.hl)())throw dn.create("indexed-db-unavailable");const{projectId:K,apiKey:le,appId:He}=L.options;if(!K)throw dn.create("registration-project-id");if(!le)throw dn.create("registration-api-key");if(!He)throw dn.create("registration-app-id");const je=new XI(He,L.name,x=x||"firebase"),tt=new il(je),Dt=new ge.Yd(ou);Dt.logLevel=ge.in.ERROR;const St=new hs(z,ee.SDK_VERSION,x,K,le,He),Rr=new lu(St,je),$n=new qr(Rr,je,tt,Dt),$s=new Zd(L,$n,tt,je,Dt);return function At(C){const b=(0,ne.m9)(C);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}($s),$s},"PUBLIC").setMultipleInstances(!0)),(0,ee.registerVersion)(ou,"0.4.4"),(0,ee.registerVersion)(ou,"0.4.4","esm2017")}();const vr=(C,b)=>b.some(x=>C instanceof x);let Hm,zn;const ks=new WeakMap,Fs=new WeakMap,wr=new WeakMap,Tr=new WeakMap,uc=new WeakMap;let cu={get(C,b,x){if(C instanceof IDBTransaction){if("done"===b)return Fs.get(C);if("objectStoreNames"===b)return C.objectStoreNames||wr.get(C);if("store"===b)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return ps(C[b])},set:(C,b,x)=>(C[b]=x,!0),has:(C,b)=>C instanceof IDBTransaction&&("done"===b||"store"===b)||b in C};function Gm(C){return"function"==typeof C?function Ep(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ia(){return zn||(zn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...b){return C.apply(lc(this),b),ps(ks.get(this))}:function(...b){return ps(C.apply(lc(this),b))}:function(b,...x){const L=C.call(lc(this),b,...x);return wr.set(L,b.sort?b.sort():[b]),ps(L)}}(C):(C instanceof IDBTransaction&&function Yd(C){if(Fs.has(C))return;const b=new Promise((x,L)=>{const z=()=>{C.removeEventListener("complete",K),C.removeEventListener("error",le),C.removeEventListener("abort",le)},K=()=>{x(),z()},le=()=>{L(C.error||new DOMException("AbortError","AbortError")),z()};C.addEventListener("complete",K),C.addEventListener("error",le),C.addEventListener("abort",le)});Fs.set(C,b)}(C),vr(C,function li(){return Hm||(Hm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,cu):C)}function ps(C){if(C instanceof IDBRequest)return function vp(C){const b=new Promise((x,L)=>{const z=()=>{C.removeEventListener("success",K),C.removeEventListener("error",le)},K=()=>{x(ps(C.result)),z()},le=()=>{L(C.error),z()};C.addEventListener("success",K),C.addEventListener("error",le)});return b.then(x=>{x instanceof IDBCursor&&ks.set(x,C)}).catch(()=>{}),uc.set(b,C),b}(C);if(Tr.has(C))return Tr.get(C);const b=Gm(C);return b!==C&&(Tr.set(C,b),uc.set(b,C)),b}const lc=C=>uc.get(C);function Qd(C,b,{blocked:x,upgrade:L,blocking:z,terminated:K}={}){const le=indexedDB.open(C,b),He=ps(le);return L&&le.addEventListener("upgradeneeded",je=>{L(ps(le.result),je.oldVersion,je.newVersion,ps(le.transaction))}),x&&le.addEventListener("blocked",()=>x()),He.then(je=>{K&&je.addEventListener("close",()=>K()),z&&je.addEventListener("versionchange",()=>z())}).catch(()=>{}),He}function du(C,{blocked:b}={}){const x=indexedDB.deleteDatabase(C);return b&&x.addEventListener("blocked",()=>b()),ps(x).then(()=>{})}const Jd=["get","getKey","getAll","getAllKeys","count"],Ip=["put","add","delete","clear"],cc=new Map;function Cp(C,b){if(!(C instanceof IDBDatabase)||b in C||"string"!=typeof b)return;if(cc.get(b))return cc.get(b);const x=b.replace(/FromIndex$/,""),L=b!==x,z=Ip.includes(x);if(!(x in(L?IDBIndex:IDBObjectStore).prototype)||!z&&!Jd.includes(x))return;const K=function(){var le=(0,F.Z)(function*(He,...je){const tt=this.transaction(He,z?"readwrite":"readonly");let Dt=tt.store;return L&&(Dt=Dt.index(je.shift())),(yield Promise.all([Dt[x](...je),z&&tt.done]))[0]});return function(je){return le.apply(this,arguments)}}();return cc.set(b,K),K}!function wp(C){cu=C(cu)}(C=>({...C,get:(b,x,L)=>Cp(b,x)||C.get(b,x,L),has:(b,x)=>!!Cp(b,x)||C.has(b,x)}));const Xd="/firebase-messaging-sw.js",dc="/firebase-cloud-messaging-push-scope",hu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",eh="https://fcmregistrations.googleapis.com/v1",th="google.c.a.c_id",Wn="google.c.a.c_l",Dp="google.c.a.ts";var nh=function(C){return C.PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",C}(nh||{});function Ai(C){const b=new Uint8Array(C);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fu(C){const x=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(x),z=new Uint8Array(L.length);for(let K=0;K<L.length;++K)z[K]=L.charCodeAt(K);return z}const pu="fcm_token_details_db",rh=5,Da="fcm_token_object_Store";function ba(){return ba=(0,F.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(K=>K.name).includes(pu))return null;let b=null;return(yield Qd(pu,rh,{upgrade:(L=(0,F.Z)(function*(z,K,le,He){var je;if(K<2||!z.objectStoreNames.contains(Da))return;const tt=He.objectStore(Da),Dt=yield tt.index("fcmSenderId").get(C);if(yield tt.clear(),Dt)if(2===K){const St=Dt;if(!St.auth||!St.p256dh||!St.endpoint)return;b={token:St.fcmToken,createTime:null!==(je=St.createTime)&&void 0!==je?je:Date.now(),subscriptionOptions:{auth:St.auth,p256dh:St.p256dh,endpoint:St.endpoint,swScope:St.swScope,vapidKey:"string"==typeof St.vapidKey?St.vapidKey:Ai(St.vapidKey)}}}else if(3===K){const St=Dt;b={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:Ai(St.auth),p256dh:Ai(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:Ai(St.vapidKey)}}}else if(4===K){const St=Dt;b={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:Ai(St.auth),p256dh:Ai(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:Ai(St.vapidKey)}}}}),function(K,le,He,je){return L.apply(this,arguments)})})).close(),yield du(pu),yield du("fcm_vapid_details_db"),yield du("undefined"),function gs(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:b}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}(b)?b:null;var L}),ba.apply(this,arguments)}const Ta="firebase-messaging-database",Yn=1,Zr="firebase-messaging-store";let ih=null;function Sa(){return ih||(ih=Qd(Ta,Yn,{upgrade:(C,b)=>{0===b&&C.createObjectStore(Zr)}})),ih}function gu(C){return Ls.apply(this,arguments)}function Ls(){return Ls=(0,F.Z)(function*(C){const b=sl(C),L=yield(yield Sa()).transaction(Zr).objectStore(Zr).get(b);if(L)return L;{const z=yield function Gv(C){return ba.apply(this,arguments)}(C.appConfig.senderId);if(z)return yield sh(C,z),z}}),Ls.apply(this,arguments)}function sh(C,b){return fc.apply(this,arguments)}function fc(){return(fc=(0,F.Z)(function*(C,b){const x=sl(C),z=(yield Sa()).transaction(Zr,"readwrite");return yield z.objectStore(Zr).put(b,x),yield z.done,b})).apply(this,arguments)}function Aa(){return(Aa=(0,F.Z)(function*(C){const b=sl(C),L=(yield Sa()).transaction(Zr,"readwrite");yield L.objectStore(Zr).delete(b),yield L.done})).apply(this,arguments)}function sl({appConfig:C}){return C.appId}const Sr=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function bp(C,b){return Tp.apply(this,arguments)}function Tp(){return(Tp=(0,F.Z)(function*(C,b){const x=yield ol(C),L=Sp(b),z={method:"POST",headers:x,body:JSON.stringify(L)};let K;try{K=yield(yield fetch(Ma(C.appConfig),z)).json()}catch(le){throw Sr.create("token-subscribe-failed",{errorInfo:le?.toString()})}if(K.error)throw Sr.create("token-subscribe-failed",{errorInfo:K.error.message});if(!K.token)throw Sr.create("token-subscribe-no-token");return K.token})).apply(this,arguments)}function gc(){return(gc=(0,F.Z)(function*(C,b){const x=yield ol(C),L=Sp(b.subscriptionOptions),z={method:"PATCH",headers:x,body:JSON.stringify(L)};let K;try{K=yield(yield fetch(`${Ma(C.appConfig)}/${b.token}`,z)).json()}catch(le){throw Sr.create("token-update-failed",{errorInfo:le?.toString()})}if(K.error)throw Sr.create("token-update-failed",{errorInfo:K.error.message});if(!K.token)throw Sr.create("token-update-no-token");return K.token})).apply(this,arguments)}function mc(C,b){return yc.apply(this,arguments)}function yc(){return(yc=(0,F.Z)(function*(C,b){const L={method:"DELETE",headers:yield ol(C)};try{const K=yield(yield fetch(`${Ma(C.appConfig)}/${b}`,L)).json();if(K.error)throw Sr.create("token-unsubscribe-failed",{errorInfo:K.error.message})}catch(z){throw Sr.create("token-unsubscribe-failed",{errorInfo:z?.toString()})}})).apply(this,arguments)}function Ma({projectId:C}){return`${eh}/projects/${C}/registrations`}function ol(C){return mu.apply(this,arguments)}function mu(){return(mu=(0,F.Z)(function*({appConfig:C,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Sp({p256dh:C,auth:b,endpoint:x,vapidKey:L}){const z={web:{endpoint:x,auth:b,p256dh:C}};return L!==hu&&(z.web.applicationPubKey=L),z}const _c=6048e5;function al(){return al=(0,F.Z)(function*(C){const b=yield function _u(C,b){return xa.apply(this,arguments)}(C.swRegistration,C.vapidKey),x={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:b.endpoint,auth:Ai(b.getKey("auth")),p256dh:Ai(b.getKey("p256dh"))},L=yield gu(C.firebaseDependencies);if(L){if(function Ar(C,b){return b.vapidKey===C.vapidKey&&b.endpoint===C.endpoint&&b.auth===C.auth&&b.p256dh===C.p256dh}(L.subscriptionOptions,x))return Date.now()>=L.createTime+_c?function ms(C,b){return yu.apply(this,arguments)}(C,{token:L.token,createTime:Date.now(),subscriptionOptions:x}):L.token;try{yield mc(C.firebaseDependencies,L.token)}catch(z){console.warn(z)}return lh(C.firebaseDependencies,x)}return lh(C.firebaseDependencies,x)}),al.apply(this,arguments)}function uh(){return uh=(0,F.Z)(function*(C){const b=yield gu(C.firebaseDependencies);b&&(yield mc(C.firebaseDependencies,b.token),yield function oh(C){return Aa.apply(this,arguments)}(C.firebaseDependencies));const x=yield C.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()}),uh.apply(this,arguments)}function yu(){return yu=(0,F.Z)(function*(C,b){try{const x=yield function ah(C,b){return gc.apply(this,arguments)}(C.firebaseDependencies,b),L=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield sh(C.firebaseDependencies,L),x}catch(x){throw yield function vc(C){return uh.apply(this,arguments)}(C),x}}),yu.apply(this,arguments)}function lh(C,b){return rn.apply(this,arguments)}function rn(){return(rn=(0,F.Z)(function*(C,b){const L={token:yield bp(C,b),createTime:Date.now(),subscriptionOptions:b};return yield sh(C,L),L.token})).apply(this,arguments)}function xa(){return(xa=(0,F.Z)(function*(C,b){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fu(b)})})).apply(this,arguments)}function Na(C){const b={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function ch(C,b){if(!b.notification)return;C.notification={};const x=b.notification.title;x&&(C.notification.title=x);const L=b.notification.body;L&&(C.notification.body=L);const z=b.notification.image;z&&(C.notification.image=z);const K=b.notification.icon;K&&(C.notification.icon=K)}(b,C),function Vs(C,b){b.data&&(C.data=b.data)}(b,C),function Mi(C,b){var x,L,z,K,le;if(!(b.fcmOptions||null!==(x=b.notification)&&void 0!==x&&x.click_action))return;C.fcmOptions={};const He=null!==(z=null===(L=b.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==z?z:null===(K=b.notification)||void 0===K?void 0:K.click_action;He&&(C.fcmOptions.link=He);const je=null===(le=b.fcmOptions)||void 0===le?void 0:le.analytics_label;je&&(C.fcmOptions.analyticsLabel=je)}(b,C),b}function dh(C,b){const x=[];for(let L=0;L<C.length;L++)x.push(C.charAt(L)),L<b.length&&x.push(b.charAt(L));return x.join("")}function ys(C){return Sr.create("missing-app-config-values",{valueName:C})}dh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),dh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hh{constructor(b,x,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function wc(C){if(!C||!C.options)throw ys("App Configuration Object");if(!C.name)throw ys("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=C;for(const L of b)if(!x[L])throw ys(L);return{appName:C.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:z,installations:x,analyticsProvider:L}}_delete(){return Promise.resolve()}}function ul(){return(ul=(0,F.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Xd,{scope:dc}),C.swRegistration.update().catch(()=>{})}catch(b){throw Sr.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function no(){return(no=(0,F.Z)(function*(C,b){if(!b&&!C.swRegistration&&(yield function Ec(C){return ul.apply(this,arguments)}(C)),b||!C.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Sr.create("invalid-sw-registration");C.swRegistration=b}})).apply(this,arguments)}function wt(){return(wt=(0,F.Z)(function*(C,b){b?C.vapidKey=b:C.vapidKey||(C.vapidKey=hu)})).apply(this,arguments)}function fh(){return fh=(0,F.Z)(function*(C,b){if(!navigator)throw Sr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sr.create("permission-blocked");return yield function ro(C,b){return wt.apply(this,arguments)}(C,b?.vapidKey),yield function Ic(C,b){return no.apply(this,arguments)}(C,b?.serviceWorkerRegistration),function Ap(C){return al.apply(this,arguments)}(C)}),fh.apply(this,arguments)}function ph(){return(ph=(0,F.Z)(function*(C,b,x){const L=function xp(C){switch(C){case nh.NOTIFICATION_CLICKED:return"notification_open";case nh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(b);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:x[th],message_name:x[Wn],message_time:x[Dp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ji(){return ji=(0,F.Z)(function*(C,b){const x=b.data;if(!x.isFirebaseMessaging)return;C.onMessageHandler&&x.messageType===nh.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Na(x)):C.onMessageHandler.next(Na(x)));const L=x.data;(function zm(C){return"object"==typeof C&&!!C&&th in C})(L)&&"1"===L["google.c.a.e"]&&(yield function Mp(C,b,x){return ph.apply(this,arguments)}(C,x.messageType,L))}),ji.apply(this,arguments)}const Ra="@firebase/messaging",bc=C=>{const b=new hh(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Dc(C,b){return ji.apply(this,arguments)}(b,x)),b},Tc=C=>{const b=C.getProvider("messaging").getImmediate();return{getToken:L=>function Cc(C,b){return fh.apply(this,arguments)}(b,L)}};function Se(){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,F.Z)(function*(){try{yield(0,ne.eu)()}catch{return!1}return typeof window<"u"&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Np(){(0,ee._registerComponent)(new pe.wA("messaging",bc,"PUBLIC")),(0,ee._registerComponent)(new pe.wA("messaging-internal",Tc,"PRIVATE")),(0,ee.registerVersion)(Ra,"0.12.4"),(0,ee.registerVersion)(Ra,"0.12.4","esm2017")}();const Un="analytics",Wm="firebase_id",cl="origin",Lr=6e4,xi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dl="https://www.googletagmanager.com/gtag/js",Pn=new ge.Yd("@firebase/analytics"),xr=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function wu(C){if(!C.startsWith(dl)){const b=xr.create("invalid-gtag-resource",{gtagURL:C});return Pn.warn(b.message),""}return C}function mh(C){return Promise.all(C.map(b=>b.catch(x=>x)))}function Lo(){return(Lo=(0,F.Z)(function*(C,b,x,L,z,K){const le=L[z];try{if(le)yield b[le];else{const je=(yield mh(x)).find(tt=>tt.measurementId===z);je&&(yield b[je.appId])}}catch(He){Pn.error(He)}C("config",z,K)})).apply(this,arguments)}function hl(){return(hl=(0,F.Z)(function*(C,b,x,L,z){try{let K=[];if(z&&z.send_to){let le=z.send_to;Array.isArray(le)||(le=[le]);const He=yield mh(x);for(const je of le){const tt=He.find(St=>St.measurementId===je),Dt=tt&&b[tt.appId];if(!Dt){K=[];break}K.push(Dt)}}0===K.length&&(K=Object.values(b)),yield Promise.all(K),C("event",L,z||{})}catch(K){Pn.error(K)}})).apply(this,arguments)}const Pp=30,yh=new class Vo{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Km(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function oo(){return(oo=(0,F.Z)(function*(C){var b;const{appId:x,apiKey:L}=C,z={method:"GET",headers:Km(L)},K=xi.replace("{app-id}",x),le=yield fetch(K,z);if(200!==le.status&&304!==le.status){let He="";try{const je=yield le.json();null!==(b=je.error)&&void 0!==b&&b.message&&(He=je.error.message)}catch{}throw xr.create("config-fetch-failed",{httpStatus:le.status,responseMessage:He})}return le.json()})).apply(this,arguments)}function Tu(){return(Tu=(0,F.Z)(function*(C,b=yh,x){const{appId:L,apiKey:z,measurementId:K}=C.options;if(!L)throw xr.create("no-app-id");if(!z){if(K)return{measurementId:K,appId:L};throw xr.create("no-api-key")}const le=b.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},He=new xc;return setTimeout((0,F.Z)(function*(){He.abort()}),void 0!==x?x:Lr),Op({appId:L,apiKey:z,measurementId:K},le,He,b)})).apply(this,arguments)}function Op(C,b,x){return _h.apply(this,arguments)}function _h(){return _h=(0,F.Z)(function*(C,{throttleEndTimeMillis:b,backoffCount:x},L,z=yh){var K;const{appId:le,measurementId:He}=C;try{yield function Zm(C,b){return new Promise((x,L)=>{const z=Math.max(b-Date.now(),0),K=setTimeout(x,z);C.addEventListener(()=>{clearTimeout(K),L(xr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(L,b)}catch(je){if(He)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${He} provided in the "measurementId" field in the local Firebase config. [${je?.message}]`),{appId:le,measurementId:He};throw je}try{const je=yield function Yr(C){return oo.apply(this,arguments)}(C);return z.deleteThrottleMetadata(le),je}catch(je){const tt=je;if(!function fl(C){if(!(C instanceof ne.ZR&&C.customData))return!1;const b=Number(C.customData.httpStatus);return 429===b||500===b||503===b||504===b}(tt)){if(z.deleteThrottleMetadata(le),He)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${He} provided in the "measurementId" field in the local Firebase config. [${tt?.message}]`),{appId:le,measurementId:He};throw je}const Dt=503===Number(null===(K=tt?.customData)||void 0===K?void 0:K.httpStatus)?(0,ne.$s)(x,z.intervalMillis,Pp):(0,ne.$s)(x,z.intervalMillis),St={throttleEndTimeMillis:Date.now()+Dt,backoffCount:x+1};return z.setThrottleMetadata(le,St),Pn.debug(`Calling attemptFetch again in ${Dt} millis`),Op(C,St,L,z)}}),_h.apply(this,arguments)}class xc{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let Su,Pc;function vh(){return(vh=(0,F.Z)(function*(C,b,x,L,z){if(z&&z.global)C("event",x,L);else{const K=yield b;C("event",x,Object.assign(Object.assign({},L),{send_to:K}))}})).apply(this,arguments)}function Er(){return(Er=(0,F.Z)(function*(){if(!(0,ne.hl)())return Pn.warn(xr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(C){return Pn.warn(xr.create("indexeddb-unavailable",{errorInfo:C?.toString()}).message),!1}return!0})).apply(this,arguments)}function ka(){return ka=(0,F.Z)(function*(C,b,x,L,z,K,le){var He;const je=function Bn(C){return Tu.apply(this,arguments)}(C);je.then($n=>{x[$n.measurementId]=$n.appId,C.options.measurementId&&$n.measurementId!==C.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${$n.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($n=>Pn.error($n)),b.push(je);const tt=function ao(){return Er.apply(this,arguments)}().then($n=>{if($n)return L.getId()}),[Dt,St]=yield Promise.all([je,tt]);(function Mc(C){const b=window.document.getElementsByTagName("script");for(const x of Object.values(b))if(x.src&&x.src.includes(dl)&&x.src.includes(C))return x;return null})(K)||function Iu(C,b){const x=function Eu(C,b){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(C,b)),x}("firebase-js-sdk-policy",{createScriptURL:wu}),L=document.createElement("script"),z=`${dl}?l=${C}&id=${b}`;L.src=x?x?.createScriptURL(z):z,L.async=!0,document.head.appendChild(L)}(K,Dt.measurementId),Pc&&(z("consent","default",Pc),function Oa(C){Pc=C}(void 0)),z("js",new Date);const Rr=null!==(He=le?.config)&&void 0!==He?He:{};return Rr[cl]="firebase",Rr.update=!0,null!=St&&(Rr[Wm]=St),z("config",Dt.measurementId,Rr),Su&&(z("set",Su),function Bo(C){Su=C}(void 0)),Dt.measurementId}),ka.apply(this,arguments)}class uo{constructor(b){this.app=b}_delete(){return delete Nr[this.app.options.appId],Promise.resolve()}}let Nr={},Oc=[];const xu={};let Gi,zi,jo="dataLayer",Nu=!1;function kc(C,b,x){!function ws(){const C=[];if((0,ne.ru)()&&C.push("This is a browser extension environment."),(0,ne.zI)()||C.push("Cookies are not available."),C.length>0){const b=C.map((L,z)=>`(${z+1}) ${L}`).join(" "),x=xr.create("invalid-analytics-context",{errorInfo:b});Pn.warn(x.message)}}();const L=C.options.appId;if(!L)throw xr.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw xr.create("no-api-key");Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Nr[L])throw xr.create("already-exists",{id:L});if(!Nu){!function Ac(C){let b=[];Array.isArray(window[C])?b=window[C]:window[C]=b}(jo);const{wrappedGtag:K,gtagCore:le}=function bu(C,b,x,L,z){let K=function(...le){window[L].push(arguments)};return window[z]&&"function"==typeof window[z]&&(K=window[z]),window[z]=function Du(C,b,x,L){function K(){return K=(0,F.Z)(function*(le,...He){try{if("event"===le){const[je,tt]=He;yield function _s(C,b,x,L,z){return hl.apply(this,arguments)}(C,b,x,je,tt)}else if("config"===le){const[je,tt]=He;yield function Cu(C,b,x,L,z,K){return Lo.apply(this,arguments)}(C,b,x,L,je,tt)}else if("consent"===le){const[je]=He;C("consent","update",je)}else if("get"===le){const[je,tt,Dt]=He;C("get",je,tt,Dt)}else if("set"===le){const[je]=He;C("set",je)}else C(le,...He)}catch(je){Pn.error(je)}}),K.apply(this,arguments)}return function z(le){return K.apply(this,arguments)}}(K,C,b,x),{gtagCore:K,wrappedGtag:window[z]}}(Nr,Oc,xu,jo,"gtag");zi=K,Gi=le,Nu=!0}return Nr[L]=function Ct(C,b,x,L,z,K,le){return ka.apply(this,arguments)}(C,Oc,xu,b,Gi,jo,x),new uo(C)}function Ru(){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,F.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}const _l="@firebase/analytics";!function Pu(){(0,ee._registerComponent)(new pe.wA(Un,(b,{options:x})=>kc(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ee._registerComponent)(new pe.wA("analytics-internal",function C(b){try{const x=b.getProvider(Un).getImmediate();return{logEvent:(L,z,K)=>function Ho(C,b,x,L){C=(0,ne.m9)(C),function Uo(C,b,x,L,z){return vh.apply(this,arguments)}(zi,Nr[C.app.options.appId],b,x,L).catch(z=>Pn.error(z))}(x,L,z,K)}}catch(x){throw xr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ee.registerVersion)(_l,"0.10.0"),(0,ee.registerVersion)(_l,"0.10.0","esm2017")}();var Us=O(1954),Lc=O(2631);const Lp=new class Fa extends Lc.v{}(class Eh extends Us.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(b,x,L):(b.flush(this),0)}});var La=O(6321),co=O(9397),Bs=O(5137),Wi=O(3093);const Ou=new m.GfV("7.6.1"),Go="__angularfire_symbol__analyticsIsSupportedValue",qi="__angularfire_symbol__analyticsIsSupported",wl="__angularfire_symbol__remoteConfigIsSupportedValue",zo="__angularfire_symbol__remoteConfigIsSupported",El="__angularfire_symbol__messagingIsSupportedValue",Il="__angularfire_symbol__messagingIsSupported";function ku(C,b,x){if(b){if(1===b.length)return b[0];const K=b.filter(le=>le.app===x);if(1===K.length)return K[0]}return x.container.getProvider(C).getImmediate({optional:!0})}globalThis[qi]||(globalThis[qi]=Ru().then(C=>globalThis[Go]=C).catch(()=>globalThis[Go]=!1)),globalThis[Il]||(globalThis[Il]=Se().then(C=>globalThis[El]=C).catch(()=>globalThis[El]=!1)),globalThis[zo]||(globalThis[zo]=ko().then(C=>globalThis[wl]=C).catch(()=>globalThis[wl]=!1));const Jm=(C,b)=>{const x=b?[b]:(0,X.C6)(),L=[];return x.forEach(z=>{z.container.getProvider(C).instances.forEach(le=>{L.includes(le)||L.push(le)})}),L};function Es(){}class jn{constructor(b,x=Lp){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,L){const z=this.zone;return this.delegate.schedule(function(le){z.runGuarded(()=>{b.apply(this,[le])})},x,L)}}class Uc{constructor(b){this.zone=b,this.task=null}call(b,x){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Es,{},Es,Es)),x.pipe((0,co.b)({next:L,complete:L,error:L})).subscribe(b).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let js=(()=>{class C{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new jn(Zone.current)),this.insideAngular=x.run(()=>new jn(Zone.current,La.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(x){return new(x||C)(m.LFG(m.R0b))},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Wo(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Fu(C){return Wo(),function ey(C){return function(x){return(x=x.lift(new Uc(C.ngZone))).pipe((0,Bs.R)(C.outsideAngular),(0,Wi.Q)(C.insideAngular))}}(Wo())(C)}},9058:(ot,De,O)=>{O.d(De,{$s:()=>ls,BH:()=>te,DV:()=>Cr,Dv:()=>ma,G6:()=>Ns,GJ:()=>lr,L:()=>he,LL:()=>Te,Pz:()=>_e,Sg:()=>be,UG:()=>ae,UI:()=>ga,US:()=>pe,Wj:()=>Ot,Wl:()=>dt,Yr:()=>Mo,ZB:()=>J,ZR:()=>Ie,aH:()=>ie,b$:()=>pr,cI:()=>Vn,dS:()=>eo,eu:()=>de,g5:()=>F,gK:()=>an,gQ:()=>bt,h$:()=>Oe,hl:()=>ue,hu:()=>X,jU:()=>_t,lb:()=>Bi,m9:()=>Kt,ne:()=>_n,p$:()=>G,pd:()=>Bt,r3:()=>cn,ru:()=>Ut,tV:()=>U,uI:()=>ze,ug:()=>ya,vZ:()=>ni,w1:()=>xs,w9:()=>bn,xO:()=>iu,xb:()=>ti,z$:()=>Fe,zI:()=>ve,zd:()=>ht});const m={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},X=function($,B){if(!$)throw F(B)},F=function($){return new Error("Firebase Database ("+m.SDK_VERSION+") INTERNAL ASSERT FAILED: "+$)},ee=function($){const B=[];let q=0;for(let Ce=0;Ce<$.length;Ce++){let se=$.charCodeAt(Ce);se<128?B[q++]=se:se<2048?(B[q++]=se>>6|192,B[q++]=63&se|128):55296==(64512&se)&&Ce+1<$.length&&56320==(64512&$.charCodeAt(Ce+1))?(se=65536+((1023&se)<<10)+(1023&$.charCodeAt(++Ce)),B[q++]=se>>18|240,B[q++]=se>>12&63|128,B[q++]=se>>6&63|128,B[q++]=63&se|128):(B[q++]=se>>12|224,B[q++]=se>>6&63|128,B[q++]=63&se|128)}return B},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,B){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let se=0;se<$.length;se+=3){const et=$[se],ft=se+1<$.length,jt=ft?$[se+1]:0,Tn=se+2<$.length,pn=Tn?$[se+2]:0;let yr=(15&jt)<<2|pn>>6,Di=63&pn;Tn||(Di=64,ft||(yr=64)),Ce.push(q[et>>2],q[(3&et)<<4|jt>>4],q[yr],q[Di])}return Ce.join("")},encodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa($):this.encodeByteArray(ee($),B)},decodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?atob($):function($){const B=[];let q=0,Ce=0;for(;q<$.length;){const se=$[q++];if(se<128)B[Ce++]=String.fromCharCode(se);else if(se>191&&se<224){const et=$[q++];B[Ce++]=String.fromCharCode((31&se)<<6|63&et)}else if(se>239&&se<365){const Tn=((7&se)<<18|(63&$[q++])<<12|(63&$[q++])<<6|63&$[q++])-65536;B[Ce++]=String.fromCharCode(55296+(Tn>>10)),B[Ce++]=String.fromCharCode(56320+(1023&Tn))}else{const et=$[q++],ft=$[q++];B[Ce++]=String.fromCharCode((15&se)<<12|(63&et)<<6|63&ft)}}return B.join("")}(this.decodeStringToByteArray($,B))},decodeStringToByteArray($,B){this.init_();const q=B?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let se=0;se<$.length;){const et=q[$.charAt(se++)],jt=se<$.length?q[$.charAt(se)]:0;++se;const pn=se<$.length?q[$.charAt(se)]:64;++se;const zt=se<$.length?q[$.charAt(se)]:64;if(++se,null==et||null==jt||null==pn||null==zt)throw new ge;Ce.push(et<<2|jt>>4),64!==pn&&(Ce.push(jt<<4&240|pn>>2),64!==zt&&Ce.push(pn<<6&192|zt))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class ge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oe=function($){const B=ee($);return pe.encodeByteArray(B,!0)},he=function($){return Oe($).replace(/\./g,"")},U=function($){try{return pe.decodeString($,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function G($){return J(void 0,$)}function J($,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return B}for(const q in B)!B.hasOwnProperty(q)||!Ue(q)||($[q]=J($[q],B[q]));return $}function Ue($){return"__proto__"!==$}const Le=()=>{try{return function Me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=$&&U($[1]);return B&&JSON.parse(B)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},ie=()=>{var $;return null===($=Le())||void 0===$?void 0:$.config},_e=$=>{var B;return null===(B=Le())||void 0===B?void 0:B[`_${$}`]};class te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,q)=>{this.resolve=B,this.reject=q})}wrapCallback(B){return(q,Ce)=>{q?this.reject(q):this.resolve(Ce),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(q):B(q,Ce))}}}function be($,B){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=B||"demo-project",se=$.iat||0,et=$.sub||$.user_id;if(!et)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:se,exp:se+3600,auth_time:se,sub:et,user_id:et,firebase:{sign_in_provider:"custom",identities:{}}},$);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(ft)),""].join(".")}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ze(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function ae(){var $;const B=null===($=Le())||void 0===$?void 0:$.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function _t(){return"object"==typeof self&&self.self===self}function Ut(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function pr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xs(){const $=Fe();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Mo(){return!0===m.NODE_CLIENT||!0===m.NODE_ADMIN}function Ns(){return!ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ue(){try{return"object"==typeof indexedDB}catch{return!1}}function de(){return new Promise(($,B)=>{try{let q=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(Ce);se.onsuccess=()=>{se.result.close(),q||self.indexedDB.deleteDatabase(Ce),$(!0)},se.onupgradeneeded=()=>{q=!1},se.onerror=()=>{var et;B((null===(et=se.error)||void 0===et?void 0:et.message)||"")}}catch(q){B(q)}})}function ve(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ie extends Error{constructor(B,q,Ce){super(q),this.code=B,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,Ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Te.prototype.create)}}class Te{constructor(B,q,Ce){this.service=B,this.serviceName=q,this.errors=Ce}create(B,...q){const Ce=q[0]||{},se=`${this.service}/${B}`,et=this.errors[B],ft=et?function Qe($,B){return $.replace(rt,(q,Ce)=>{const se=B[Ce];return null!=se?String(se):`<${Ce}?>`})}(et,Ce):"Error";return new Ie(se,`${this.serviceName}: ${ft} (${se}).`,Ce)}}const rt=/\{\$([^}]+)}/g;function Vn($){return JSON.parse($)}function dt($){return JSON.stringify($)}const en=function($){let B={},q={},Ce={},se="";try{const et=$.split(".");B=Vn(U(et[0])||""),q=Vn(U(et[1])||""),se=et[2],Ce=q.d||{},delete q.d}catch{}return{header:B,claims:q,data:Ce,signature:se}},bn=function($){const q=en($).claims;return!!q&&"object"==typeof q&&q.hasOwnProperty("iat")},lr=function($){const B=en($).claims;return"object"==typeof B&&!0===B.admin};function cn($,B){return Object.prototype.hasOwnProperty.call($,B)}function Cr($,B){if(Object.prototype.hasOwnProperty.call($,B))return $[B]}function ti($){for(const B in $)if(Object.prototype.hasOwnProperty.call($,B))return!1;return!0}function ga($,B,q){const Ce={};for(const se in $)Object.prototype.hasOwnProperty.call($,se)&&(Ce[se]=B.call(q,$[se],se,$));return Ce}function ni($,B){if($===B)return!0;const q=Object.keys($),Ce=Object.keys(B);for(const se of q){if(!Ce.includes(se))return!1;const et=$[se],ft=B[se];if(ri(et)&&ri(ft)){if(!ni(et,ft))return!1}else if(et!==ft)return!1}for(const se of Ce)if(!q.includes(se))return!1;return!0}function ri($){return null!==$&&"object"==typeof $}function iu($){const B=[];for(const[q,Ce]of Object.entries($))Array.isArray(Ce)?Ce.forEach(se=>{B.push(encodeURIComponent(q)+"="+encodeURIComponent(se))}):B.push(encodeURIComponent(q)+"="+encodeURIComponent(Ce));return B.length?"&"+B.join("&"):""}function ht($){const B={};return $.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[se,et]=Ce.split("=");B[decodeURIComponent(se)]=decodeURIComponent(et)}}),B}function Bt($){const B=$.indexOf("?");if(!B)return"";const q=$.indexOf("#",B);return $.substring(B,q>0?q:void 0)}class bt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,q){q||(q=0);const Ce=this.W_;if("string"==typeof B)for(let zt=0;zt<16;zt++)Ce[zt]=B.charCodeAt(q)<<24|B.charCodeAt(q+1)<<16|B.charCodeAt(q+2)<<8|B.charCodeAt(q+3),q+=4;else for(let zt=0;zt<16;zt++)Ce[zt]=B[q]<<24|B[q+1]<<16|B[q+2]<<8|B[q+3],q+=4;for(let zt=16;zt<80;zt++){const yr=Ce[zt-3]^Ce[zt-8]^Ce[zt-14]^Ce[zt-16];Ce[zt]=4294967295&(yr<<1|yr>>>31)}let pn,Et,se=this.chain_[0],et=this.chain_[1],ft=this.chain_[2],jt=this.chain_[3],Tn=this.chain_[4];for(let zt=0;zt<80;zt++){zt<40?zt<20?(pn=jt^et&(ft^jt),Et=1518500249):(pn=et^ft^jt,Et=1859775393):zt<60?(pn=et&ft|jt&(et|ft),Et=2400959708):(pn=et^ft^jt,Et=3395469782);const yr=(se<<5|se>>>27)+pn+Tn+Et+Ce[zt]&4294967295;Tn=jt,jt=ft,ft=4294967295&(et<<30|et>>>2),et=se,se=yr}this.chain_[0]=this.chain_[0]+se&4294967295,this.chain_[1]=this.chain_[1]+et&4294967295,this.chain_[2]=this.chain_[2]+ft&4294967295,this.chain_[3]=this.chain_[3]+jt&4294967295,this.chain_[4]=this.chain_[4]+Tn&4294967295}update(B,q){if(null==B)return;void 0===q&&(q=B.length);const Ce=q-this.blockSize;let se=0;const et=this.buf_;let ft=this.inbuf_;for(;se<q;){if(0===ft)for(;se<=Ce;)this.compress_(B,se),se+=this.blockSize;if("string"==typeof B){for(;se<q;)if(et[ft]=B.charCodeAt(se),++ft,++se,ft===this.blockSize){this.compress_(et),ft=0;break}}else for(;se<q;)if(et[ft]=B[se],++ft,++se,ft===this.blockSize){this.compress_(et),ft=0;break}}this.inbuf_=ft,this.total_+=q}digest(){const B=[];let q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let se=this.blockSize-1;se>=56;se--)this.buf_[se]=255&q,q/=256;this.compress_(this.buf_);let Ce=0;for(let se=0;se<5;se++)for(let et=24;et>=0;et-=8)B[Ce]=this.chain_[se]>>et&255,++Ce;return B}}function _n($,B){const q=new Nn($,B);return q.subscribe.bind(q)}class Nn{constructor(B,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{B(this)}).catch(Ce=>{this.error(Ce)})}next(B){this.forEachObserver(q=>{q.next(B)})}error(B){this.forEachObserver(q=>{q.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,q,Ce){let se;if(void 0===B&&void 0===q&&void 0===Ce)throw new Error("Missing Observer.");se=function nn($,B){if("object"!=typeof $||null===$)return!1;for(const q of B)if(q in $&&"function"==typeof $[q])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:q,complete:Ce},void 0===se.next&&(se.next=gr),void 0===se.error&&(se.error=gr),void 0===se.complete&&(se.complete=gr);const et=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch{}}),this.observers.push(se),et}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,B)}sendOne(B,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{q(this.observers[B])}catch(Ce){typeof console<"u"&&console.error&&console.error(Ce)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gr(){}const ma=function($,B,q,Ce){let se;if(Ce<B?se="at least "+B:Ce>q&&(se=0===q?"none":"no more than "+q),se)throw new Error($+" failed: Was called with "+Ce+(1===Ce?" argument.":" arguments.")+" Expects "+se+".")};function an($,B){return`${$} failed: ${B} argument `}function Ot($,B,q,Ce){if((!Ce||q)&&"function"!=typeof q)throw new Error(an($,B)+"must be a valid function.")}function Bi($,B,q,Ce){if((!Ce||q)&&("object"!=typeof q||null===q))throw new Error(an($,B)+"must be a valid context object.")}const eo=function($){const B=[];let q=0;for(let Ce=0;Ce<$.length;Ce++){let se=$.charCodeAt(Ce);if(se>=55296&&se<=56319){const et=se-55296;Ce++,X(Ce<$.length,"Surrogate pair missing trail surrogate."),se=65536+(et<<10)+($.charCodeAt(Ce)-56320)}se<128?B[q++]=se:se<2048?(B[q++]=se>>6|192,B[q++]=63&se|128):se<65536?(B[q++]=se>>12|224,B[q++]=se>>6&63|128,B[q++]=63&se|128):(B[q++]=se>>18|240,B[q++]=se>>12&63|128,B[q++]=se>>6&63|128,B[q++]=63&se|128)}return B},ya=function($){let B=0;for(let q=0;q<$.length;q++){const Ce=$.charCodeAt(q);Ce<128?B++:Ce<2048?B+=2:Ce>=55296&&Ce<=56319?(B+=4,q++):B+=3}return B},us=1e3,mr=2,tr=144e5,En=.5;function ls($,B=us,q=mr){const Ce=B*Math.pow(q,$),se=Math.round(En*Ce*(Math.random()-.5)*2);return Math.min(tr,Ce+se)}function Kt($){return $&&$._delegate?$._delegate:$}},4222:(ot,De,O)=>{var m=O(5879);let X=null;function F(){return X}class ne{}const pe=new m.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(he)},providedIn:"platform"}),n})();const Oe=new m.OlP("Location Initialized");let he=(()=>{class n extends ge{constructor(){super(),this._doc=(0,m.f3M)(pe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function U(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function J(n){return n&&"?"!==n[0]?"?"+n:n}let Ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(We)},providedIn:"root"}),n})();const Me=new m.OlP("appBaseHref");let We=(()=>{class n extends Ue{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return U(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+J(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+J(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+J(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ge),m.LFG(Me,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Pe=(()=>{class n extends Ue{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=U(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+J(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+J(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ge),m.LFG(Me,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Ge=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ie(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G(ut(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+J(r))}normalize(t){return n.stripTrailingSlash(function pt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ut(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+J(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+J(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=J,n.joinWithSlash=U,n.stripTrailingSlash=G,n.\u0275fac=function(t){return new(t||n)(m.LFG(Ue))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Le(){return new Ge((0,m.LFG)(Ue))}()},providedIn:"root"}),n})();function ut(n){return n.replace(/\/index.html$/,"")}class rc{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let nl=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new rc(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),Gd(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Gd(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Gd(n,e){n.context.$implicit=e.item}let No=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new jm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){yp("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){yp("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class jm{constructor(){this.$implicit=null,this.ngIf=null}}function yp(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}class cr{createSubscription(e,t){return(0,m.rg0)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,m.rg0)(()=>e.unsubscribe())}}class dn{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const to=new dn,br=new cr;let au=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,m.QGY)(t))return to;if((0,m.F4k)(t))return br;throw function Pt(n,e){return new m.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.sBO,16))},n.\u0275pipe=m.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Ti=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function Oo(n){return"server"===n}let fs=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new Kr((0,m.LFG)(pe),window)}),n})();class Kr{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ko(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Si(this.window.history)||Si(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Si(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xa extends ne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ar extends xa{static makeCurrent(){!function ee(n){X||(X=n)}(new Ar)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ch(){return Na=Na||document.querySelector("base"),Na?Na.getAttribute("href"):null}();return null==t?null:function Mi(n){Vs=Vs||document.createElement("a"),Vs.setAttribute("href",n);const e=Vs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Na=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function xo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Vs,Na=null,dh=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const wc=new m.OlP("EventManagerPlugins");let ys=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new m.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(wc),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class hh{constructor(e){this._doc=e}}const Ec="ng-app-id";let ul=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Oo(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Ec}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(Ec),a;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(Ec,this.appId),l}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,l=a.get(r)?.elements;l?l.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe),m.LFG(m.AFp),m.LFG(m.Ojb,8),m.LFG(m.Lbi))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Ic={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},no=/%COMP%/g,Mp=new m.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Dc(n,e){return e.map(t=>t.replace(no,n))}let ji=(()=>{class n{constructor(t,r,i,a,l,f,y,E=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=l,this.platformId=f,this.ngZone=y,this.nonce=E,this.rendererByCompId=new Map,this.platformIsServer=Oo(f),this.defaultRenderer=new Ra(t,l,y,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===m.ifc.ShadowDom&&(r={...r,encapsulation:m.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Wt?i.applyToHost(t):i instanceof Se&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const l=this.doc,f=this.ngZone,y=this.eventManager,E=this.sharedStylesHost,T=this.removeStylesOnCompDestroy,M=this.platformIsServer;switch(r.encapsulation){case m.ifc.Emulated:a=new Wt(y,E,r,this.appId,T,l,f,M);break;case m.ifc.ShadowDom:return new Np(y,E,t,r,l,f,this.nonce,M);default:a=new Se(y,E,r,T,l,f,M)}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ys),m.LFG(ul),m.LFG(m.AFp),m.LFG(Mp),m.LFG(pe),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(m.Ojb))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ra{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ic[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Tc(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Tc(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new m.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Ic[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ic[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=F().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Tc(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Np extends Ra{constructor(e,t,r,i,a,l,f,y){super(e,a,l,y),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const E=Dc(i.id,i.styles);for(const T of E){const M=document.createElement("style");f&&M.setAttribute("nonce",f),M.textContent=T,this.shadowRoot.appendChild(M)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Se extends Ra{constructor(e,t,r,i,a,l,f,y){super(e,a,l,f),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=y?Dc(y,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Wt extends Se{constructor(e,t,r,i,a,l,f,y){const E=i+"-"+r.id;super(e,t,r,a,l,f,y,E),this.contentAttr=function ph(n){return"_ngcontent-%COMP%".replace(no,n)}(E),this.hostAttr=function xp(n){return"_nghost-%COMP%".replace(no,n)}(E)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Rp=(()=>{class n extends hh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const io=["alt","control","meta","shift"],Mr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},so={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ll=(()=>{class n extends hh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),io.forEach(E=>{const T=r.indexOf(E);T>-1&&(r.splice(T,1),l+=E+".")}),l+=a,0!=r.length||0===a.length)return null;const y={};return y.domEventName=i,y.fullKey=l,y}static matchEventFullKeyCode(t,r){let i=Mr[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),io.forEach(l=>{l!==i&&(0,so[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const dl=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Wm(){Ar.makeCurrent()},multi:!0},{provide:pe,useFactory:function Lr(){return(0,m.RDi)(document),document},deps:[]}]),Pn=new m.OlP(""),Hi=[{provide:m.rWj,useClass:class zm{addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new m.vHH(5103,!1);return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(y){l=l||y,a--,0==a&&r(l)};i.forEach(y=>{y.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],xr=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function cl(){return new m.qLn},deps:[]},{provide:wc,useClass:Rp,multi:!0,deps:[pe,m.R0b,m.Lbi]},{provide:wc,useClass:ll,multi:!0,deps:[pe]},ji,ul,ys,{provide:m.FYo,useExisting:ji},{provide:class vr{},useClass:dh,deps:[]},[]];let wu=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Pn,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...xr,...Hi],imports:[Ti,m.hGG]}),n})(),Cu=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pe))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ac(){return new Cu((0,m.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var On=O(2459),Vr=O(5592);const{isArray:kp}=Array,{getPrototypeOf:vs,prototype:Au,keys:Mu}=Object;function Pc(n){if(1===n.length){const e=n[0];if(kp(e))return{args:e,keys:null};if(function Oa(n){return n&&"object"==typeof n&&vs(n)===Au}(e)){const t=Mu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Bo=O(4829),ao=O(4564),Er=O(8251),Ct=O(7398);const{isArray:ka}=Array;function Nr(n){return(0,Ct.U)(e=>function uo(n,e){return ka(e)?n(...e):n(e)}(n,e))}function Oc(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let jo=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n}),n})(),ci=(()=>{class n extends jo{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();const Gi=new m.OlP("NgValueAccessor"),wh={provide:Gi,useExisting:(0,m.Gpc)(()=>$o),multi:!0},kc=new m.OlP("CompositionEventMode");let $o=(()=>{class n extends jo{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ws(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(kc,8))},n.\u0275dir=m.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&m.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[m._Bn([wh]),m.qOj]}),n})();const Qn=new m.OlP("NgValidators"),di=new m.OlP("NgAsyncValidators");function yl(n){return function Ni(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function Pu(n){return null}function Us(n){return null!=n}function Eh(n){return(0,m.QGY)(n)?(0,On.D)(n):n}function Lc(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Fa(n,e){return e.map(t=>t(n))}function Ih(n){return n.map(e=>function Lp(n){return!n.validate}(e)?e:t=>e.validate(t))}function co(n){return null!=n?function La(n){if(!n)return null;const e=n.filter(Us);return 0==e.length?null:function(t){return Lc(Fa(t,e))}}(Ih(n)):null}function Wi(n){return null!=n?function Bs(n){if(!n)return null;const e=n.filter(Us);return 0==e.length?null:function(t){return function xu(...n){const e=(0,ao.jO)(n),{args:t,keys:r}=Pc(n),i=new Vr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let y=l,E=l;for(let T=0;T<l;T++){let M=!1;(0,Bo.Xf)(t[T]).subscribe((0,Er.x)(a,P=>{M||(M=!0,E--),f[T]=P},()=>y--,void 0,()=>{(!y||!M)&&(E||a.next(r?Oc(r,f):f),a.complete())}))}});return e?i.pipe(Nr(e)):i}(Fa(t,e).map(Eh)).pipe((0,Ct.U)(Lc))}}(Ih(n)):null}function Ou(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function wl(n){return n?Array.isArray(n)?n:[n]:[]}function zo(n,e){return Array.isArray(n)?n.includes(e):n===e}function El(n,e){const t=wl(e);return wl(n).forEach(i=>{zo(t,i)||t.push(i)}),t}function Il(n,e){return wl(e).filter(t=>!zo(n,t))}class Vc{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=co(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Wi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Qr extends Vc{get formDirective(){return null}get path(){return null}}class ho extends Vc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Qm{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Es=(()=>{class n extends Qm{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ho,2))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[m.qOj]}),n})(),jn=(()=>{class n extends Qm{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Qr,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[m.qOj]}),n})();const le="VALID",He="INVALID",je="PENDING",tt="DISABLED";function Dt(n){return($s(n)?n.validators:n)||null}function Rr(n,e){return($s(e)?e.asyncValidators:n)||null}function $s(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Ur{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===le}get invalid(){return this.status===He}get pending(){return this.status==je}get disabled(){return this.status===tt}get enabled(){return this.status!==tt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(El(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(El(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Il(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Il(e,this._rawAsyncValidators))}hasValidator(e){return zo(this._rawValidators,e)}hasAsyncValidator(e){return zo(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=je,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=tt,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=le,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===le||this.status===je)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?tt:le}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=je,this._hasOwnPendingAsyncValidator=!0;const t=Eh(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?tt:this.errors?He:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(je)?je:this._anyControlsHaveStatus(He)?He:le}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$s(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function St(n){return Array.isArray(n)?co(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function $n(n){return Array.isArray(n)?Wi(n):n||null}(this._rawAsyncValidators)}}class Zi extends Ur{constructor(e,t,r){super(Dt(t),Rr(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function fo(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new m.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function qo(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new m.vHH(1e3,"");if(!r[t])throw new m.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Va=new m.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Bc}),Bc="always";function po(n,e,t=Bc){Up(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function qv(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ry(n,e)})}(n,e),function jp(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ny(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ry(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function ty(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Vp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Up(n,e){const t=function Go(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Ou(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function qi(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Ou(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Vp(e._rawValidators,i),Vp(e._rawAsyncValidators,i)}function ry(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const nC={provide:Qr,useExisting:(0,m.Gpc)(()=>Mh)},Ah=(()=>Promise.resolve())();let Mh=(()=>{class n extends Qr{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new m.vpe,this.form=new Zi({},co(t),Wi(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ah.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),po(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ah.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ah.then(()=>{const r=this._findContainer(t.path),i=new Zi({});(function Ko(n,e){Up(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ah.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ah.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Qv(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Qn,10),m.Y36(di,10),m.Y36(Va,8))},n.\u0275dir=m.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&m.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([nC]),m.qOj]}),n})();function Jv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Hp(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Lu=class extends Ur{constructor(e=null,t,r){super(Dt(t),Rr(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$s(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Hp(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Jv(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Jv(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Hp(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Rh={provide:ho,useExisting:(0,m.Gpc)(()=>Ph)},Wp=(()=>Promise.resolve())();let Ph=(()=>{class n extends ho{constructor(t,r,i,a,l,f){super(),this._changeDetectorRef=l,this.callSetDisabledState=f,this.control=new Lu,this._registered=!1,this.name="",this.update=new m.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function sy(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===$o?t=a:function $c(n){return Object.getPrototypeOf(n.constructor)===ci}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function $p(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){po(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Wp.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,m.VuI)(r);Wp.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Is(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Qr,9),m.Y36(Qn,10),m.Y36(di,10),m.Y36(Gi,10),m.Y36(m.sBO,8),m.Y36(Va,8))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m._Bn([Rh]),m.qOj,m.TTD]}),n})(),qp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Kp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),mo=(()=>{class n{constructor(){this._validator=Pu}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Pu,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,features:[m.TTD]}),n})();const n0={provide:Qn,useExisting:(0,m.Gpc)(()=>Xc),multi:!0};let Xc=(()=>{class n extends mo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=m.VuI,this.createValidator=t=>yl}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&m.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[m._Bn([n0]),m.qOj]}),n})(),$e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[Kp]}),n})(),tg=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Va,useValue:t.callSetDisabledState??Bc}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[$e]}),n})();var dr=O(6304),Yo=O(8645),mt=O(2096),Uu=O(3019),td=O(3093),Jn=O(4664),nd=O(4552);class dA extends Yo.x{constructor(e=1/0,t=1/0,r=nd.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let y=1;y<r.length&&r[y]<=l;y+=2)f=y;f&&r.splice(0,f+1)}}}var s0=O(3020);function sC(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,s0.B)({connector:()=>new dA(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const my=(0,O(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Qi=O(9360);function vo(n,e){return(0,Qi.e)((t,r)=>{let i=0;t.subscribe((0,Er.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Qo=O(6232);function bl(n){return n<=0?()=>Qo.E:(0,Qi.e)((e,t)=>{let r=0;e.subscribe((0,Er.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Bu(n){return(0,Qi.e)((e,t)=>{let r=!1;e.subscribe((0,Er.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function oC(n=fA){return(0,Qi.e)((e,t)=>{let r=!1;e.subscribe((0,Er.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function fA(){return new my}var yy=O(2737);function Tl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vo((i,a)=>n(i,a,r)):yy.y,bl(1),t?Bu(e):oC(()=>new my))}var rd=O(4674);function aC(n,e){return(0,rd.m)(e)?(0,Jn.w)(()=>n,e):(0,Jn.w)(()=>n)}var id=O(5137),An=O(8186);O(3182);var ye=O(5861),Jo=O(534),ju=O(4537),k=O(9058),Xo=O(7879);const rg=new Map,ja={activated:!1,tokenObservers:[]},ig={initialized:!1,enabled:!1};function rr(n){return rg.get(n)||Object.assign({},ja)}function sg(){return ig}const dC="https://content-firebaseappcheck.googleapis.com/v1",a0="exchangeDebugToken",wy={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class hk{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function hC(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const pi=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function u0(n){if(!rr(n).activated)throw pi.create("use-before-activation",{appName:n.name})}function Cy(n,e){return og.apply(this,arguments)}function og(){return(og=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(M){throw pi.create("fetch-network-error",{originalErrorMessage:M?.message})}if(200!==l.status)throw pi.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(M){throw pi.create("fetch-parse-error",{originalErrorMessage:M?.message})}const y=f.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw pi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const E=1e3*Number(y[1]),T=Date.now();return{token:f.token,expireTimeMillis:T+E,issuedAtTimeMillis:T}})).apply(this,arguments)}function fC(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${dC}/projects/${t}/apps/${r}:${a0}?key=${i}`,body:{debug_token:e}}}const vA="firebase-app-check-database",pC=1,$h="firebase-app-check-store";let Dy=null;function hn(){return(hn=(0,ye.Z)(function*(n,e){const r=(yield function mC(){return Dy||(Dy=new Promise((n,e)=>{try{const t=indexedDB.open(vA,pC);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(pi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore($h,{keyPath:"compositeKey"})}}catch(t){e(pi.create("storage-open",{originalErrorMessage:t?.message}))}}),Dy)}()).transaction($h,"readwrite"),a=r.objectStore($h).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=y=>{l()},r.onerror=y=>{var E;f(pi.create("storage-set",{originalErrorMessage:null===(E=y.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}const zh=new Xo.Yd("@firebase/app-check");function Ty(n,e){return(0,k.hl)()?function yC(n,e){return function Hh(n,e){return hn.apply(this,arguments)}(function l0(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{zh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function wC(){return sg().enabled}function ug(){return d0.apply(this,arguments)}function d0(){return(d0=(0,ye.Z)(function*(){const n=sg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const EC={error:"UNKNOWN_ERROR"};function IC(n){return k.US.encodeString(JSON.stringify(n),!1)}function $a(n){return f0.apply(this,arguments)}function f0(){return(f0=(0,ye.Z)(function*(n,e=!1){const t=n.app;u0(t);const r=rr(t);let a,i=r.token;if(i&&!Sl(i)&&(r.token=void 0,i=void 0),!i){const y=yield r.cachedTokenPromise;y&&(Sl(y)?i=y:yield Ty(t,void 0))}if(!e&&i&&Sl(i))return{token:i.token};let f,l=!1;if(wC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Cy(fC(t,yield ug()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const y=yield r.exchangeTokenPromise;return yield Ty(t,y),r.token=y,{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield rr(t).exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?zh.warn(y.message):zh.error(y),a=y}return i?a?f=Sl(i)?{token:i.token,internalError:a}:CC(a):(f={token:i.token},r.token=i,yield Ty(t,i)):f=CC(a),l&&function Ay(n,e){const t=rr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f})).apply(this,arguments)}function Sy(n){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,ye.Z)(function*(n){const e=n.app;u0(e);const{provider:t}=rr(e);if(wC()){const r=yield ug(),{token:i}=yield Cy(fC(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function lg(n,e){const t=rr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function cg(n){const{app:e}=n,t=rr(e);let r=t.tokenRefresher;r||(r=function ad(n){const{app:e}=n;return new hk((0,ye.Z)(function*(){let r;if(r=rr(e).token?yield $a(n,!0):yield $a(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=rr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},wy.RETRIAL_MIN_WAIT,wy.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Sl(n){return n.expireTimeMillis-Date.now()>0}function CC(n){return{token:IC(EC),error:n}}class EA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=rr(this.app);for(const t of e)lg(this.app,t.next);return Promise.resolve()}}const pg="app-check-internal";!function mk(){(0,Jo._registerComponent)(new ju.wA("app-check",n=>function DC(n,e){return new EA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(pg).initialize()})),(0,Jo._registerComponent)(new ju.wA(pg,n=>function qh(n){return{getToken:e=>$a(n,e),getLimitedUseToken:()=>Sy(n),addTokenListener:e=>function p0(n,e,t,r){const{app:i}=n,a=rr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Sl(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),cg(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>cg(n))}(n,"INTERNAL",e),removeTokenListener:e=>lg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Jo.registerVersion)("@firebase/app-check","0.8.0")}();class mg{constructor(){return(0,An.vb)("app-check")}}typeof window<"u"&&window;var E0=O(7142);const ky=new m.OlP("angularfire2.auth.use-emulator"),RC=new m.OlP("angularfire2.auth.settings"),I0=new m.OlP("angularfire2.auth.tenant-id"),Zh=new m.OlP("angularfire2.auth.langugage-code"),C0=new m.OlP("angularfire2.auth.use-device-language"),Al=new m.OlP("angularfire.auth.persistence"),ud=(n,e,t,r,i,a,l,f)=>(0,dr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,a&&y.useDeviceLanguage(),l)for(const[E,T]of Object.entries(l))y.settings[E]=T;return f&&y.setPersistence(f),y},[t,r,i,a,l,f]);let Yh=(()=>{class n{constructor(t,r,i,a,l,f,y,E,T,M,P,j){const Z=new Yo.x,me=(0,mt.of)(void 0).pipe((0,td.Q)(l.outsideAngular),(0,Jn.w)(()=>a.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,5967)))),(0,Ct.U)(()=>(0,dr.on)(t,a,r)),(0,Ct.U)(xe=>ud(xe,a,f,E,T,M,y,P)),sC({bufferSize:1,refCount:!1}));if(Oo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,mt.of)(null);else{me.pipe(Tl()).subscribe();const nt=me.pipe((0,Jn.w)(Tt=>Tt.getRedirectResult().then(qt=>qt,()=>null)),An.iC,sC({bufferSize:1,refCount:!1})),gt=me.pipe((0,Jn.w)(Tt=>new Vr.y(qt=>({unsubscribe:a.runOutsideAngular(()=>Tt.onAuthStateChanged(fn=>qt.next(fn),fn=>qt.error(fn),()=>qt.complete()))})))),ct=me.pipe((0,Jn.w)(Tt=>new Vr.y(qt=>({unsubscribe:a.runOutsideAngular(()=>Tt.onIdTokenChanged(fn=>qt.next(fn),fn=>qt.error(fn),()=>qt.complete()))}))));this.authState=nt.pipe(aC(gt),(0,id.R)(l.outsideAngular),(0,td.Q)(l.insideAngular)),this.user=nt.pipe(aC(ct),(0,id.R)(l.outsideAngular),(0,td.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,Jn.w)(Tt=>Tt?(0,On.D)(Tt.getIdToken()):(0,mt.of)(null))),this.idTokenResult=this.user.pipe((0,Jn.w)(Tt=>Tt?(0,On.D)(Tt.getIdTokenResult()):(0,mt.of)(null))),this.credential=(0,Uu.T)(nt,Z,this.authState.pipe(vo(Tt=>!Tt))).pipe((0,Ct.U)(Tt=>Tt?.user?Tt:null),(0,id.R)(l.outsideAngular),(0,td.Q)(l.insideAngular))}return(0,dr.pX)(this,me,a,{spy:{apply:(xe,nt,gt)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&gt.then(ct=>Z.next(ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(dr.Dh),m.LFG(dr.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(An.HU),m.LFG(ky,8),m.LFG(RC,8),m.LFG(I0,8),m.LFG(Zh,8),m.LFG(C0,8),m.LFG(Al,8),m.LFG(mg,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),PC=(()=>{class n{constructor(){E0.Z.registerVersion("angularfire",An.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Yh]}),n})();var OC=O(6321);function Qh(n,e){return(0,Qi.e)(function kA(n,e,t,r,i){return(a,l)=>{let f=t,y=e,E=0;a.subscribe((0,Er.x)(l,T=>{const M=E++;y=f?n(y,T,M):(f=!0,T),r&&l.next(y)},i&&(()=>{f&&l.next(y),l.complete()})))}}(n,e,arguments.length>=2,!0))}var D0=O(3997),kC=O(2420);O(5967);var LA=O(3106);const Fy="@firebase/database";let Jh="";function T0(n){Jh=n}class FC{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class VA{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const LC=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new FC(e)}}catch{}return new VA},cd=LC("localStorage"),S0=LC("sessionStorage"),Xh=new Xo.Yd("@firebase/database"),VC=function(){let n=1;return function(){return n++}}(),A0=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},Ha=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Ha.apply(null,r):e+="object"==typeof r?(0,k.Wl)(r):r,e+=" "}return e};let Ji=null,M0=!0;const UA=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Xh.logLevel=Xo.in.VERBOSE,Ji=Xh.log.bind(Xh),e&&S0.set("logging_enabled",!0)):"function"==typeof n?Ji=n:(Ji=null,S0.remove("logging_enabled"))},Jr=function(...n){if(!0===M0&&(M0=!1,null===Ji&&!0===S0.get("logging_enabled")&&UA(!0)),Ji){const e=Ha.apply(null,n);Ji(e)}},Ly=function(n){return function(...e){Jr(n,...e)}},UC=function(...n){const e="FIREBASE INTERNAL ERROR: "+Ha(...n);Xh.error(e)},ea=function(...n){const e=`FIREBASE FATAL ERROR: ${Ha(...n)}`;throw Xh.error(e),new Error(e)},gi=function(...n){const e="FIREBASE WARNING: "+Ha(...n);Xh.warn(e)},_g=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},$u="[MIN_NAME]",Ga="[MAX_NAME]",Ml=function(n,e){if(n===e)return 0;if(n===$u||e===Ga)return-1;if(e===$u||n===Ga)return 1;{const t=$C(n),r=$C(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Lt=function(n,e){return n===e?0:n<e?-1:1},ef=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Wl)(e))},Uy=function(n){if("object"!=typeof n||null===n)return(0,k.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Wl)(e[r]),t+=":",t+=Uy(n[e[r]]);return t+="}",t},BA=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Xr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const x0=function(n){(0,k.hu)(!_g(n),"Invalid JSON number");const r=1023;let i,a,l,f,y;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const E=[];for(y=52;y;y-=1)E.push(l%2?1:0),l=Math.floor(l/2);for(y=11;y;y-=1)E.push(a%2?1:0),a=Math.floor(a/2);E.push(i?1:0),E.reverse();const T=E.join("");let M="";for(y=0;y<64;y+=8){let P=parseInt(T.substr(y,8),2).toString(16);1===P.length&&(P="0"+P),M+=P}return M.toLowerCase()},HA=new RegExp("^-?(0*)\\d{1,10}$"),$C=function(n){if(HA.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},vg=function(n){try{n()}catch(e){setTimeout(()=>{throw gi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},tf=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class xl{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){gi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class nf{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Jr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gi(e)}}let rf=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const N0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,R0="websocket",Gy="long_polling";class P0{constructor(e,t,r,i,a=!1,l="",f=!1,y=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=y,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=cd.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&cd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function GC(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===R0)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Gy)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function zA(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Xr(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class zC{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const O0={},k0={};function F0(n){const e=n.toString();return O0[e]||(O0[e]=new zC),O0[e]}class WC{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&vg(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Nl{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ly(e),this.stats_=F0(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),GC(t,Gy,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new WC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new j0((...a)=>{const[l,f,y,E,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=y;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&N0.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Nl.forceAllow_=!0}static forceDisallow(){Nl.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!Nl.forceAllow_&&(Nl.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=BA(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class j0{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=VC(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=j0.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){Jr("frame writing exception"),f.stack&&Jr(f.stack),Jr(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Jr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Jr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Gs=null;typeof MozWebSocket<"u"?Gs=MozWebSocket:typeof WebSocket<"u"&&(Gs=WebSocket);let Rl=(()=>{class n{constructor(t,r,i,a,l,f,y){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ly(this.connId),this.stats_=F0(r),this.connURL=n.connectionURL_(r,f,y,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&N0.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),GC(t,R0,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,cd.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Jh}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new Gs(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Gs&&!n.forceDisallow_}static previouslyFailed(){return cd.isInMemoryStorage||!0===cd.get("previous_websocket_failure")}markConnectionHealthy(){cd.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=BA(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),QC=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Nl,Rl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Rl&&Rl.isAvailable();let i=r&&!Rl.previouslyFailed();if(t.webSocketOnly&&(r||gi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Rl];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class nD{constructor(e,t,r,i,a,l,f,y,E,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=y,this.onKill_=E,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ly("c:"+this.id+":"),this.transportManager_=new QC(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=tf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ef("t",e),r=ef("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ef("t",e),r=ef("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ef("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?UC("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):UC("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&gi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),tf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):tf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(cd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class qy{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class rD{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Ky extends rD{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ky}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class vn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function gn(){return new vn("")}function Ht(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function wo(n){return n.pieces_.length-n.pieceNum_}function In(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new vn(n.pieces_,e)}function sD(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function uf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function z0(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new vn(e,0)}function Xn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof vn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new vn(t,0)}function Jt(n){return n.pieceNum_>=n.pieces_.length}function Ri(n,e){const t=Ht(n),r=Ht(e);if(null===t)return e;if(t===r)return Ri(In(n),In(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function oD(n,e){const t=uf(n,0),r=uf(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Ml(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function hd(n,e){if(wo(n)!==wo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Eo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(wo(n)>wo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class aD{constructor(e,t){this.errorPrefix_=t,this.parts_=uf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);lD(this)}}function lD(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ta(n))}function ta(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class W0 extends rD{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new W0}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ig=1e3;let fd,Pl=(()=>{class n extends qy{constructor(t,r,i,a,l,f,y,E){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=y,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=Ly("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ig,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");W0.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Ky.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Wl)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const y=f.d;"ok"===f.s?r.resolve(y):r.reject(y)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const y={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,y=>{const E=y.d,T=y.s;n.warnOnListenWarnings_(E,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",y),"ok"!==T&&this.removeListen_(i,a),t.onComplete&&t.onComplete(T,E))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();gi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):UC("Unrecognized action received from server: "+(0,k.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ig,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ig,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ig),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ye.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let y=!1,E=null;const T=function(){E?E.close():(y=!0,a())};t.realtime_={close:T,sendRequest:function(j){(0,k.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(j)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[j,Z]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);y?Jr("getToken() completed but was canceled"):(Jr("getToken() completed. Creating connection."),t.authToken_=j&&j.accessToken,t.appCheckToken_=Z&&Z.token,E=new nD(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,me=>{gi(me+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(j){t.log_("Failed to get token: "+j),y||(t.repoInfo_.nodeAdmin&&gi(j),T())}}})()}interrupt(t){Jr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Jr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ig,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>Uy(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new vn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Jr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Jr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Jh.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Ky.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Zt(e,t)}}class Zy{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Zt($u,e),i=new Zt($u,t);return 0!==this.compare(r,i)}minPost(){return Zt.MIN}}class hD extends Zy{static get __EMPTY_NODE(){return fd}static set __EMPTY_NODE(e){fd=e}compare(e,t){return Ml(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Zt.MIN}maxPost(){return new Zt(Ga,fd)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Zt(e,fd)}toString(){return".key"}}const Wa=new hD;class Yy{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Jy,na=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Cs.EMPTY_NODE,this.right=l??Cs.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Cs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Cs.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Cs{constructor(e,t=Cs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Cs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,na.BLACK,null,null))}remove(e){return new Cs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,na.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Yy(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Yy(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Yy(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Yy(this.root_,null,this.comparator_,!0,e)}}function fM(n,e){return Ml(n.name,e.name)}function Qy(n,e){return Ml(n,e)}Cs.EMPTY_NODE=new class hM{copy(e,t,r,i,a){return this}insert(e,t,r){return new na(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const gM=function(n){return"number"==typeof n?"number:"+x0(n):"string:"+n},q0=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===Jy||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===Jy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let K0,Dg,fD,Cg=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),q0(this.priorityNode_)}static set __childrenNodeConstructor(t){K0=t}static get __childrenNodeConstructor(){return K0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Jt(t)?this:".priority"===Ht(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Ht(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===wo(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(In(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+gM(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?x0(this.value_):this.value_,this.lazyHash_=A0(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const sn=new class yM extends Zy{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Ml(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Zt.MIN}maxPost(){return new Zt(Ga,new Cg("[PRIORITY-POST]",fD))}makePost(e,t){const r=Dg(e);return new Zt(t,new Cg("[PRIORITY-POST]",r))}toString(){return".priority"}},bg=Math.log(2);class Pi{constructor(e){this.count=parseInt(Math.log(e+1)/bg,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const qa=function(n,e,t,r){n.sort(e);const i=function(y,E){const T=E-y;let M,P;if(0===T)return null;if(1===T)return M=n[y],P=t?t(M):M,new na(P,M.node,na.BLACK,null,null);{const j=parseInt(T/2,10)+y,Z=i(y,j),me=i(j+1,E);return M=n[j],P=t?t(M):M,new na(P,M.node,na.BLACK,Z,me)}},f=function(y){let E=null,T=null,M=n.length;const P=function(Z,me){const xe=M-Z,nt=M;M-=Z;const gt=i(xe+1,nt),ct=n[xe],Tt=t?t(ct):ct;j(new na(Tt,ct.node,me,null,gt))},j=function(Z){E?(E.left=Z,E=Z):(T=Z,E=Z)};for(let Z=0;Z<y.count;++Z){const me=y.nextBitIsOne(),xe=Math.pow(2,y.count-(Z+1));me?P(xe,na.BLACK):(P(xe,na.BLACK),P(xe,na.RED))}return T}(new Pi(n.length));return new Cs(r||e,f)};let lf;const mi={};class ra{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(mi&&sn,"ChildrenNode.ts has not been loaded"),lf=lf||new ra({".priority":mi},{".priority":sn}),lf}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Cs?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Wa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Zt.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?qa(r,e.getCompare()):mi;const y=e.toString(),E=Object.assign({},this.indexSet_);E[y]=e;const T=Object.assign({},this.indexes_);return T[y]=f,new ra(T,E)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===mi){if(l.isDefinedOn(e.node)){const f=[],y=t.getIterator(Zt.Wrap);let E=y.getNext();for(;E;)E.name!==e.name&&f.push(E),E=y.getNext();return f.push(e),qa(f,l.getCompare())}return mi}{const f=t.get(e.name);let y=i;return f&&(y=y.remove(new Zt(e.name,f))),y.insert(e,e.node)}});return new ra(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===mi)return i;{const a=t.get(e.name);return a?i.remove(new Zt(e.name,a)):i}});return new ra(r,this.indexSet_)}}let Ka,xt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&q0(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ka||(Ka=new n(new Cs(Qy),null,ra.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ka}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Ka:r}}getChild(t){const r=Ht(t);return null===r?this:this.getImmediateChild(r).getChild(In(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Zt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?Ka:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=Ht(t);if(null===i)return r;{(0,k.hu)(".priority"!==Ht(t)||1===wo(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(In(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(sn,(f,y)=>{r[f]=y.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const y in r)f[y]=r[y];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+gM(this.getPriority().val())+":"),this.forEachChild(sn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":A0(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Zt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Zt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Za?-1:0}withIndex(t){if(t===Wa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Wa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(sn),a=r.getIterator(sn);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===Wa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Za=new class cf extends xt{constructor(){super(new Cs(Qy),xt.EMPTY_NODE,ra.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return xt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Zt,{MIN:{value:new Zt($u,xt.EMPTY_NODE)},MAX:{value:new Zt(Ga,Za)}}),hD.__EMPTY_NODE=xt.EMPTY_NODE,Cg.__childrenNodeConstructor=xt,function pM(n){Jy=n}(Za),function Z0(n){fD=n}(Za);const df=!0;function Mn(n,e=null){if(null===n)return xt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Cg(n,Mn(e));if(n instanceof Array||!df){let t=xt.EMPTY_NODE;return Xr(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Mn(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Mn(e))}{const t=[];let r=!1;if(Xr(n,(l,f)=>{if("."!==l.substring(0,1)){const y=Mn(f);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new Zt(l,y)))}}),0===t.length)return xt.EMPTY_NODE;const a=qa(t,fM,l=>l.name,Qy);if(r){const l=qa(t,sn.getCompare());return new xt(a,Mn(e),new ra({".priority":l},{".priority":sn}))}return new xt(a,Mn(e),ra.Default)}}!function mM(n){Dg=n}(Mn);class Ol extends Zy{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!Jt(e)&&".priority"!==Ht(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Ml(e.name,t.name):a}makePost(e,t){const r=Mn(e),i=xt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Zt(t,i)}maxPost(){const e=xt.EMPTY_NODE.updateChild(this.indexPath_,Za);return new Zt(Ga,e)}toString(){return uf(this.indexPath_,0).join("/")}}const kl=new class hf extends Zy{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ml(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Zt.MIN}maxPost(){return Zt.MAX}makePost(e,t){const r=Mn(e);return new Zt(t,r)}toString(){return".value"}};function Y0(n){return{type:"value",snapshotNode:n}}function pd(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function ff(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function pf(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Xy{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(ff(t,f)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?l.trackChildChange(pd(t,r)):l.trackChildChange(pf(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(sn,(i,a)=>{t.hasChild(i)||r.trackChildChange(ff(i,a))}),t.isLeafNode()||t.forEachChild(sn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(pf(i,a,l))}else r.trackChildChange(pd(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?xt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class gf{constructor(e){this.indexedFilter_=new Xy(e.getIndex()),this.index_=e.getIndex(),this.startPost_=gf.getStartPost_(e),this.endPost_=gf.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,l){return this.matches(new Zt(t,r))||(r=xt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=xt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(xt.EMPTY_NODE);const a=this;return t.forEachChild(sn,(l,f)=>{a.matches(new Zt(l,f))||(i=i.updateImmediateChild(l,xt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class gD{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new gf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new Zt(t,r))||(r=xt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=xt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=xt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f)){if(!this.withinDirectionalEnd(f))break;i=i.updateImmediateChild(f.name,f.node),l++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(xt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;a.hasNext();){const f=a.getNext();l<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?l++:i=i.updateImmediateChild(f.name,xt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const M=this.index_.getCompare();l=(P,j)=>M(j,P)}else l=this.index_.getCompare();const f=e;(0,k.hu)(f.numChildren()===this.limit_,"");const y=new Zt(t,r),E=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),T=this.rangedFilter_.matches(y);if(f.hasChild(t)){const M=f.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=P&&(P.name===t||f.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const j=null==P?1:l(P,y);if(T&&!r.isEmpty()&&j>=0)return a?.trackChildChange(pf(t,r,M)),f.updateImmediateChild(t,r);{a?.trackChildChange(ff(t,M));const me=f.updateImmediateChild(t,xt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(a?.trackChildChange(pd(P.name,P.node)),me.updateImmediateChild(P.name,P.node)):me}}return r.isEmpty()?e:T&&l(E,y)>=0?(null!=a&&(a.trackChildChange(ff(E.name,E.node)),a.trackChildChange(pd(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(E.name,xt.EMPTY_NODE)):e}}class Tg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=sn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$u}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ga}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===sn}copy(){const e=new Tg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function mD(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function J0(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function e_(n,e){const t=n.copy();return t.index_=e,t}function wM(n){const e={};if(n.isDefault())return e;let t;if(n.index_===sn?t="$priority":n.index_===kl?t="$value":n.index_===Wa?t="$key":((0,k.hu)(n.index_ instanceof Ol,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,k.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,k.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function yD(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==sn&&(e.i=n.index_.toString()),e}class t_ extends qy{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ly("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=t_.getListenId_(e,r),f={};this.listens_[l]=f;const y=wM(e._queryParams);this.restRequest_(a+".json",y,(E,T)=>{let M=T;if(404===E&&(M=null,E=null),null===E&&this.onDataUpdate_(a,M,!1,r),(0,k.DV)(this.listens_,l)===f){let P;P=E?401===E?"permission_denied":"rest_error:"+E:"ok",i(P,null)}})}unlisten(e,t){const r=t_.getListenId_(e,t);delete this.listens_[r]}get(e){const t=wM(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let y=null;if(f.status>=200&&f.status<300){try{y=(0,k.cI)(f.responseText)}catch{gi("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,y)}else 401!==f.status&&404!==f.status&&gi("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class EM{constructor(){this.rootNode_=xt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function mf(){return{value:null,children:new Map}}function Ya(n,e,t){if(Jt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Ht(e);n.children.has(r)||n.children.set(r,mf()),Ya(n.children.get(r),e=In(e),t)}}function Sg(n,e){if(Jt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(sn,(r,i)=>{Ya(n,new vn(r),i)}),Sg(n,e)}}if(n.children.size>0){const t=Ht(e);return e=In(e),n.children.has(t)&&Sg(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function yf(n,e,t){null!==n.value?t(e,n.value):function _D(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{yf(i,new vn(e.toString()+"/"+r),t)})}class Ag{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Xr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class CM{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ag(e);const r=1e4+2e4*Math.random();tf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Xr(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),tf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Qa=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Qa||{});function xg(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class gd{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Qa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Jt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new vn(e));return new gd(gn(),t,this.revert)}}return(0,k.hu)(Ht(this.path)===e,"operationForChild called for unrelated child."),new gd(In(this.path),this.affectedTree,this.revert)}}class Fl{constructor(e,t){this.source=e,this.path=t,this.type=Qa.LISTEN_COMPLETE}operationForChild(e){return Jt(this.path)?new Fl(this.source,gn()):new Fl(this.source,In(this.path))}}class _f{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Qa.OVERWRITE}operationForChild(e){return Jt(this.path)?new _f(this.source,gn(),this.snap.getImmediateChild(e)):new _f(this.source,In(this.path),this.snap)}}class vf{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Qa.MERGE}operationForChild(e){if(Jt(this.path)){const t=this.children.subtree(new vn(e));return t.isEmpty()?null:t.value?new _f(this.source,gn(),t.value):new vf(this.source,gn(),t)}return(0,k.hu)(Ht(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new vf(this.source,In(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ll{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Jt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ht(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class nw{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function wf(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,y)=>function TM(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new Zt(e.childName,e.snapshotNode),i=new Zt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,y)),l.forEach(f=>{const y=function bM(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(E=>{E.respondsTo(f.type)&&e.push(E.createEvent(y,n.query_))})})}function Ng(n,e){return{eventCache:n,serverCache:e}}function Ef(n,e,t,r){return Ng(new Ll(e,t,r),n.serverCache)}function rw(n,e,t,r){return Ng(n.eventCache,new Ll(e,t,r))}function n_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function md(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let iw;class xn{constructor(e,t=(()=>(iw||(iw=new Cs(Lt)),iw))()){this.value=e,this.children=t}static fromObject(e){let t=new xn(null);return Xr(e,(r,i)=>{t=t.set(new vn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:gn(),value:this.value};if(Jt(e))return null;{const r=Ht(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(In(e),t);return null!=a?{path:Xn(new vn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Jt(e))return this;{const t=Ht(e),r=this.children.get(t);return null!==r?r.subtree(In(e)):new xn(null)}}set(e,t){if(Jt(e))return new xn(t,this.children);{const r=Ht(e),a=(this.children.get(r)||new xn(null)).set(In(e),t),l=this.children.insert(r,a);return new xn(this.value,l)}}remove(e){if(Jt(e))return this.children.isEmpty()?new xn(null):new xn(null,this.children);{const t=Ht(e),r=this.children.get(t);if(r){const i=r.remove(In(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new xn(null):new xn(this.value,a)}return this}}get(e){if(Jt(e))return this.value;{const t=Ht(e),r=this.children.get(t);return r?r.get(In(e)):null}}setTree(e,t){if(Jt(e))return t;{const r=Ht(e),a=(this.children.get(r)||new xn(null)).setTree(In(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new xn(this.value,l)}}fold(e){return this.fold_(gn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Xn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,gn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Jt(e))return null;{const a=Ht(e),l=this.children.get(a);return l?l.findOnPath_(In(e),Xn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,gn(),t)}foreachOnPath_(e,t,r){if(Jt(e))return this;{this.value&&r(t,this.value);const i=Ht(e),a=this.children.get(i);return a?a.foreachOnPath_(In(e),Xn(t,i),r):new xn(null)}}foreach(e){this.foreach_(gn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Xn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class zs{constructor(e){this.writeTree_=e}static empty(){return new zs(new xn(null))}}function Rg(n,e,t){if(Jt(e))return new zs(new xn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Ri(i,e);return a=a.updateChild(l,t),new zs(n.writeTree_.set(i,a))}{const i=new xn(t),a=n.writeTree_.setTree(e,i);return new zs(a)}}}function If(n,e,t){let r=n;return Xr(t,(i,a)=>{r=Rg(r,Xn(e,i),a)}),r}function Pg(n,e){if(Jt(e))return zs.empty();{const t=n.writeTree_.setTree(e,new xn(null));return new zs(t)}}function Og(n,e){return null!=Vl(n,e)}function Vl(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ri(t.path,e)):null}function wD(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(sn,(r,i)=>{e.push(new Zt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Zt(r,i.value))}),e}function Ul(n,e){if(Jt(e))return n;{const t=Vl(n,e);return new zs(null!=t?new xn(t):n.writeTree_.subtree(e))}}function sw(n){return n.writeTree_.isEmpty()}function Bl(n,e){return r_(gn(),n.writeTree_,e)}function r_(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=r_(Xn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Xn(n,".priority"),r)),t}}function kg(n,e){return cw(e,n)}function ow(n,e){if(n.snap)return Eo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Eo(Xn(n.path,t),e))return!0;return!1}function aw(n){return n.visible}function uw(n,e,t){let r=zs.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)Eo(t,l)?(f=Ri(t,l),r=Rg(r,f,a.snap)):Eo(l,t)&&(f=Ri(l,t),r=Rg(r,gn(),a.snap.getChild(f)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Eo(t,l))f=Ri(t,l),r=If(r,f,a.children);else if(Eo(l,t))if(f=Ri(l,t),Jt(f))r=If(r,gn(),a.children);else{const y=(0,k.DV)(a.children,Ht(f));if(y){const E=y.getChild(In(f));r=Rg(r,gn(),E)}}}}}return r}function DD(n,e,t,r,i){if(r||i){const a=Ul(n.visibleWrites,e);return!i&&sw(a)?t:i||null!=t||Og(a,gn())?Bl(uw(n.allWrites,function(E){return(E.visible||i)&&(!r||!~r.indexOf(E.writeId))&&(Eo(E.path,e)||Eo(e,E.path))},e),t||xt.EMPTY_NODE):null}{const a=Vl(n.visibleWrites,e);if(null!=a)return a;{const l=Ul(n.visibleWrites,e);return sw(l)?t:null!=t||Og(l,gn())?Bl(l,t||xt.EMPTY_NODE):null}}}function i_(n,e,t,r){return DD(n.writeTree,n.treePath,e,t,r)}function s_(n,e){return function bD(n,e,t){let r=xt.EMPTY_NODE;const i=Vl(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(sn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Ul(n.visibleWrites,e);return t.forEachChild(sn,(l,f)=>{const y=Bl(Ul(a,new vn(l)),f);r=r.updateImmediateChild(l,y)}),wD(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return wD(Ul(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function o_(n,e,t,r){return function TD(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Xn(e,t);if(Og(n.visibleWrites,a))return null;{const l=Ul(n.visibleWrites,a);return sw(l)?i.getChild(t):Bl(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Fg(n,e){return function AD(n,e){return Vl(n.visibleWrites,e)}(n.writeTree,Xn(n.treePath,e))}function a_(n,e,t){return function SD(n,e,t,r){const i=Xn(e,t),a=Vl(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Bl(Ul(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function lw(n,e){return cw(Xn(n.treePath,e),n.writeTree)}function cw(n,e){return{treePath:n,writeTree:e}}class xD{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,pf(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,ff(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,pd(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,pf(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const dw=new class ND{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Cf{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Ll(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return a_(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:md(this.viewCache_),a=function MD(n,e,t,r,i,a){return function MM(n,e,t,r,i,a,l){let f;const y=Ul(n.visibleWrites,e),E=Vl(y,gn());if(null!=E)f=E;else{if(null==t)return[];f=Bl(y,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const T=[],M=l.getCompare(),P=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let j=P.getNext();for(;j&&T.length<i;)0!==M(j,r)&&T.push(j),j=P.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function $l(n,e,t,r,i,a){const l=e.eventCache;if(null!=Fg(r,t))return e;{let f,y;if(Jt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=md(e),M=s_(r,E instanceof xt?E:xt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),M,a)}else{const E=i_(r,md(e));f=n.filter.updateFullNode(e.eventCache.getNode(),E,a)}else{const E=Ht(t);if(".priority"===E){(0,k.hu)(1===wo(t),"Can't have a priority with additional path components");const T=l.getNode();y=e.serverCache.getNode();const M=o_(r,t,T,y);f=null!=M?n.filter.updatePriority(T,M):l.getNode()}else{const T=In(t);let M;if(l.isCompleteForChild(E)){y=e.serverCache.getNode();const P=o_(r,t,l.getNode(),y);M=null!=P?l.getNode().getImmediateChild(E).updateChild(T,P):l.getNode().getImmediateChild(E)}else M=a_(r,E,e.serverCache);f=null!=M?n.filter.updateChild(l.getNode(),E,M,T,i,a):l.getNode()}}return Ef(e,f,l.isFullyInitialized()||Jt(t),n.filter.filtersNodes())}}function Df(n,e,t,r,i,a,l,f){const y=e.serverCache;let E;const T=l?n.filter:n.filter.getIndexedFilter();if(Jt(t))E=T.updateFullNode(y.getNode(),r,null);else if(T.filtersNodes()&&!y.isFiltered()){const j=y.getNode().updateChild(t,r);E=T.updateFullNode(y.getNode(),j,null)}else{const j=Ht(t);if(!y.isCompleteForPath(t)&&wo(t)>1)return e;const Z=In(t),xe=y.getNode().getImmediateChild(j).updateChild(Z,r);E=".priority"===j?T.updatePriority(y.getNode(),xe):T.updateChild(y.getNode(),j,xe,Z,dw,null)}const M=rw(e,E,y.isFullyInitialized()||Jt(t),T.filtersNodes());return $l(n,M,t,i,new Cf(i,M,a),f)}function fw(n,e,t,r,i,a,l){const f=e.eventCache;let y,E;const T=new Cf(i,e,a);if(Jt(t))E=n.filter.updateFullNode(e.eventCache.getNode(),r,l),y=Ef(e,E,!0,n.filter.filtersNodes());else{const M=Ht(t);if(".priority"===M)E=n.filter.updatePriority(e.eventCache.getNode(),r),y=Ef(e,E,f.isFullyInitialized(),f.isFiltered());else{const P=In(t),j=f.getNode().getImmediateChild(M);let Z;if(Jt(P))Z=r;else{const me=T.getCompleteChild(M);Z=null!=me?".priority"===sD(P)&&me.getChild(z0(P)).isEmpty()?me:me.updateChild(P,r):xt.EMPTY_NODE}y=j.equals(Z)?e:Ef(e,n.filter.updateChild(f.getNode(),M,Z,P,T,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return y}function u_(n,e){return n.eventCache.isCompleteForChild(e)}function PM(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function pw(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,y=e;E=Jt(t)?r:new xn(null).setTree(t,r);const T=e.serverCache.getNode();return E.children.inorderTraversal((M,P)=>{if(T.hasChild(M)){const Z=PM(0,e.serverCache.getNode().getImmediateChild(M),P);y=Df(n,y,new vn(M),Z,i,a,l,f)}}),E.children.inorderTraversal((M,P)=>{const j=!e.serverCache.isCompleteForChild(M)&&null===P.value;if(!T.hasChild(M)&&!j){const me=PM(0,e.serverCache.getNode().getImmediateChild(M),P);y=Df(n,y,new vn(M),me,i,a,l,f)}}),y}class jr{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Xy(r.getIndex()),a=function Q0(n){return n.loadsAllData()?new Xy(n.getIndex()):n.hasLimit()?new gD(n):new gf(n)}(r);this.processor_=function jl(n){return{filter:n}}(a);const l=t.serverCache,f=t.eventCache,y=i.updateFullNode(xt.EMPTY_NODE,l.getNode(),null),E=a.updateFullNode(xt.EMPTY_NODE,f.getNode(),null),T=new Ll(y,l.isFullyInitialized(),i.filtersNodes()),M=new Ll(E,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=Ng(M,T),this.eventGenerator_=new nw(this.query_)}get query(){return this.query_}}function LM(n,e){const t=md(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Jt(e)&&!t.getImmediateChild(Ht(e)).isEmpty())?t.getChild(e):null}function gw(n){return 0===n.eventRegistrations_.length}function mw(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function yw(n,e,t,r){e.type===Qa.MERGE&&null!==e.source.queryId&&((0,k.hu)(md(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(n_(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function RM(n,e,t,r,i){const a=new xD;let l,f;if(t.type===Qa.OVERWRITE){const E=t;E.source.fromUser?l=fw(n,e,E.path,E.snap,r,i,a):((0,k.hu)(E.source.fromServer,"Unknown source."),f=E.source.tagged||e.serverCache.isFiltered()&&!Jt(E.path),l=Df(n,e,E.path,E.snap,r,i,f,a))}else if(t.type===Qa.MERGE){const E=t;E.source.fromUser?l=function Sk(n,e,t,r,i,a,l){let f=e;return r.foreach((y,E)=>{const T=Xn(t,y);u_(e,Ht(T))&&(f=fw(n,f,T,E,i,a,l))}),r.foreach((y,E)=>{const T=Xn(t,y);u_(e,Ht(T))||(f=fw(n,f,T,E,i,a,l))}),f}(n,e,E.path,E.children,r,i,a):((0,k.hu)(E.source.fromServer,"Unknown source."),f=E.source.tagged||e.serverCache.isFiltered(),l=pw(n,e,E.path,E.children,r,i,f,a))}else if(t.type===Qa.ACK_USER_WRITE){const E=t;l=E.revert?function kM(n,e,t,r,i,a){let l;if(null!=Fg(r,t))return e;{const f=new Cf(r,e,i),y=e.eventCache.getNode();let E;if(Jt(t)||".priority"===Ht(t)){let T;if(e.serverCache.isFullyInitialized())T=i_(r,md(e));else{const M=e.serverCache.getNode();(0,k.hu)(M instanceof xt,"serverChildren would be complete if leaf node"),T=s_(r,M)}E=n.filter.updateFullNode(y,T,a)}else{const T=Ht(t);let M=a_(r,T,e.serverCache);null==M&&e.serverCache.isCompleteForChild(T)&&(M=y.getImmediateChild(T)),E=null!=M?n.filter.updateChild(y,T,M,In(t),f,a):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(y,T,xt.EMPTY_NODE,In(t),f,a):y,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=i_(r,md(e)),l.isLeafNode()&&(E=n.filter.updateFullNode(E,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=Fg(r,gn()),Ef(e,E,l,n.filter.filtersNodes())}}(n,e,E.path,r,i,a):function OM(n,e,t,r,i,a,l){if(null!=Fg(i,t))return e;const f=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(Jt(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return Df(n,e,t,y.getNode().getChild(t),i,a,f,l);if(Jt(t)){let E=new xn(null);return y.getNode().forEachChild(Wa,(T,M)=>{E=E.set(new vn(T),M)}),pw(n,e,t,E,i,a,f,l)}return e}{let E=new xn(null);return r.foreach((T,M)=>{const P=Xn(t,T);y.isCompleteForPath(P)&&(E=E.set(T,y.getNode().getChild(P)))}),pw(n,e,t,E,i,a,f,l)}}(n,e,E.path,E.affectedTree,r,i,a)}else{if(t.type!==Qa.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function RD(n,e,t,r,i){const a=e.serverCache;return $l(n,rw(e,a.getNode(),a.isFullyInitialized()||Jt(t),a.isFiltered()),t,r,dw,i)}(n,e,t.path,r,a)}const y=a.getChanges();return function hw(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=n_(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(Y0(n_(e)))}}(e,l,y),{viewCache:l,changes:y}}(n.processor_,i,e,t,r);return function NM(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,OD(n,a.changes,a.viewCache.eventCache.getNode(),null)}function OD(n,e,t,r){return function DM(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function pD(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),wf(n,i,"child_removed",e,r,t),wf(n,i,"child_added",e,r,t),wf(n,i,"child_moved",a,r,t),wf(n,i,"child_changed",e,r,t),wf(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let l_,h_;class _w{constructor(){this.views=new Map}}function c_(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),yw(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(yw(l,e,t,r));return a}}function d_(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let f=i_(t,i?r:null),y=!1;f?y=!0:r instanceof xt?(f=s_(t,r),y=!1):(f=xt.EMPTY_NODE,y=!1);const E=Ng(new Ll(f,y,!1),new Ll(r,i,!1));return new jr(e,E)}return l}function FD(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function yi(n,e){let t=null;for(const r of n.views.values())t=t||LM(r,e);return t}function Io(n,e){return e._queryParams.loadsAllData()?Lg(n):n.views.get(e._queryIdentifier)}function Co(n,e){return null!=Io(n,e)}function Hu(n){return null!=Lg(n)}function Lg(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let HM=1;class f_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new xn(null),this.pendingWriteTree_=function xM(){return{visibleWrites:zs.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function yd(n,e,t,r,i){return function ED(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Rg(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Tf(n,new _f({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Gu(n,e,t=!1){const r=function AM(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function ID(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&ow(f,r.path)?i=!1:Eo(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function CD(n){n.visibleWrites=uw(n.allWrites,aw,gn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Pg(n.visibleWrites,r.path):Xr(r.children,y=>{n.visibleWrites=Pg(n.visibleWrites,Xn(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let a=new xn(null);return null!=r.snap?a=a.set(gn(),!0):Xr(r.children,l=>{a=a.set(new vn(l),!0)}),Tf(n,new gd(r.path,a,t))}return[]}function Vg(n,e,t){return Tf(n,new _f({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function _d(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let f=[];if(l&&("default"===e._queryIdentifier||Co(l,e))){const y=function BM(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const f=Hu(n);if("default"===i)for(const[y,E]of n.views.entries())l=l.concat(mw(E,t,r)),gw(E)&&(n.views.delete(y),E.query._queryParams.loadsAllData()||a.push(E.query));else{const y=n.views.get(i);y&&(l=l.concat(mw(y,t,r)),gw(y)&&(n.views.delete(i),y.query._queryParams.loadsAllData()||a.push(y.query)))}return f&&!Hu(n)&&a.push(new(function kD(){return(0,k.hu)(l_,"Reference.ts has not been loaded"),l_}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function Ak(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const E=y.removed;if(f=y.events,!i){const T=-1!==E.findIndex(P=>P._queryParams.loadsAllData()),M=n.syncPointTree_.findOnPath(a,(P,j)=>Hu(j));if(T&&!M){const P=n.syncPointTree_.subtree(a);if(!P.isEmpty()){const j=function jD(n){return n.fold((e,t,r)=>{if(t&&Hu(t))return[Lg(t)];{let i=[];return t&&(i=FD(t)),Xr(r,(a,l)=>{i=i.concat(l)}),i}})}(P);for(let Z=0;Z<j.length;++Z){const me=j[Z],xe=me.query,nt=vw(n,me);n.listenProvider_.startListening(Af(xe),Sf(n,xe),nt.hashFn,nt.onComplete)}}}!M&&E.length>0&&!r&&(T?n.listenProvider_.stopListening(Af(e),null):E.forEach(P=>{const j=n.queryToTagMap.get(Bg(P));n.listenProvider_.stopListening(Af(P),j)}))}!function qM(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Bg(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,E)}return f}function UD(n,e,t,r){const i=y_(n,r);if(null!=i){const a=__(i),l=a.path,f=a.queryId,y=Ri(l,e);return v_(n,l,new _f(xg(f),y,t))}return[]}function p_(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(P,j)=>{const Z=Ri(P,i);a=a||yi(j,Z),l=l||Hu(j)});let y,f=n.syncPointTree_.get(i);f?(l=l||Hu(f),a=a||yi(f,gn())):(f=new _w,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=a?y=!0:(y=!1,a=xt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((j,Z)=>{const me=yi(Z,gn());me&&(a=a.updateImmediateChild(j,me))}));const E=Co(f,e);if(!E&&!e._queryParams.loadsAllData()){const P=Bg(e);(0,k.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const j=function KM(){return HM++}();n.queryToTagMap.set(P,j),n.tagToQueryMap.set(j,P)}let M=function Ja(n,e,t,r,i,a){const l=d_(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function VM(n,e){n.eventRegistrations_.push(e)}(l,t),function bf(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(sn,(a,l)=>{r.push(pd(a,l))}),t.isFullyInitialized()&&r.push(Y0(t.getNode())),OD(n,r,t.getNode(),e)}(l,t)}(f,e,t,kg(n.pendingWriteTree_,i),a,y);if(!E&&!l&&!r){const P=Io(f,e);M=M.concat(function ZM(n,e,t){const r=e._path,i=Sf(n,e),a=vw(n,t),l=n.listenProvider_.startListening(Af(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!Hu(f.value),"If we're adding a query, it shouldn't be shadowed");else{const y=f.fold((E,T,M)=>{if(!Jt(E)&&T&&Hu(T))return[Lg(T).query];{let P=[];return T&&(P=P.concat(FD(T).map(j=>j.query))),Xr(M,(j,Z)=>{P=P.concat(Z)}),P}});for(let E=0;E<y.length;++E){const T=y[E];n.listenProvider_.stopListening(Af(T),Sf(n,T))}}return l}(n,e,P))}return M}function Ug(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const E=yi(f,Ri(l,e));if(E)return E});return DD(i,e,a,t,!0)}function Tf(n,e){return g_(e,n.syncPointTree_,null,kg(n.pendingWriteTree_,gn()))}function g_(n,e,t,r){if(Jt(n.path))return m_(n,e,t,r);{const i=e.get(gn());null==t&&null!=i&&(t=yi(i,gn()));let a=[];const l=Ht(n.path),f=n.operationForChild(l),y=e.children.get(l);if(y&&f){const E=t?t.getImmediateChild(l):null,T=lw(r,l);a=a.concat(g_(f,y,E,T))}return i&&(a=a.concat(c_(i,n,r,t))),a}}function m_(n,e,t,r){const i=e.get(gn());null==t&&null!=i&&(t=yi(i,gn()));let a=[];return e.children.inorderTraversal((l,f)=>{const y=t?t.getImmediateChild(l):null,E=lw(r,l),T=n.operationForChild(l);T&&(a=a.concat(m_(T,f,y,E)))}),i&&(a=a.concat(c_(i,n,r,t))),a}function vw(n,e){const t=e.query,r=Sf(n,t);return{hashFn:()=>(function PD(n){return n.viewCache_.serverCache.getNode()}(e)||xt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function VD(n,e,t){const r=y_(n,t);if(r){const i=__(r),a=i.path,l=i.queryId,f=Ri(a,e);return v_(n,a,new Fl(xg(l),f))}return[]}(n,t._path,r):function LD(n,e){return Tf(n,new Fl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function BC(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return _d(n,t,null,a)}}}}function Sf(n,e){const t=Bg(e);return n.queryToTagMap.get(t)}function Bg(n){return n._path.toString()+"$"+n._queryIdentifier}function y_(n,e){return n.tagToQueryMap.get(e)}function __(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new vn(n.substr(0,e))}}function v_(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),c_(r,t,kg(n.pendingWriteTree_,e),null)}function Af(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function $M(){return(0,k.hu)(h_,"Reference.ts has not been loaded"),h_}())(n._repo,n._path):n}class ww{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ww(t)}node(){return this.node_}}class Ew{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Xn(this.path_,e);return new Ew(this.syncTree_,t)}node(){return Ug(this.syncTree_,this.path_)}}const YM=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},$D=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?QM(n[".sv"],e,t):"object"==typeof n[".sv"]?JM(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},QM=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},JM=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},HD=function(n,e,t,r){return Cw(e,new Ew(t,n),r)},Iw=function(n,e,t){return Cw(n,new ww(e),t)};function Cw(n,e,t){const r=n.getPriority().val(),i=$D(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=$D(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new Cg(f,Mn(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new Cg(i))),l.forEachChild(sn,(f,y)=>{const E=Cw(y,e.getImmediateChild(f),t);E!==y&&(a=a.updateImmediateChild(f,E))}),a}}class Dw{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function w_(n,e){let t=e instanceof vn?e:new vn(e),r=n,i=Ht(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new Dw(i,r,a),t=In(t),i=Ht(t)}return r}function vd(n){return n.node.value}function bw(n,e){n.node.value=e,E_(n)}function GD(n){return n.node.childCount>0}function jg(n,e){Xr(n.node.children,(t,r)=>{e(new Dw(t,n,r))})}function Tw(n,e,t,r){t&&!r&&e(n),jg(n,i=>{Tw(i,e,!0,r)}),t&&r&&e(n)}function Mf(n){return new vn(null===n.parent?n.name:Mf(n.parent)+"/"+n.name)}function E_(n){null!==n.parent&&function WD(n,e,t){const r=function XM(n){return void 0===vd(n)&&!GD(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,E_(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,E_(n))}(n.parent,n.name,n)}const qD=/[\[\].#$\/\u0000-\u001F\u007F]/,KD=/[\[\].#$\u0000-\u001F\u007F]/,I_=10485760,$g=function(n){return"string"==typeof n&&0!==n.length&&!qD.test(n)},Sw=function(n){return"string"==typeof n&&0!==n.length&&!KD.test(n)},Hg=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!_g(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Xa=function(n,e,t,r){r&&void 0===e||eu((0,k.gK)(n,"value"),e,t)},eu=function(n,e,t){const r=t instanceof vn?new aD(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+ta(r));if("function"==typeof e)throw new Error(n+"contains a function "+ta(r)+" with contents = "+e.toString());if(_g(e))throw new Error(n+"contains "+e.toString()+" "+ta(r));if("string"==typeof e&&e.length>I_/3&&(0,k.ug)(e)>I_)throw new Error(n+"contains a string greater than "+I_+" utf8 bytes "+ta(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Xr(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!$g(l)))throw new Error(n+" contains an invalid key ("+l+") "+ta(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function uD(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),lD(n)})(r,l),eu(n,f,r),function aM(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+ta(r)+" in addition to actual children.")}},C_=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Xr(e,(l,f)=>{const y=new vn(l);if(eu(i,f,Xn(t,y)),".priority"===sD(y)&&!Hg(f))throw new Error(i+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=uf(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!$g(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(oD);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Eo(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},ZD=function(n,e,t){if(!t||void 0!==e){if(_g(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Hg(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},xf=function(n,e,t,r){if(!(r&&void 0===t||$g(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Nf=function(n,e,t,r){if(!(r&&void 0===t||Sw(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},xk=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Nf(n,e,t,r)},_i=function(n,e){if(".info"===Ht(e))throw new Error(n+" failed = Can't modify data under /.info/")},YD=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!$g(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Sw(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ex{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function D_(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!hd(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function Ed(n,e,t){D_(n,t),Gg(n,r=>hd(r,e))}function Ws(n,e,t){D_(n,t),Gg(n,r=>Eo(r,e)||Eo(e,r))}function Gg(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(b_(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function b_(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Ji&&Jr("event: "+t.toString()),vg(r)}}}const Xi="repo_interrupt",Nk=25;class QD{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ex,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mf(),this.transactionQueueTree_=new Dw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function XD(n){const t=n.infoData_.getNode(new vn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Rf(n){return YM({timestamp:XD(n)})}function Aw(n,e,t,r,i){n.dataUpdateCount++;const a=new vn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const y=(0,k.UI)(t,E=>Mn(E));l=function BD(n,e,t,r){const i=y_(n,r);if(i){const a=__(i),l=a.path,f=a.queryId,y=Ri(l,e),E=xn.fromObject(t);return v_(n,l,new vf(xg(f),y,E))}return[]}(n.serverSyncTree_,a,y,i)}else{const y=Mn(t);l=UD(n.serverSyncTree_,a,y,i)}else if(r){const y=(0,k.UI)(t,E=>Mn(E));l=function zM(n,e,t){const r=xn.fromObject(t);return Tf(n,new vf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,y)}else{const y=Mn(t);l=Vg(n.serverSyncTree_,a,y)}let f=a;l.length>0&&(f=kf(n,a)),Ws(n.eventQueue_,f,l)}function Mw(n,e){xw(n,"connected",e),!1===e&&function rx(n){Of(n,"onDisconnectEvents");const e=Rf(n),t=mf();yf(n.onDisconnect_,gn(),(i,a)=>{const l=HD(i,a,n.serverSyncTree_,e);Ya(t,i,l)});let r=[];yf(t,gn(),(i,a)=>{r=r.concat(Vg(n.serverSyncTree_,i,a));const l=ub(n,i);kf(n,l)}),n.onDisconnect_=mf(),Ws(n.eventQueue_,gn(),r)}(n)}function xw(n,e,t){const r=new vn("/.info/"+e),i=Mn(t);n.infoData_.updateSnapshot(r,i);const a=Vg(n.infoSyncTree_,r,i);Ws(n.eventQueue_,r,a)}function T_(n){return n.nextWriteId_++}function Id(n,e,t,r,i){Of(n,"set",{path:e.toString(),value:t,priority:r});const a=Rf(n),l=Mn(t,r),f=Ug(n.serverSyncTree_,e),y=Iw(l,f,a),E=T_(n),T=yd(n.serverSyncTree_,e,y,E,!0);D_(n.eventQueue_,T),n.server_.put(e.toString(),l.val(!0),(P,j)=>{const Z="ok"===P;Z||gi("set at "+e+" failed: "+P);const me=Gu(n.serverSyncTree_,E,!Z);Ws(n.eventQueue_,e,me),Hl(0,i,P,j)});const M=ub(n,e);kf(n,M),Ws(n.eventQueue_,M,[])}function ix(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Sg(n.onDisconnect_,e),Hl(0,t,r,i)})}function zg(n,e,t,r){const i=Mn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&Ya(n.onDisconnect_,e,i),Hl(0,r,a,l)})}function Nw(n,e,t){let r;r=".info"===Ht(e._path)?_d(n.infoSyncTree_,e,t):_d(n.serverSyncTree_,e,t),Ed(n.eventQueue_,e._path,r)}function Pf(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Xi)}function Of(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Jr(t,...e)}function Hl(n,e,t,r){e&&vg(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function S_(n,e,t){return Ug(n.serverSyncTree_,e,t)||xt.EMPTY_NODE}function qg(n,e=n.transactionQueueTree_){if(e||Rw(n,e),vd(e)){const t=ab(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function ib(n,e,t){const r=t.map(E=>E.currentWriteId),i=S_(n,e,r);let a=i;const l=i.hash();for(let E=0;E<t.length;E++){const T=t[E];(0,k.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const M=Ri(e,T.path);a=a.updateChild(M,T.currentOutputSnapshotRaw)}const f=a.val(!0),y=e;n.server_.put(y.toString(),f,E=>{Of(n,"transaction put response",{path:y.toString(),status:E});let T=[];if("ok"===E){const M=[];for(let P=0;P<t.length;P++)t[P].status=2,T=T.concat(Gu(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&M.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();Rw(n,w_(n.transactionQueueTree_,e)),qg(n,n.transactionQueueTree_),Ws(n.eventQueue_,e,T);for(let P=0;P<M.length;P++)vg(M[P])}else{if("datastale"===E)for(let M=0;M<t.length;M++)t[M].status=3===t[M].status?4:0;else{gi("transaction at "+y.toString()+" failed: "+E);for(let M=0;M<t.length;M++)t[M].status=4,t[M].abortReason=E}kf(n,e)}},l)}(n,Mf(e),t)}else GD(e)&&jg(e,t=>{qg(n,t)})}function kf(n,e){const t=ob(n,e),r=Mf(t);return function sb(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const y=e[f],E=Ri(t,y.path);let M,T=!1;if((0,k.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)T=!0,M=y.abortReason,i=i.concat(Gu(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=Nk)T=!0,M="maxretry",i=i.concat(Gu(n.serverSyncTree_,y.currentWriteId,!0));else{const P=S_(n,y.path,l);y.currentInputSnapshot=P;const j=e[f].update(P.val());if(void 0!==j){eu("transaction failed: Data returned ",j,y.path);let Z=Mn(j);"object"==typeof j&&null!=j&&(0,k.r3)(j,".priority")||(Z=Z.updatePriority(P.getPriority()));const xe=y.currentWriteId,nt=Rf(n),gt=Iw(Z,P,nt);y.currentOutputSnapshotRaw=Z,y.currentOutputSnapshotResolved=gt,y.currentWriteId=T_(n),l.splice(l.indexOf(xe),1),i=i.concat(yd(n.serverSyncTree_,y.path,gt,y.currentWriteId,y.applyLocally)),i=i.concat(Gu(n.serverSyncTree_,xe,!0))}else T=!0,M="nodata",i=i.concat(Gu(n.serverSyncTree_,y.currentWriteId,!0))}Ws(n.eventQueue_,t,i),i=[],T&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===M?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(M),!1,null)))}Rw(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)vg(r[f]);qg(n,n.transactionQueueTree_)}(n,ab(n,t),r),r}function ob(n,e){let t,r=n.transactionQueueTree_;for(t=Ht(e);null!==t&&void 0===vd(r);)r=w_(r,t),t=Ht(e=In(e));return r}function ab(n,e){const t=[];return ox(n,e,t),t.sort((r,i)=>r.order-i.order),t}function ox(n,e,t){const r=vd(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);jg(e,i=>{ox(n,i,t)})}function Rw(n,e){const t=vd(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,bw(e,t.length>0?t:void 0)}jg(e,r=>{Rw(n,r)})}function ub(n,e){const t=Mf(ob(n,e)),r=w_(n.transactionQueueTree_,e);return function zD(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{lb(n,i)}),lb(n,r),Tw(r,i=>{lb(n,i)}),t}function lb(n,e){const t=vd(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Gu(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?bw(e,void 0):t.length=a+1,Ws(n.eventQueue_,Mf(e),i);for(let l=0;l<r.length;l++)vg(r[l])}}const Pw=function(n,e){const t=ax(n),r=t.namespace;return"firebase.com"===t.domain&&ea(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ea("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&gi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new P0(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new vn(t.pathString)}},ax=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",y=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(f=n.substring(0,E-1),n=n.substring(E+2));let T=n.indexOf("/");-1===T&&(T=n.length);let M=n.indexOf("?");-1===M&&(M=n.length),e=n.substring(0,Math.min(T,M)),T<M&&(i=function cb(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(T,M)));const P=function A_(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,M)));E=e.indexOf(":"),E>=0?(l="https"===f||"wss"===f,y=parseInt(e.substring(E+1),10)):E=e.length;const j=e.slice(0,E);if("localhost"===j.toLowerCase())t="localhost";else if(j.split(".").length<=2)t=j;else{const Z=e.indexOf(".");r=e.substring(0,Z).toLowerCase(),t=e.substring(Z+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}},Ow="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Kg=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Ow.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=Ow.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class db{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Wl)(this.snapshot.exportVal())}}class hb{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class kw{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class fb{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return ix(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){_i("OnDisconnect.remove",this._path);const e=new k.BH;return zg(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){_i("OnDisconnect.set",this._path),Xa("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return zg(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){_i("OnDisconnect.setWithPriority",this._path),Xa("OnDisconnect.setWithPriority",e,this._path,!1),ZD("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function tb(n,e,t,r,i){const a=Mn(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,f)=>{"ok"===l&&Ya(n.onDisconnect_,e,a),Hl(0,i,l,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){_i("OnDisconnect.update",this._path),C_("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function nb(n,e,t,r){if((0,k.xb)(t))return Jr("onDisconnect().update() called with empty data.  Don't do anything."),void Hl(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Xr(t,(l,f)=>{const y=Mn(f);Ya(n.onDisconnect_,Xn(e,l),y)}),Hl(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class qs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Jt(this._path)?null:sD(this._path)}get ref(){return new Do(this._repo,this._path)}get _queryIdentifier(){const e=yD(this._queryParams),t=Uy(e);return"{}"===t?"default":t}get _queryObject(){return yD(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof qs))return!1;const t=this._repo===e._repo,r=hd(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function oM(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function M_(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function zu(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Wa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==$u)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ga)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===sn){if(null!=e&&!Hg(e)||null!=t&&!Hg(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof Ol||n.getIndex()===kl,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function x_(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Do extends qs{constructor(e,t){super(e,t,new Tg,!1)}get parent(){const e=z0(this._path);return null===e?null:new Do(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ia{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new vn(e),r=Cd(this.ref,e);return new ia(this._node.getChild(t),r,sn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new ia(i,Cd(this.ref,r),sn)))}hasChild(e){const t=new vn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function pb(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Cd(n._root,e):n._root}function Fw(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=Pw(e,n._repo.repoInfo_.nodeAdmin);YD("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ea("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),pb(n,t.path.toString())}function Cd(n,e){return null===Ht((n=(0,k.m9)(n))._path)?xk("child","path",e,!1):Nf("child","path",e,!1),new Do(n._repo,Xn(n._path,e))}function Lw(n,e){n=(0,k.m9)(n),_i("set",n._path),Xa("set",e,n._path,!1);const t=new k.BH;return Id(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function mb(n,e){C_("update",e,n._path,!1);const t=new k.BH;return function nx(n,e,t,r){Of(n,"update",{path:e.toString(),value:t});let i=!0;const a=Rf(n),l={};if(Xr(t,(f,y)=>{i=!1,l[f]=HD(Xn(e,f),Mn(y),n.serverSyncTree_,a)}),i)Jr("update() called with empty data.  Don't do anything."),Hl(0,r,"ok",void 0);else{const f=T_(n),y=function GM(n,e,t,r){!function SM(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=If(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=xn.fromObject(t);return Tf(n,new vf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,f);D_(n.eventQueue_,y),n.server_.merge(e.toString(),t,(E,T)=>{const M="ok"===E;M||gi("update at "+e+" failed: "+E);const P=Gu(n.serverSyncTree_,f,!M),j=P.length>0?kf(n,e):e;Ws(n.eventQueue_,j,P),Hl(0,r,E,T)}),Xr(t,E=>{const T=ub(n,Xn(e,E));kf(n,T)}),Ws(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function yb(n){n=(0,k.m9)(n);const e=new kw(()=>{}),t=new Zg(e);return function tx(n,e,t){const r=function WM(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(E,T)=>{const M=Ri(E,t);r=r||yi(T,M)});let i=n.syncPointTree_.get(t);i?r=r||yi(i,gn()):(i=new _w,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Ll(r,!0,!1):null;return function FM(n){return n_(n.viewCache_)}(d_(i,e,kg(n.pendingWriteTree_,e._path),a?l.getNode():xt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Mn(i).withIndex(e._queryParams.getIndex());let l;if(p_(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=Vg(n.serverSyncTree_,e._path,a);else{const f=Sf(n.serverSyncTree_,e);l=UD(n.serverSyncTree_,e._path,a,f)}return Ws(n.eventQueue_,e._path,l),_d(n.serverSyncTree_,e,t,null,!0),a},i=>(Of(n,"get for query "+(0,k.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new ia(r,new Do(n._repo,n._path),n._queryParams.getIndex()))}class Zg{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new db("value",this,new ia(e.snapshotNode,new Do(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new hb(this,e,t):null}matches(e){return e instanceof Zg&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class N_{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new hb(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Cd(new Do(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new db(e.type,this,new ia(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof N_&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Yg(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const y=t,E=(T,M)=>{Nw(n._repo,n,f),y(T,M)};E.userCallback=t.userCallback,E.context=t.context,t=E}const l=new kw(t,a||void 0),f="value"===e?new Zg(l):new N_(e,l);return function rb(n,e,t){let r;r=".info"===Ht(e._path)?p_(n.infoSyncTree_,e,t):p_(n.serverSyncTree_,e,t),Ed(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>Nw(n._repo,n,f)}function Qg(n,e,t,r){return Yg(n,"value",e,t,r)}function _b(n,e,t,r){return Yg(n,"child_added",e,t,r)}function Uw(n,e,t,r){return Yg(n,"child_changed",e,t,r)}function vb(n,e,t,r){return Yg(n,"child_moved",e,t,r)}function wb(n,e,t,r){return Yg(n,"child_removed",e,t,r)}function Eb(n,e,t){let r=null;const i=t?new kw(t):null;"value"===e?r=new Zg(i):e&&(r=new N_(e,i)),Nw(n._repo,n,r)}class sa{}class Ib extends sa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Xa("endAt",this._value,e._path,!0);const t=J0(e._queryParams,this._value,this._key);if(x_(t),zu(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qs(e._repo,e._path,t,e._orderByCalled)}}class hx extends sa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Xa("endBefore",this._value,e._path,!1);const t=function Tk(n,e,t){let r;return r=J0(n,e,n.index_===Wa||t?t:$u),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(x_(t),zu(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qs(e._repo,e._path,t,e._orderByCalled)}}class Bw extends sa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Xa("startAt",this._value,e._path,!0);const t=mD(e._queryParams,this._value,this._key);if(x_(t),zu(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new qs(e._repo,e._path,t,e._orderByCalled)}}class px extends sa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Xa("startAfter",this._value,e._path,!1);const t=function vM(n,e,t){let r;return r=mD(n,e,n.index_===Wa||t?t:Ga),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(x_(t),zu(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new qs(e._repo,e._path,t,e._orderByCalled)}}class Db extends sa{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new qs(e._repo,e._path,function _M(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class yx extends sa{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new qs(e._repo,e._path,function bk(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class jw extends sa{constructor(e){super(),this._path=e}_apply(e){M_(e,"orderByChild");const t=new vn(this._path);if(Jt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Ol(t),i=e_(e._queryParams,r);return zu(i),new qs(e._repo,e._path,i,!0)}}class bb extends sa{_apply(e){M_(e,"orderByKey");const t=e_(e._queryParams,Wa);return zu(t),new qs(e._repo,e._path,t,!0)}}class vx extends sa{_apply(e){M_(e,"orderByPriority");const t=e_(e._queryParams,sn);return zu(t),new qs(e._repo,e._path,t,!0)}}class Gw extends sa{_apply(e){M_(e,"orderByValue");const t=e_(e._queryParams,kl);return zu(t),new qs(e._repo,e._path,t,!0)}}class Tb extends sa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Xa("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ib(this._value,this._key)._apply(new Bw(this._value,this._key)._apply(e))}}function bo(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function UM(n){(0,k.hu)(!l_,"__referenceConstructor has already been defined"),l_=n})(Do),function jM(n){(0,k.hu)(!h_,"__referenceConstructor has already been defined"),h_=n}(Do);const Sb={};function Ab(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||ea("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Jr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,E,l=Pw(a,i),f=l.repoInfo;typeof process<"u"&&process.env&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(y=!0,a=`http://${E}?ns=${f.namespace}`,l=Pw(a,i),f=l.repoInfo):y=!l.repoInfo.secure;const T=i&&y?new rf(rf.OWNER):new nf(n.name,n.options,e);YD("Invalid Firebase Database URL",l),Jt(l.path)||ea("Database URL must point to the root of a Firebase Database (not including a child path).");const M=function xb(n,e,t,r){let i=Sb[e.name];i||(i={},Sb[e.name]=i);let a=i[n.toURLString()];return a&&ea("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new QD(n,false,t,r),i[n.toURLString()]=a,a}(f,n,T,new xl(n.name,t));return new Nb(M,n)}class Nb{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function JD(n,e,t){if(n.stats_=F0(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new t_(n.repoInfo_,(r,i,a,l)=>{Aw(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Mw(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Pl(n.repoInfo_,e,(r,i,a,l)=>{Aw(n,r,i,a,l)},r=>{Mw(n,r)},r=>{!function eb(n,e){Xr(e,(t,r)=>{xw(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function WA(n,e){const t=n.toString();return k0[t]||(k0[t]=e()),k0[t]}(n.repoInfo_,()=>new CM(n.stats_,n.server_)),n.infoData_=new EM,n.infoSyncTree_=new f_({startListening:(r,i,a,l)=>{let f=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(f=Vg(n.infoSyncTree_,r._path,y),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),xw(n,"connected",!1),n.serverSyncTree_=new f_({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,y)=>{const E=l(f,y);Ws(n.eventQueue_,r._path,E)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Do(this._repo,gn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Mb(n,e){const t=Sb[e];(!t||t[n.key]!==n)&&ea(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Pf(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ea("Cannot call "+e+" on a deleted database.")}}function P_(){QC.IS_TRANSPORT_INITIALIZED&&gi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Rb(){P_(),Nl.forceDisallow()}function Pb(){P_(),Rl.forceDisallow(),Nl.forceAllow()}function Sx(n,e){UA(n,e)}const Ob={".sv":"timestamp"};class Mx{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Pl.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Pl.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Ax(n){T0(Jo.SDK_VERSION),(0,Jo._registerComponent)(new ju.wA("database",(e,{instanceIdentifier:t})=>Ab(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Jo.registerVersion)(Fy,"0.14.4",n),(0,Jo.registerVersion)(Fy,"0.14.4","esm2017")}();const Px=new Xo.Yd("@firebase/database-compat"),Fb=function(n){Px.warn("FIREBASE WARNING: "+n)};class Fx{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Fb("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Lx{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Gl{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Nf("DataSnapshot.child","path",e,!1),new Gl(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Nf("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Gl(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ks(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class vi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=vi.getCancelAndContextArgs_("Query.on",r,i),f=(E,T)=>{t.call(l.context,new Gl(this.database,E),T)};f.userCallback=t,f.context=l.context;const y=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return Qg(this._delegate,f,y),t;case"child_added":return _b(this._delegate,f,y),t;case"child_removed":return wb(this._delegate,f,y),t;case"child_changed":return Uw(this._delegate,f,y),t;case"child_moved":return vb(this._delegate,f,y),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Eb(this._delegate,e,i)}else Eb(this._delegate,e)}get(){return yb(this._delegate).then(e=>new Gl(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=vi.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,f=(E,T)=>{const M=new Gl(this.database,E);t&&t.call(a.context,M,T),l.resolve(M)};f.userCallback=t,f.context=a.context;const y=E=>{a.cancel&&a.cancel.call(a.context,E),l.reject(E)};switch(e){case"value":Qg(this._delegate,f,y,{onlyOnce:!0});break;case"child_added":_b(this._delegate,f,y,{onlyOnce:!0});break;case"child_removed":wb(this._delegate,f,y,{onlyOnce:!0});break;case"child_changed":Uw(this._delegate,f,y,{onlyOnce:!0});break;case"child_moved":vb(this._delegate,f,y,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new vi(this.database,bo(this._delegate,function mx(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Db(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new vi(this.database,bo(this._delegate,function _x(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new yx(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new vi(this.database,bo(this._delegate,function $w(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Nf("orderByChild","path",n,!1),new jw(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new vi(this.database,bo(this._delegate,function Hw(){return new bb}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new vi(this.database,bo(this._delegate,function wx(){return new vx}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new vi(this.database,bo(this._delegate,function Ex(){return new Gw}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new vi(this.database,bo(this._delegate,function Cb(n=null,e){return xf("startAt","key",e,!0),new Bw(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new vi(this.database,bo(this._delegate,function gx(n,e){return xf("startAfter","key",e,!0),new px(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new vi(this.database,bo(this._delegate,function dx(n,e){return xf("endAt","key",e,!0),new Ib(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new vi(this.database,bo(this._delegate,function fx(n,e){return xf("endBefore","key",e,!0),new hx(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new vi(this.database,bo(this._delegate,function Ff(n,e){return xf("equalTo","key",e,!0),new Tb(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof vi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ks(this.database,new Do(this._delegate._repo,this._delegate._path))}}class Ks extends vi{constructor(e,t){super(e,new qs(t._repo,t._path,new Tg,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ks(this.database,Cd(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ks(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Ks(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=Lw(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Fb("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_i("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=mb(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function cx(n,e,t){if(_i("setWithPriority",n._path),Xa("setWithPriority",e,n._path,!1),ZD("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return Id(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function gb(n){return _i("remove",n._path),Lw(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function xx(n,e,t){var r;if(n=(0,k.m9)(n),_i("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new k.BH,f=Qg(n,()=>{});return function sx(n,e,t,r,i,a){Of(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:VC(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=S_(n,e,void 0);l.currentInputSnapshot=f;const y=l.update(f.val());if(void 0===y)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{eu("transaction failed: Data returned ",y,l.path),l.status=0;const E=w_(n.transactionQueueTree_,e),T=vd(E)||[];let M;T.push(l),bw(E,T),"object"==typeof y&&null!==y&&(0,k.r3)(y,".priority")?(M=(0,k.DV)(y,".priority"),(0,k.hu)(Hg(M),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):M=(Ug(n.serverSyncTree_,e)||xt.EMPTY_NODE).getPriority().val();const P=Rf(n),j=Mn(y,M),Z=Iw(j,f,P);l.currentOutputSnapshotRaw=j,l.currentOutputSnapshotResolved=Z,l.currentWriteId=T_(n);const me=yd(n.serverSyncTree_,e,Z,l.currentWriteId,l.applyLocally);Ws(n.eventQueue_,e,me),qg(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,E,T)=>{let M=null;y?a.reject(y):(M=new ia(T,new Do(n._repo,n._path),sn),a.resolve(new Mx(E,M)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Lx(a.committed,new Gl(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function Vw(n,e){n=(0,k.m9)(n),_i("setPriority",n._path),ZD("setPriority",e,!1);const t=new k.BH;return Id(n._repo,Xn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function lx(n,e){n=(0,k.m9)(n),_i("push",n._path),Xa("push",e,n._path,!0);const t=XD(n._repo),r=Kg(t),i=Cd(n,r),a=Cd(n,r);let l;return l=null!=e?Lw(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Ks(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Ks(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return _i("Reference.onDisconnect",this._delegate._path),new Fx(new fb(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Wu{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Rb,forceLongPolling:Pb}}useEmulator(e,t,r={}){!function Ww(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ea("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ea('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new rf(rf.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new rf(l)}!function zw(n,e,t,r){n.repoInfo_=new P0(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Ks){const t=Fw(this._delegate,e.toString());return new Ks(this,t)}{const t=pb(this._delegate,e);return new Ks(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=Fw(this._delegate,e);return new Ks(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function bx(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),Pf(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function Tx(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function Wg(n){n.persistentConnection_&&n.persistentConnection_.resume(Xi)}(n._repo)}(this._delegate)}}Wu.ServerValue={TIMESTAMP:function Rk(){return Ob}(),increment:n=>function kb(n){return{".sv":{increment:n}}}(n)};var Vb=Object.freeze({__proto__:null,initStandalone:function Lb({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){T0(t);const l=new ju.zt("auth-internal",new ju.H0("database-standalone"));return l.setComponent(new ju.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Wu(Ab(n,l,void 0,e,a),n),namespace:i}}});const Ub=Wu.ServerValue;function Hb(n){return null==n}function Vx(n){return"function"==typeof n.set}function Ux(n,e){return Vx(e)?e:n.ref(e)}function qw(n,e){if(function jb(n){return"string"==typeof n}(n))return e.stringCase();if(Vx(n))return e.firebaseCase();if(function $b(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Jg(n,e,t="on",r=OC.z){return new Vr.y(i=>{let a=null;return a=n[t](e,(l,f)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,Ct.U)(i=>{const{snapshot:a,prevKey:l}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:l,key:f}}),(0,s0.B)())}function Gb(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Xg(n,e){const{payload:t,prevKey:r,key:i}=e,a=Gb(n,i),l=function jx(n,e){if(Hb(e))return 0;{const t=Gb(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(y=>{const E={payload:y,type:"value",prevKey:f,key:y.key};return f=y.key,n=[...n,E],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,f),n}return n;default:return n}}function zb(n){return(Hb(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function O_(n,e,t){return function Bx(n,e,t){return Jg(n,"value","once",t).pipe((0,Jn.w)(r=>{const i=[(0,mt.of)(r)];return e.forEach(a=>i.push(Jg(n,a,"on",t))),(0,Uu.T)(...i).pipe(Qh(Xg,[]))}),(0,D0.x)())}(n,e=zb(e),t)}function oa(n,e,t){const r=(e=zb(e)).map(i=>Jg(n,i,"on",t));return(0,Uu.T)(...r)}function Wb(n,e){return function(r,i){return qw(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Hx(n){return function(t){return t?qw(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function tm(n,e){return function(){return Jg(n,"value","on",e)}}!function Bb(n){n.INTERNAL.registerComponent(new ju.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Wu(i,r)},"PUBLIC").setServiceProps({Reference:Ks,Query:vi,Database:Wu,DataSnapshot:Gl,enableLogging:Sx,INTERNAL:Vb,ServerValue:Ub}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(LA.Z);const zx=new m.OlP("angularfire2.realtimeDatabaseURL"),Wx=new m.OlP("angularfire2.database.use-emulator");let Zw=(()=>{class n{constructor(t,r,i,a,l,f,y,E,T,M,P,j,Z,me,xe){this.schedulers=f;const nt=y,gt=(0,dr.on)(t,l,r);E&&ud(gt,l,T,P,j,Z,M,me),this.database=(0,dr.cc)(`${gt.name}.database.${i}`,"AngularFireDatabase",gt.name,()=>{const ct=l.runOutsideAngular(()=>gt.database(i||void 0));return nt&&ct.useEmulator(...nt),ct},[nt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Ux(this.database,t));let a=i;return r&&(a=r(i)),function Gx(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Wb(r,"update"),set:Wb(r,"set"),push:i=>r.push(i),remove:Hx(r),snapshotChanges:i=>O_(n,i,t).pipe(An.iC),stateChanges:i=>oa(n,i,t).pipe(An.iC),auditTrail:i=>function $x(n,e,t){return function em(n,e,t){return function Kw(n,e){return Jg(n,"value","on",e).pipe((0,Ct.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function b0(...n){const e=(0,ao.jO)(n);return(0,Qi.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),f=!1;for(let y=0;y<i;y++)(0,Bo.Xf)(n[y]).subscribe((0,Er.x)(r,E=>{a[y]=E,!f&&!l[y]&&(l[y]=!0,(f=l.every(yy.y))&&(l=null))},kC.Z));t.subscribe((0,Er.x)(r,y=>{if(f){const E=[y,...a];r.next(e?e(...E):E)}}))})}(e),(0,Ct.U)(([i,a])=>{const l=i.lastKeyToLoad,f=a.map(y=>y.key);return{actions:a,lastKeyToLoad:l,loadedKeys:f}}),function yg(n){return(0,Qi.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Er.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Ct.U)(i=>i.actions))}(n,oa(n,e).pipe(Qh((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(An.iC),valueChanges:(i,a)=>O_(n,i,t).pipe((0,Ct.U)(f=>f.map(y=>a&&a.idField?Object.assign(Object.assign({},y.payload.val()),{[a.idField]:y.key}):y.payload.val())),An.iC)}}(a,this)}object(t){return function qb(n,e){return{query:n,snapshotChanges:()=>tm(n,e.schedulers.outsideAngular)().pipe(An.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>tm(n,e.schedulers.outsideAngular)().pipe(An.iC,(0,Ct.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Ux(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(dr.Dh),m.LFG(dr.xv,8),m.LFG(zx,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(An.HU),m.LFG(Wx,8),m.LFG(Yh,8),m.LFG(ky,8),m.LFG(RC,8),m.LFG(I0,8),m.LFG(Zh,8),m.LFG(C0,8),m.LFG(Al,8),m.LFG(mg,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qx=(()=>{class n{constructor(){E0.Z.registerVersion("angularfire",An.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Zw]}),n})();const Kx_firebaseConfig={apiKey:"AIzaSyD5ai-7KdxVfWlV7FDgjSOkuqXqMYMUJ9M",authDomain:"fount-4147d.firebaseapp.com",projectId:"fount-4147d",storageBucket:"fount-4147d.appspot.com",messagingSenderId:"783652760634",appId:"1:783652760634:web:3bbec2d516bb5514a1d903",measurementId:"G-R1PH5HH7Y1"};var aa=O(5619),Zx=O(7103);function k_(...n){const e=(0,ao.yG)(n),t=(0,ao.jO)(n),{args:r,keys:i}=Pc(n);if(0===r.length)return(0,On.D)([],e);const a=new Vr.y(function F_(n,e,t=yy.y){return r=>{Zb(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let y=0;y<i;y++)Zb(e,()=>{const E=(0,On.D)(n[y],e);let T=!1;E.subscribe((0,Er.x)(r,M=>{a[y]=M,T||(T=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Oc(i,l):yy.y));return t?a.pipe(Nr(t)):a}function Zb(n,e,t){n?(0,Zx.f)(t,n,e):e()}var nm=O(7537);function L_(...n){return function Yb(){return(0,nm.J)(1)}()((0,On.D)(n,(0,ao.yG)(n)))}function V_(n){return new Vr.y(e=>{(0,Bo.Xf)(n()).subscribe(e)})}var Qb=O(8407);function rm(n,e){const t=(0,rd.m)(n)?n:()=>n,r=i=>i.error(t());return new Vr.y(e?i=>e.schedule(r,0,i):r)}var Yw=O(7394);function U_(){return(0,Qi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Er.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Jb extends Vr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Qi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Yw.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Er.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Yw.w0.EMPTY)}return e}refCount(){return U_()(this)}}function B_(...n){const e=(0,ao.yG)(n);return(0,Qi.e)((t,r)=>{(e?L_(n,t,e):L_(n,t)).subscribe(r)})}var wi=O(1631);function Dd(n,e){return(0,rd.m)(e)?(0,wi.z)(n,e,1):(0,wi.z)(n,1)}var Oi=O(9397);function qu(n){return(0,Qi.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Er.x)(t,void 0,void 0,l=>{a=(0,Bo.Xf)(n(l,qu(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function im(n){return n<=0?()=>Qo.E:(0,Qi.e)((e,t)=>{let r=[];e.subscribe((0,Er.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Qw(n){return(0,Qi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Gt="primary",Lf=Symbol("RouteTitle");class Jw{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function bd(n){return new Jw(n)}function Jx(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ua(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!eT(n[i],e[i]))return!1;return!0}function eT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Xw(n){return n.length>0?n[n.length-1]:null}function Ku(n){return function Kb(n){return!!n&&(n instanceof Vr.y||(0,rd.m)(n.lift)&&(0,rd.m)(n.subscribe))}(n)?n:(0,m.QGY)(n)?(0,On.D)(Promise.resolve(n)):(0,mt.of)(n)}const Xx={exact:function Td(n,e,t){if(!Yu(n.segments,e.segments)||!nE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Td(n.children[r],e.children[r],t))return!1;return!0},subset:tT},eE={exact:function es(n,e){return ua(n,e)},subset:function eN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>eT(n[t],e[t]))},ignored:()=>!0};function tE(n,e,t){return Xx[t.paths](n.root,e.root,t.matrixParams)&&eE[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function tT(n,e,t){return tN(n,e,e.segments,t)}function tN(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Yu(i,t)||e.hasChildren()||!nE(i,t,r))}if(n.segments.length===t.length){if(!Yu(n.segments,t)||!nE(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!tT(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Yu(n.segments,i)&&nE(n.segments,i,r)&&n.children[Gt])&&tN(n.children[Gt],e,a,r)}}function nE(n,e,t){return e.every((r,i)=>eE[t](n[i].parameters,r.parameters))}class Sd{constructor(e=new wn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bd(this.queryParams)),this._queryParamMap}toString(){return iN.serialize(this)}}class wn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return j_(this)}}class Zu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=bd(this.parameters)),this._parameterMap}toString(){return nT(this)}}function Yu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Vf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new rE},providedIn:"root"}),n})();class rE{parse(e){const t=new lN(e);return new Sd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ad(e.root,!0)}`,r=function Uf(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${$_(t)}=${$_(i)}`).join("&"):`${$_(t)}=${$_(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function H_(n){return encodeURI(n)}(e.fragment)}`:""}`}}const iN=new rE;function j_(n){return n.segments.map(e=>nT(e)).join("/")}function Ad(n,e){if(!n.hasChildren())return j_(n);if(e){const t=n.children[Gt]?Ad(n.children[Gt],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==Gt&&r.push(`${i}:${Ad(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function rN(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Gt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Gt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Gt?[Ad(n.children[Gt],!1)]:[`${i}:${Ad(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${j_(n)}/${t[0]}`:`${j_(n)}/(${t.join("//")})`}}function iE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $_(n){return iE(n).replace(/%3B/gi,";")}function sm(n){return iE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sE(n){return decodeURIComponent(n)}function oE(n){return sE(n.replace(/\+/g,"%20"))}function nT(n){return`${sm(n.path)}${function rT(n){return Object.keys(n).map(e=>`;${sm(e)}=${sm(n[e])}`).join("")}(n.parameters)}`}const sN=/^[^\/()?;#]+/;function G_(n){const e=n.match(sN);return e?e[0]:""}const aE=/^[^\/()?;=#]+/,oN=/^[^=?&#]+/,aN=/^[^&#]+/;class lN{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wn([],{}):new wn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Gt]=new wn(e,t)),r}parseSegment(){const e=G_(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(e),new Zu(sE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Ok(n){const e=n.match(aE);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=G_(this.remaining);i&&(r=i,this.capture(r))}e[sE(t)]=sE(r)}parseQueryParam(e){const t=function kk(n){const e=n.match(oN);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function uN(n){const e=n.match(aN);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=oE(t),a=oE(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=G_(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new m.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Gt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Gt]:new wn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,!1)}}function uE(n){return n.segments.length>0?new wn([],{[Gt]:n}):n}function lE(n){const e={};for(const r of Object.keys(n.children)){const a=lE(n.children[r]);if(r===Gt&&0===a.segments.length&&a.hasChildren())for(const[l,f]of Object.entries(a.children))e[l]=f;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function cN(n){if(1===n.numberOfChildren&&n.children[Gt]){const e=n.children[Gt];return new wn(n.segments.concat(e.segments),e.children)}return n}(new wn(n.segments,e))}function zl(n){return n instanceof Sd}function sT(n){let e;const i=uE(function t(a){const l={};for(const y of a.children){const E=t(y);l[y.outlet]=E}const f=new wn(a.url,l);return a===n&&(e=f),f}(n.root));return e??i}function oT(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return z_(i,i,i,t,r);const a=function aT(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new dE(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Object.entries(a.outlets).forEach(([y,E])=>{f[y]="string"==typeof E?E.split("/"):E}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new dE(t,e,r)}(e);if(a.toRoot())return z_(i,i,new wn([],{}),t,r);const l=function dN(n,e,t){if(n.isAbsolute)return new W_(e,!0,0);if(!t)return new W_(e,!1,NaN);if(null===t.parent)return new W_(t,!0,0);const r=om(n.commands[0])?0:1;return function Fk(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new m.vHH(4005,!1);i=r.segments.length}return new W_(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),f=l.processChildren?q_(l.segmentGroup,l.index,a.commands):hN(l.segmentGroup,l.index,a.commands);return z_(i,l.segmentGroup,f,t,r)}function om(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function am(n){return"object"==typeof n&&null!=n&&n.outlets}function z_(n,e,t,r,i){let l,a={};r&&Object.entries(r).forEach(([y,E])=>{a[y]=Array.isArray(E)?E.map(T=>`${T}`):`${E}`}),l=n===e?t:cE(n,e,t);const f=uE(lE(l));return new Sd(f,a,i)}function cE(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:cE(a,e,t)}),new wn(n.segments,r)}class dE{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&om(r[0]))throw new m.vHH(4003,!1);const i=r.find(am);if(i&&i!==Xw(r))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class W_{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function hN(n,e,t){if(n||(n=new wn([],{})),0===n.segments.length&&n.hasChildren())return q_(n,e,t);const r=function Lk(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(am(f))break;const y=`${f}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&E&&"object"==typeof E&&void 0===E.outlets){if(!pN(y,E,l))return a;r+=2}else{if(!pN(y,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new wn(n.segments.slice(0,r.pathIndex),{});return a.children[Gt]=new wn(n.segments.slice(r.pathIndex),n.children),q_(a,0,i)}return r.match&&0===i.length?new wn(n.segments,{}):r.match&&!n.hasChildren()?lT(n,e,t):r.match?q_(n,0,i):lT(n,e,t)}function q_(n,e,t){if(0===t.length)return new wn(n.segments,{});{const r=function uT(n){return am(n[0])?n[0].outlets:{[Gt]:n}}(t),i={};if(!r[Gt]&&n.children[Gt]&&1===n.numberOfChildren&&0===n.children[Gt].segments.length){const a=q_(n.children[Gt],e,t);return new wn(n.segments,a.children)}return Object.entries(r).forEach(([a,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(i[a]=hN(n.children[a],e,l))}),Object.entries(n.children).forEach(([a,l])=>{void 0===r[a]&&(i[a]=l)}),new wn(n.segments,i)}}function lT(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(am(a)){const y=Vk(a.outlets);return new wn(r,y)}if(0===i&&om(t[0])){r.push(new Zu(n.segments[e].path,fN(t[0]))),i++;continue}const l=am(a)?a.outlets[Gt]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&om(f)?(r.push(new Zu(l,fN(f))),i+=2):(r.push(new Zu(l,{})),i++)}return new wn(r,{})}function Vk(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=lT(new wn([],{}),0,r))}),e}function fN(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function pN(n,e,t){return n==t.path&&ua(e,t.parameters)}const K_="imperative";class Qu{constructor(e,t){this.id=e,this.url=t}}class Z_ extends Qu{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class la extends Qu{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class um extends Qu{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class lm extends Qu{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Bf extends Qu{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gN extends Qu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uk extends Qu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bk extends Qu{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mN extends Qu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cT extends Qu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yN{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _N{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class vN{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jk{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wN{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dT{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hE{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ca{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new jf,this.attachRef=null}}let jf=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ca,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hT{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=fT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=fT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ei(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ei(e,this._root).map(t=>t.value)}}function fT(n,e){if(n===e.value)return e;for(const t of e.children){const r=fT(n,t);if(r)return r}return null}function Ei(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ei(n,t);if(r.length)return r.unshift(e),r}return[]}class Ju{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Wl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class pT extends hT{constructor(e,t){super(e),this.snapshot=t,Y_(this,e)}toString(){return this.snapshot.toString()}}function gT(n,e){const t=function fE(n,e){const l=new cm([],{},{},"",{},Gt,e,null,{});return new gE("",new Ju(l,[]))}(0,e),r=new aa.X([new Zu("",{})]),i=new aa.X({}),a=new aa.X({}),l=new aa.X({}),f=new aa.X(""),y=new Md(r,i,l,f,a,Gt,e,t.root);return y.snapshot=t.root,new pT(new Ju(y,[]),t)}class Md{constructor(e,t,r,i,a,l,f,y){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=l,this.component=f,this._futureSnapshot=y,this.title=this.dataSubject?.pipe((0,Ct.U)(E=>E[Lf]))??(0,mt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(e=>bd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(e=>bd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pE(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function EN(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class cm{get title(){return this.data?.[Lf]}constructor(e,t,r,i,a,l,f,y,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=y,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gE extends hT{constructor(e,t){super(t),this.url=e,Y_(this,t)}toString(){return mE(this._root)}}function Y_(n,e){e.value._routerState=n,e.children.forEach(t=>Y_(n,t))}function mE(n){const e=n.children.length>0?` { ${n.children.map(mE).join(", ")} } `:"";return`${n.value}${e}`}function yE(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ua(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ua(e.params,t.params)||n.paramsSubject.next(t.params),function Xb(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ua(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ua(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Q_(n,e){const t=ua(n.params,e.params)&&function nN(n,e){return Yu(n,e)&&n.every((t,r)=>ua(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Q_(n.parent,e.parent))}let _E=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Gt,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.parentContexts=(0,m.f3M)(jf),this.location=(0,m.f3M)(m.s_b),this.changeDetector=(0,m.f3M)(m.sBO),this.environmentInjector=(0,m.f3M)(m.lqb),this.inputBinder=(0,m.f3M)(da,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,!1);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,y=new vE(t,f,i.injector);this.activated=i.createComponent(l,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[m.TTD]}),n})();class vE{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Md?this.route:e===jf?this.childContexts:this.parent.get(e,t)}}const da=new m.OlP("");let wE=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=k_([r.queryParams,r.params,r.data]).pipe((0,Jn.w)(([a,l,f],y)=>(f={...a,...l,...f},0===y?(0,mt.of)(f):Promise.resolve(f)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,m.qFp)(r.component);if(l)for(const{templateName:f}of l.inputs)t.activatedComponentRef.setInput(f,a[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function xd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function IN(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xd(n,r,i);return xd(n,r)})}(n,e,t);return new Ju(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>xd(n,f)),l}}const r=function $k(n){return new Md(new aa.X(n.url),new aa.X(n.params),new aa.X(n.queryParams),new aa.X(n.fragment),new aa.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>xd(n,a));return new Ju(r,i)}}const J_="ngNavigationCancelingError";function mT(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=zl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=yT(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function yT(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[J_]=!0,r.cancellationCode=e,t&&(r.url=t),r}function _T(n){return vT(n)&&zl(n.url)}function vT(n){return n&&n[J_]}let IE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[_E],encapsulation:2}),n})();function X_(n){const e=n.children&&n.children.map(X_),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Gt&&(t.component=IE),t}function To(n){return n.outlet||Gt}function ql(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class AN{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),yE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Wl(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Wl(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Wl(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Wl(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new dT(a.value.snapshot))}),e.children.length&&this.forwardEvent(new jk(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(yE(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),yE(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=ql(i.snapshot);l.attachRef=null,l.route=i,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class IT{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class DE{constructor(e,t){this.component=e,this.route=t}}function CT(n,e,t){const r=n._root;return ev(r,e?e._root:null,t,[r.value])}function Hf(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function ev(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Wl(e);return n.children.forEach(l=>{(function zk(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const y=function Wk(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Yu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Yu(n.url,e.url)||!ua(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Q_(n,e)||!ua(n.queryParams,e.queryParams);default:return!Q_(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new IT(r)):(a.data=l.data,a._resolvedData=l._resolvedData),ev(n,e,a.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new DE(f.outlet.component,l))}else l&&Gf(e,f,i),i.canActivateChecks.push(new IT(r)),ev(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Object.entries(a).forEach(([l,f])=>Gf(f,t.getContext(l),i)),i}function Gf(n,e,t){const r=Wl(n),i=n.value;Object.entries(r).forEach(([a,l])=>{Gf(l,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new DE(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function dm(n){return"function"==typeof n}function hm(n){return n instanceof my||"EmptyError"===n?.name}const tv=Symbol("INITIAL_VALUE");function zf(){return(0,Jn.w)(n=>k_(n.map(e=>e.pipe(bl(1),B_(tv)))).pipe((0,Ct.U)(e=>{for(const t of e)if(!0!==t){if(t===tv)return tv;if(!1===t||t instanceof Sd)return t}return!0}),vo(e=>e!==tv),bl(1)))}function ON(n){return(0,Qb.z)((0,Oi.b)(e=>{if(zl(e))throw mT(0,e)}),(0,Ct.U)(e=>!0===e))}class ME{constructor(e){this.segmentGroup=e||null}}class xE{constructor(e){this.urlTree=e}}function Wf(n){return rm(new ME(n))}function TT(n){return rm(new xE(n))}class ST{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new m.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,mt.of)(r);if(i.numberOfChildren>1||!i.children[Gt])return rm(new m.vHH(4e3,!1));i=i.children[Gt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Sd(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const f=a.substring(1);r[i]=t[f]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Object.entries(t.children).forEach(([f,y])=>{l[f]=this.createSegmentGroup(e,y,r,i)}),new wn(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new m.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const rv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function AT(n,e,t,r,i){const a=NE(n,e,t);return a.matched?(r=function Hk(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Qk(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,mt.of)(!0);const a=i.map(l=>{const f=Hf(l,n);return Ku(function Yk(n){return n&&dm(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))});return(0,mt.of)(a).pipe(zf(),ON())}(r,e,t).pipe((0,Ct.U)(l=>!0===l?a:{...rv}))):(0,mt.of)(a)}function NE(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...rv}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Jx)(t,n,e);if(!i)return{...rv};const a={};Object.entries(i.posParams??{}).forEach(([f,y])=>{a[f]=y.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function MT(n,e,t,r){return t.length>0&&function Jk(n,e,t){return t.some(r=>qf(n,e,r)&&To(r)!==Gt)}(n,t,r)?{segmentGroup:new wn(e,RE(r,new wn(t,n.children))),slicedSegments:[]}:0===t.length&&function NT(n,e,t){return t.some(r=>qf(n,e,r))}(n,t,r)?{segmentGroup:new wn(n.segments,xT(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new wn(n.segments,n.children),slicedSegments:t}}function xT(n,e,t,r,i){const a={};for(const l of r)if(qf(n,t,l)&&!i[To(l)]){const f=new wn([],{});a[To(l)]=f}return{...i,...a}}function RE(n,e){const t={};t[Gt]=e;for(const r of n)if(""===r.path&&To(r)!==Gt){const i=new wn([],{});t[To(r)]=i}return t}function qf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class e1{constructor(e,t,r,i,a,l,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=l,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new ST(this.urlSerializer,this.urlTree)}noMatchError(e){return new m.vHH(4002,!1)}recognize(){const e=MT(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Gt).pipe(qu(t=>{if(t instanceof xE)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof ME?this.noMatchError(t):t}),(0,Ct.U)(t=>{const r=new cm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,{}),i=new Ju(r,t),a=new gE("",i),l=function iT(n,e,t=null,r=null){return oT(sT(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(a._root),{state:a,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Gt).pipe(qu(r=>{throw r instanceof ME?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=pE(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,On.D)(i).pipe(Dd(a=>{const l=r.children[a],f=function $f(n,e){const t=n.filter(r=>To(r)===e);return t.push(...n.filter(r=>To(r)!==e)),t}(t,a);return this.processSegmentGroup(e,f,l,a)}),Qh((a,l)=>(a.push(...l),a)),Bu(null),function Yx(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vo((i,a)=>n(i,a,r)):yy.y,im(1),t?Bu(e):oC(()=>new my))}(),(0,wi.z)(a=>{if(null===a)return Wf(r);const l=RT(a);return function UN(n){n.sort((e,t)=>e.value.outlet===Gt?-1:t.value.outlet===Gt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,mt.of)(l)}))}processSegment(e,t,r,i,a,l){return(0,On.D)(t).pipe(Dd(f=>this.processSegmentAgainstRoute(f._injector??e,t,f,r,i,a,l).pipe(qu(y=>{if(y instanceof ME)return(0,mt.of)(null);throw y}))),Tl(f=>!!f),qu(f=>{if(hm(f))return function VN(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?(0,mt.of)([]):Wf(r);throw f}))}processSegmentAgainstRoute(e,t,r,i,a,l,f){return function LN(n,e,t,r){return!!(To(n)===r||r!==Gt&&qf(e,t,n))&&("**"===n.path||NE(e,n,t).matched)}(r,i,a,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,l,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,l):Wf(i):Wf(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?TT(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,wi.z)(l=>{const f=new wn(l,{});return this.processSegment(e,t,f,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:y,remainingSegments:E,positionalParamSegments:T}=NE(t,i,a);if(!f)return Wf(t);const M=this.applyRedirects.applyRedirectCommands(y,i.redirectTo,T);return i.redirectTo.startsWith("/")?TT(M):this.applyRedirects.lineralizeSegments(i,M).pipe((0,wi.z)(P=>this.processSegment(e,r,t,P.concat(E),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,l){let f;if("**"===r.path){const y=i.length>0?Xw(i).parameters:{},E=new cm(i,y,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,PE(r),To(r),r.component??r._loadedComponent??null,r,OE(r));f=(0,mt.of)({snapshot:E,consumedSegments:[],remainingSegments:[]}),t.children={}}else f=AT(t,r,i,e).pipe((0,Ct.U)(({matched:y,consumedSegments:E,remainingSegments:T,parameters:M})=>y?{snapshot:new cm(E,M,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,PE(r),To(r),r.component??r._loadedComponent??null,r,OE(r)),consumedSegments:E,remainingSegments:T}:null));return f.pipe((0,Jn.w)(y=>null===y?Wf(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Jn.w)(({routes:E})=>{const T=r._loadedInjector??e,{snapshot:M,consumedSegments:P,remainingSegments:j}=y,{segmentGroup:Z,slicedSegments:me}=MT(t,P,j,E);if(0===me.length&&Z.hasChildren())return this.processChildren(T,E,Z).pipe((0,Ct.U)(nt=>null===nt?null:[new Ju(M,nt)]));if(0===E.length&&0===me.length)return(0,mt.of)([new Ju(M,[])]);const xe=To(r)===a;return this.processSegment(T,E,Z,me,xe?Gt:a,!0).pipe((0,Ct.U)(nt=>[new Ju(M,nt)]))}))))}getChildConfig(e,t,r){return t.children?(0,mt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,mt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function nv(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,mt.of)(!0);const a=i.map(l=>{const f=Hf(l,n);return Ku(function NN(n){return n&&dm(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))});return(0,mt.of)(a).pipe(zf(),ON())}(e,t,r).pipe((0,wi.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Oi.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function FN(n){return rm(yT(!1,3))}())):(0,mt.of)({routes:[],injector:e})}}function BN(n){const e=n.value.routeConfig;return e&&""===e.path}function RT(n){const e=[],t=new Set;for(const r of n){if(!BN(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=RT(r.children);e.push(new Ju(r.value,i))}return e.filter(r=>!t.has(r))}function PE(n){return n.data||{}}function OE(n){return n.resolve||{}}function iv(n){return"string"==typeof n.title||null===n.title}function FE(n){return(0,Jn.w)(e=>{const t=n(e);return t?(0,On.D)(t).pipe((0,Ct.U)(()=>e)):(0,mt.of)(e)})}const Kf=new m.OlP("ROUTES");let sv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,m.f3M)(m.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,mt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ku(t.loadComponent()).pipe((0,Ct.U)(HN),(0,Oi.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Qw(()=>{this.componentLoaders.delete(t)})),i=new Jb(r,()=>new Yo.x).pipe(U_());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,mt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Ct.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,E;return Array.isArray(f)?E=f:(y=f.create(t).injector,E=y.get(Kf,[],m.XFs.Self|m.XFs.Optional).flat()),{routes:E.map(X_),injector:y}}),Qw(()=>{this.childrenLoaders.delete(r)})),l=new Jb(a,()=>new Yo.x).pipe(U_());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Ku(t()).pipe((0,Ct.U)(HN),(0,wi.z)(r=>r instanceof m.YKP||Array.isArray(r)?(0,mt.of)(r):(0,On.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function HN(n){return function kT(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let ov=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Yo.x,this.configLoader=(0,m.f3M)(sv),this.environmentInjector=(0,m.f3M)(m.lqb),this.urlSerializer=(0,m.f3M)(Vf),this.rootContexts=(0,m.f3M)(jf),this.inputBindingEnabled=null!==(0,m.f3M)(da,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,mt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new _N(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new yN(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new aa.X({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:K_,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vo(r=>0!==r.id),(0,Ct.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),(0,Jn.w)(r=>{let i=!1,a=!1;return(0,mt.of)(r).pipe((0,Oi.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Jn.w)(l=>{const f=t.browserUrlTree.toString(),y=!t.navigated||l.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(!y&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const T="";return this.events.next(new lm(l.id,t.serializeUrl(r.rawUrl),T,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Qo.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return fm(l.source)&&(t.browserUrlTree=l.extractedUrl),(0,mt.of)(l).pipe((0,Jn.w)(T=>{const M=this.transitions?.getValue();return this.events.next(new Z_(T.id,this.urlSerializer.serialize(T.extractedUrl),T.source,T.restoredState)),M!==this.transitions?.getValue()?Qo.E:Promise.resolve(T)}),function n1(n,e,t,r,i,a){return(0,wi.z)(l=>function Xk(n,e,t,r,i,a,l="emptyOnly"){return new e1(n,e,t,r,i,l,a).recognize()}(n,e,t,r,l.extractedUrl,i,a).pipe((0,Ct.U)(({state:f,tree:y})=>({...l,targetSnapshot:f,urlAfterRedirects:y}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Oi.b)(T=>{if(r.targetSnapshot=T.targetSnapshot,r.urlAfterRedirects=T.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!T.extras.skipLocationChange){const P=t.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);t.setBrowserUrl(P,T)}t.browserUrlTree=T.urlAfterRedirects}const M=new gN(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(M)}));if(y&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:T,extractedUrl:M,source:P,restoredState:j,extras:Z}=l,me=new Z_(T,this.urlSerializer.serialize(M),P,j);this.events.next(me);const xe=gT(0,this.rootComponentType).snapshot;return r={...l,targetSnapshot:xe,urlAfterRedirects:M,extras:{...Z,skipLocationChange:!1,replaceUrl:!1}},(0,mt.of)(r)}{const T="";return this.events.next(new lm(l.id,t.serializeUrl(r.extractedUrl),T,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Qo.E}}),(0,Oi.b)(l=>{const f=new Uk(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),(0,Ct.U)(l=>r={...l,guards:CT(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function DT(n,e){return(0,wi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?(0,mt.of)({...t,guardsResult:!0}):function Nd(n,e,t,r){return(0,On.D)(n).pipe((0,wi.z)(i=>function AE(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,mt.of)(!0);const l=a.map(f=>{const y=ql(e)??i,E=Hf(f,y);return Ku(function Zk(n){return n&&dm(n.canDeactivate)}(E)?E.canDeactivate(n,e,t,r):y.runInContext(()=>E(n,e,t,r))).pipe(Tl())});return(0,mt.of)(l).pipe(zf())}(i.component,i.route,t,e,r)),Tl(i=>!0!==i,!0))}(l,r,i,n).pipe((0,wi.z)(f=>f&&function xN(n){return"boolean"==typeof n}(f)?function bT(n,e,t,r){return(0,On.D)(e).pipe(Dd(i=>L_(function TE(n,e){return null!==n&&e&&e(new vN(n)),(0,mt.of)(!0)}(i.route.parent,r),function bE(n,e){return null!==n&&e&&e(new wN(n)),(0,mt.of)(!0)}(i.route,r),function SE(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function MN(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>V_(()=>{const f=l.guards.map(y=>{const E=ql(l.node)??t,T=Hf(y,E);return Ku(function Kk(n){return n&&dm(n.canActivateChild)}(T)?T.canActivateChild(r,n):E.runInContext(()=>T(r,n))).pipe(Tl())});return(0,mt.of)(f).pipe(zf())}));return(0,mt.of)(a).pipe(zf())}(n,i.path,t),function PN(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,mt.of)(!0);const i=r.map(a=>V_(()=>{const l=ql(e)??t,f=Hf(a,l);return Ku(function qk(n){return n&&dm(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(Tl())}));return(0,mt.of)(i).pipe(zf())}(n,i.route,t))),Tl(i=>!0!==i,!0))}(r,a,n,e):(0,mt.of)(f)),(0,Ct.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Oi.b)(l=>{if(r.guardsResult=l.guardsResult,zl(l.guardsResult))throw mT(0,l.guardsResult);const f=new Bk(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),vo(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),FE(l=>{if(l.guards.canActivateChecks.length)return(0,mt.of)(l).pipe((0,Oi.b)(f=>{const y=new mN(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(y)}),(0,Jn.w)(f=>{let y=!1;return(0,mt.of)(f).pipe(function jN(n,e){return(0,wi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,mt.of)(t);let a=0;return(0,On.D)(i).pipe(Dd(l=>function kE(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!iv(i)&&(a[Lf]=i.title),function PT(n,e,t,r){const i=function OT(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,mt.of)({});const a={};return(0,On.D)(i).pipe((0,wi.z)(l=>function $N(n,e,t,r){const i=ql(e)??r,a=Hf(n,i);return Ku(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(Tl(),(0,Oi.b)(f=>{a[l]=f}))),im(1),function Qx(n){return(0,Ct.U)(()=>n)}(a),qu(l=>hm(l)?Qo.E:rm(l)))}(a,n,e,r).pipe((0,Ct.U)(l=>(n._resolvedData=l,n.data=pE(n,t).resolve,i&&iv(i)&&(n.data[Lf]=i.title),null)))}(l.route,r,n,e)),(0,Oi.b)(()=>a++),im(1),(0,wi.z)(l=>a===i.length?(0,mt.of)(t):Qo.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Oi.b)({next:()=>y=!0,complete:()=>{y||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,Oi.b)(f=>{const y=new cT(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(y)}))}),FE(l=>{const f=y=>{const E=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,Oi.b)(T=>{y.component=T}),(0,Ct.U)(()=>{})));for(const T of y.children)E.push(...f(T));return E};return k_(f(l.targetSnapshot.root)).pipe(Bu(),bl(1))}),FE(()=>this.afterPreactivation()),(0,Ct.U)(l=>{const f=function EE(n,e,t){const r=xd(n,e._root,t?t._root:void 0);return new pT(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:f}}),(0,Oi.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t,r)=>(0,Ct.U)(i=>(new AN(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),bl(1),(0,Oi.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new la(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),Qw(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),qu(l=>{if(a=!0,vT(l)){_T(l)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new um(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(f),_T(l)){const y=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),E={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||fm(r.source)};t.scheduleNavigation(y,K_,null,E,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new Bf(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(l))}catch(y){r.reject(y)}}return Qo.E}))}))}cancelNavigationTransition(t,r,i){const a=new um(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fm(n){return n!==K_}let GN=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Gt);return r}getResolvedTitleForRoute(t){return t.data[Lf]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(zN)},providedIn:"root"}),n})(),zN=(()=>{class n extends GN{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Cu))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),r1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(WN)},providedIn:"root"}),n})();class i1{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let WN=(()=>{class n extends i1{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LE=new m.OlP("",{providedIn:"root",factory:()=>({})});let s1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(o1)},providedIn:"root"}),n})(),o1=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var av=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(av||{});function qN(n,e){n.events.pipe(vo(t=>t instanceof la||t instanceof um||t instanceof Bf||t instanceof lm),(0,Ct.U)(t=>t instanceof la||t instanceof lm?av.COMPLETE:t instanceof um&&(0===t.code||1===t.code)?av.REDIRECTING:av.FAILED),vo(t=>t!==av.REDIRECTING),bl(1)).subscribe(()=>{e()})}function KN(n){throw n}function a1(n,e,t){return e.parse("/")}const u1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},l1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ts=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,m.f3M)(m.c2e),this.isNgZoneEnabled=!1,this.options=(0,m.f3M)(LE,{optional:!0})||{},this.pendingTasks=(0,m.f3M)(m.HDt),this.errorHandler=this.options.errorHandler||KN,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||a1,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,m.f3M)(s1),this.routeReuseStrategy=(0,m.f3M)(r1),this.titleStrategy=(0,m.f3M)(GN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,m.f3M)(Kf,{optional:!0})?.flat()??[],this.navigationTransitions=(0,m.f3M)(ov),this.urlSerializer=(0,m.f3M)(Vf),this.location=(0,m.f3M)(Ge),this.componentInputBindingEnabled=!!(0,m.f3M)(da,{optional:!0}),this.isNgZoneEnabled=(0,m.f3M)(m.R0b)instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Sd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gT(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),K_,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const y={...i};delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(a.state=y)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(X_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:y}=r,E=y?this.currentUrlTree.fragment:l;let M,T=null;switch(f){case"merge":T={...this.currentUrlTree.queryParams,...a};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=a||null}null!==T&&(T=this.removeEmptyProps(T));try{M=sT(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),M=this.currentUrlTree.root}return oT(M,t,T,E??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=zl(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,K_,null,r)}navigate(t,r={skipLocationChange:!1}){return function c1(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new m.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...u1}:!1===r?{...l1}:r,zl(t))return tE(this.currentUrlTree,t,i);const a=this.parseUrl(t);return tE(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,y,E;l?(f=l.resolve,y=l.reject,E=l.promise):E=new Promise((M,P)=>{f=M,y=P});const T=this.pendingTasks.add();return qN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(T))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:y,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(M=>Promise.reject(M))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-(this.browserPageId??this.currentPageId);0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pm=(()=>{class n{constructor(t,r,i,a,l,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.locationStrategy=f,this.href=null,this.commands=null,this.onChanges=new Yo.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const y=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===y||"area"===y,this.isAnchorElement?this.subscription=t.events.subscribe(E=>{E instanceof la&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,m.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ts),m.Y36(Md),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(Ue))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&m.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&m.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",m.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",m.VuI],replaceUrl:["replaceUrl","replaceUrl",m.VuI],routerLink:"routerLink"},standalone:!0,features:[m.Xq5,m.TTD]}),n})();class o{}let d=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(vo(t=>t instanceof la),Dd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,m.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(l,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,On.D)(i).pipe((0,nm.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,mt.of)(null);const a=i.pipe((0,wi.z)(l=>null===l?(0,mt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,On.D)([a,l]).pipe((0,nm.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ts),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(o),m.LFG(sv))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const p=new m.OlP("");let _=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Z_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof la?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof lm&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof hE&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new hE(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function A(n,e){return{\u0275kind:n,\u0275providers:e}}function Ee(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(ts),i=n.get(Ve);1===n.get(qe)&&r.initialNavigation(),n.get(Xt,null,m.XFs.Optional)?.setUpPreloading(),n.get(p,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const Ve=new m.OlP("",{factory:()=>new Yo.x}),qe=new m.OlP("",{providedIn:"root",factory:()=>1}),Xt=new m.OlP("");function on(n){return A(0,[{provide:Xt,useExisting:d},{provide:o,useExisting:n}])}const f1=new m.OlP("ROUTER_FORROOT_GUARD"),IU=[Ge,{provide:Vf,useClass:rE},ts,jf,{provide:Md,useFactory:function D(n){return n.routerState.root},deps:[ts]},sv,[]];function CU(){return new m.PXZ("Router",ts)}let p1=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[IU,[],{provide:Kf,multi:!0,useValue:t},{provide:f1,useFactory:SU,deps:[[ts,new m.FiY,new m.tp0]]},{provide:LE,useValue:r||{}},r?.useHash?{provide:Ue,useClass:Pe}:{provide:Ue,useClass:We},{provide:p,useFactory:()=>{const n=(0,m.f3M)(fs),e=(0,m.f3M)(m.R0b),t=(0,m.f3M)(LE),r=(0,m.f3M)(ov),i=(0,m.f3M)(Vf);return t.scrollOffset&&n.setOffset(t.scrollOffset),new _(i,r,n,e,t)}},r?.preloadingStrategy?on(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:CU},r?.initialNavigation?AU(r):[],r?.bindToComponentInputs?A(8,[wE,{provide:da,useExisting:wE}]).\u0275providers:[],[{provide:g1,useFactory:Ee},{provide:m.tb,multi:!0,useExisting:g1}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Kf,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(f1,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function SU(n){return"guarded"}function AU(n){return["disabled"===n.initialNavigation?A(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(ts);return()=>{e.setUpLocationChangeListener()}}},{provide:qe,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?A(2,[{provide:qe,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get(Oe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(ts),a=e.get(Ve);qN(i,()=>{r(!0)}),e.get(ov).afterPreactivation=()=>(r(!0),a.closed?(0,mt.of)(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const g1=new m.OlP("");let xU=(()=>{class n{constructor(t,r){this.afAuth=t,this.router=r,this.email="",this.password=""}login(){var t=this;return(0,ye.Z)(function*(){try{yield t.afAuth.signInWithEmailAndPassword(t.email,t.password),t.router.navigate(["/"])}catch(r){console.error("Error logging in:",r)}})()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Yh),m.Y36(ts))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-login"]],decls:12,vars:2,consts:[[1,"login-container"],[1,"login-form",3,"ngSubmit"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"h1"),m._uU(2,"Login"),m.qZA(),m.TgZ(3,"form",1),m.NdJ("ngSubmit",function(){return r.login()}),m.TgZ(4,"label",2),m._uU(5,"Email:"),m.qZA(),m.TgZ(6,"input",3),m.NdJ("ngModelChange",function(a){return r.email=a}),m.qZA(),m.TgZ(7,"label",4),m._uU(8,"Password:"),m.qZA(),m.TgZ(9,"input",5),m.NdJ("ngModelChange",function(a){return r.password=a}),m.qZA(),m.TgZ(10,"button",6),m._uU(11,"Login"),m.qZA()()()),2&t&&(m.xp6(6),m.Q6J("ngModel",r.email),m.xp6(3),m.Q6J("ngModel",r.password))},dependencies:[qp,$o,Es,jn,Xc,Ph,Mh],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-color:#f0f0f0}.login-form[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 2px 4px #0000001a;width:300px}.login-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;padding:10px;margin-bottom:15px;border:1px solid #ccc;border-radius:3px}.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:3px;cursor:pointer;transition:background-color .3s ease}.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]}),n})(),NU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-home"]],decls:7,vars:0,consts:[[1,"home-container"],["routerLink","/create-note"],["routerLink","/notes"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"h1"),m._uU(2,"Welcome to the Home Page"),m.qZA(),m.TgZ(3,"a",1),m._uU(4,"Create a Note"),m.qZA(),m.TgZ(5,"a",2),m._uU(6,"View Your Notes"),m.qZA()())},dependencies:[pm],styles:[".home-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-color:#f0f0f0}"]}),n})();function YN(){return(0,Qi.e)((n,e)=>{let t,r=!1;n.subscribe((0,Er.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var Je,RU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xu={},QN=QN||{},$t=RU||self;function FT(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function UE(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var JN="closure_uid_"+(1e9*Math.random()>>>0),OU=0;function kU(n,e,t){return n.call.apply(n.bind,arguments)}function FU(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ds(n,e,t){return(Ds=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kU:FU).apply(null,arguments)}function LT(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ki(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function Zf(){this.s=this.s,this.o=this.o}Zf.prototype.s=!1,Zf.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function PU(n){Object.prototype.hasOwnProperty.call(n,JN)&&n[JN]||(n[JN]=++OU)}(this)},Zf.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const m1=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function XN(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function y1(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(FT(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function bs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}bs.prototype.h=function(){this.defaultPrevented=!0};var VU=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{$t.addEventListener("test",()=>{},e),$t.removeEventListener("test",()=>{},e)}catch{}return n}();function BE(n){return/^[\s\xa0]*$/.test(n)}function VT(){var n=$t.navigator;return n&&(n=n.userAgent)?n:""}function Kl(n){return-1!=VT().indexOf(n)}function eR(n){return eR[" "](n),n}eR[" "]=function(){};var nR,n,BU=Kl("Opera"),uv=Kl("Trident")||Kl("MSIE"),_1=Kl("Edge"),tR=_1||uv,v1=Kl("Gecko")&&!(-1!=VT().toLowerCase().indexOf("webkit")&&!Kl("Edge"))&&!(Kl("Trident")||Kl("MSIE"))&&!Kl("Edge"),jU=-1!=VT().toLowerCase().indexOf("webkit")&&!Kl("Edge");function w1(){var n=$t.document;return n?n.documentMode:void 0}e:{var rR="",iR=(n=VT(),v1?/rv:([^\);]+)(\)|;)/.exec(n):_1?/Edge\/([\d\.]+)/.exec(n):uv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):jU?/WebKit\/(\S+)/.exec(n):BU?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(iR&&(rR=iR?iR[1]:""),uv){var sR=w1();if(null!=sR&&sR>parseFloat(rR)){nR=String(sR);break e}}nR=rR}var $U=$t.document&&uv&&(w1()||parseInt(nR,10))||void 0;function jE(n,e){if(bs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(v1){e:{try{eR(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:HU[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&jE.$.h.call(this)}}ki(jE,bs);var HU={2:"touch",3:"pen",4:"mouse"};jE.prototype.h=function(){jE.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var $E="closure_listenable_"+(1e6*Math.random()|0),GU=0;function zU(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++GU,this.fa=this.ia=!1}function UT(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function aR(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function I1(n){const e={};for(const t in n)e[t]=n[t];return e}const C1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D1(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<C1.length;a++)t=C1[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function BT(n){this.src=n,this.g={},this.h=0}function uR(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=m1(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(UT(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function lR(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}BT.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=lR(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new zU(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var cR="closure_lm_"+(1e6*Math.random()|0),dR={};function b1(n,e,t,r,i){if(r&&r.once)return S1(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)b1(n,e[a],t,r,i);return null}return t=gR(t),n&&n[$E]?n.O(e,t,UE(r)?!!r.capture:!!r,i):T1(n,e,t,!1,r,i)}function T1(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=UE(i)?!!i.capture:!!i,f=fR(n);if(f||(n[cR]=f=new BT(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function qU(){const e=KU;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)VU||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(M1(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function S1(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)S1(n,e[a],t,r,i);return null}return t=gR(t),n&&n[$E]?n.P(e,t,UE(r)?!!r.capture:!!r,i):T1(n,e,t,!0,r,i)}function A1(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)A1(n,e[a],t,r,i);else r=UE(r)?!!r.capture:!!r,t=gR(t),n&&n[$E]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=lR(a=n.g[e],t,r,i))&&(UT(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=fR(n))&&(e=n.g[e.toString()],n=-1,e&&(n=lR(e,t,r,i)),(t=-1<n?e[n]:null)&&hR(t))}function hR(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[$E])uR(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(M1(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=fR(e))?(uR(t,n),0==t.h&&(t.src=null,e[cR]=null)):UT(n)}}}function M1(n){return n in dR?dR[n]:dR[n]="on"+n}function KU(n,e){if(n.fa)n=!0;else{e=new jE(e,this);var t=n.listener,r=n.la||n.src;n.ia&&hR(n),n=t.call(r,e)}return n}function fR(n){return(n=n[cR])instanceof BT?n:null}var pR="__closure_events_fn_"+(1e9*Math.random()>>>0);function gR(n){return"function"==typeof n?n:(n[pR]||(n[pR]=function(e){return n.handleEvent(e)}),n[pR])}function Fi(){Zf.call(this),this.i=new BT(this),this.S=this,this.J=null}function rs(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new bs(e,n);else if(e instanceof bs)e.target=e.target||n;else{var i=e;D1(e=new bs(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=jT(l,r,!0,e)&&i}if(i=jT(l=e.g=n,r,!0,e)&&i,i=jT(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=jT(l=e.g=t[a],r,!1,e)&&i}function jT(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.fa&&l.capture==t){var f=l.listener,y=l.la||l.src;l.ia&&uR(n.i,l),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}ki(Fi,Zf),Fi.prototype[$E]=!0,Fi.prototype.removeEventListener=function(n,e,t,r){A1(this,n,e,t,r)},Fi.prototype.N=function(){if(Fi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)UT(t[r]);delete n.g[e],n.h--}}this.J=null},Fi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Fi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var mR=$t.JSON.stringify;function YU(){var n=yR;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var x1=new class ZU{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new JU,n=>n.reset());class JU{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function XU(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function eB(n){$t.setTimeout(()=>{throw n},0)}let HE,GE=!1,yR=new class QU{constructor(){this.h=this.g=null}add(e,t){const r=x1.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},N1=()=>{const n=$t.Promise.resolve(void 0);HE=()=>{n.then(tB)}};var tB=()=>{for(var n;n=YU();){try{n.h.call(n.g)}catch(t){eB(t)}var e=x1;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}GE=!1};function $T(n,e){Fi.call(this),this.h=n||1,this.g=e||$t,this.j=Ds(this.qb,this),this.l=Date.now()}function _R(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function vR(n,e,t){if("function"==typeof n)t&&(n=Ds(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ds(n.handleEvent,n)}return 2147483647<Number(e)?-1:$t.setTimeout(n,e||0)}function R1(n){n.g=vR(()=>{n.g=null,n.i&&(n.i=!1,R1(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ki($T,Fi),(Je=$T.prototype).ga=!1,Je.T=null,Je.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),rs(this,"tick"),this.ga&&(_R(this),this.start()))}},Je.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.N=function(){$T.$.N.call(this),_R(this),delete this.g};class nB extends Zf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:R1(this)}N(){super.N(),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zE(n){Zf.call(this),this.h=n,this.g={}}ki(zE,Zf);var P1=[];function O1(n,e,t,r){Array.isArray(t)||(t&&(P1[0]=t.toString()),t=P1);for(var i=0;i<t.length;i++){var a=b1(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function k1(n){aR(n.g,function(e,t){this.g.hasOwnProperty(t)&&hR(e)},n),n.g={}}function HT(){this.g=!0}function lv(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function oB(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return mR(t)}catch{return e}}(n,t)+(r?" "+r:"")})}zE.prototype.N=function(){zE.$.N.call(this),k1(this)},zE.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},HT.prototype.Ea=function(){this.g=!1},HT.prototype.info=function(){};var gm={},F1=null;function GT(){return F1=F1||new Fi}function L1(n){bs.call(this,gm.Ta,n)}function WE(n){const e=GT();rs(e,new L1(e))}function V1(n,e){bs.call(this,gm.STAT_EVENT,n),this.stat=e}function Zs(n){const e=GT();rs(e,new V1(e,n))}function U1(n,e){bs.call(this,gm.Ua,n),this.size=e}function qE(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return $t.setTimeout(function(){n()},e)}gm.Ta="serverreachability",ki(L1,bs),gm.STAT_EVENT="statevent",ki(V1,bs),gm.Ua="timingevent",ki(U1,bs);var zT={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},B1={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function wR(){}function $1(){}wR.prototype.h=null;var CR,KE={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ER(){bs.call(this,"d")}function IR(){bs.call(this,"c")}function WT(){}function ZE(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new zE(this),this.P=aB,this.V=new $T(n=tR?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new H1}function H1(){this.i=null,this.g="",this.h=!1}ki(ER,bs),ki(IR,bs),ki(WT,wR),WT.prototype.g=function(){return new XMLHttpRequest},WT.prototype.i=function(){return{}},CR=new WT;var aB=45e3,DR={},qT={};function bR(n,e,t){n.L=1,n.v=QT(Rd(e)),n.s=t,n.S=!0,G1(n,null)}function G1(n,e){n.G=Date.now(),YE(n),n.A=Rd(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),eF(t.i,"t",r),n.C=0,t=n.l.J,n.h=new H1,n.g=DF(n.l,t?e:null,!n.s),0<n.O&&(n.M=new nB(Ds(n.Pa,n,n.g),n.O)),O1(n.U,n.g,"readystatechange",n.nb),e=n.I?I1(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),WE(),function rB(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),y=0;y<f.length;y++){var E=f[y].split("=");if(1<E.length){var T=E[0];E=E[1];var M=T.split("_");l=2<=M.length&&"type"==M[1]?l+(T+"=")+E+"&":l+(T+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function z1(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function W1(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=uB(n,t),i==qT){4==e&&(n.o=4,Zs(14),r=!1),lv(n.j,n.m,null,"[Incomplete Response]");break}if(i==DR){n.o=4,Zs(15),lv(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}lv(n.j,n.m,i,null),TR(n,i)}z1(n)&&i!=qT&&i!=DR&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Zs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),PR(e),e.M=!0,Zs(11))):(lv(n.j,n.m,t,"[Invalid Chunked Response]"),mm(n),QE(n))}function uB(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?qT:(t=Number(e.substring(t,r)),isNaN(t)?DR:(r+=1)+t>e.length?qT:(e=e.slice(r,r+t),n.C=r+t,e))}function YE(n){n.Y=Date.now()+n.P,q1(n,n.P)}function q1(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=qE(Ds(n.lb,n),e)}function KT(n){n.B&&($t.clearTimeout(n.B),n.B=null)}function QE(n){0==n.l.H||n.J||wF(n.l,n)}function mm(n){KT(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,_R(n.V),k1(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function TR(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||SR(t.i,n)))if(!n.K&&SR(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;rS(t),tS(t)}RR(t),Zs(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=qE(Ds(t.ib,t),6e3));if(1>=rF(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else _m(t,11)}else if((n.K||t.g==n)&&rS(t),!BE(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.V=E[0],E=E[1],2==t.H)if("c"==E[0]){t.K=E[1],t.pa=E[2];const T=E[3];null!=T&&(t.ra=T,t.l.info("VER="+t.ra));const M=E[4];null!=M&&(t.Ga=M,t.l.info("SVER="+t.Ga));const P=E[5];null!=P&&"number"==typeof P&&0<P&&(t.L=r=1.5*P,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const j=n.g;if(j){const Z=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var a=r.i;a.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(AR(a,a.h),a.h=null))}if(r.F){const me=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;me&&(r.Da=me,ir(r.I,r.F,me))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=CF(r,r.J?r.pa:null,r.Y),l.K){iF(r.i,l);var f=l,y=r.L;y&&f.setTimeout(y),f.B&&(KT(f),YE(f)),r.g=l}else _F(r);0<t.j.length&&nS(t)}else"stop"!=E[0]&&"close"!=E[0]||_m(t,7);else 3==t.H&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?_m(t,7):NR(t):"noop"!=E[0]&&t.h&&t.h.Aa(E),t.A=0)}WE()}catch{}}function K1(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(FT(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function cB(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(FT(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function lB(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(FT(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Je=ZE.prototype).setTimeout=function(n){this.P=n},Je.nb=function(n){n=n.target;const e=this.M;e&&3==Zl(n)?e.l():this.Pa(n)},Je.Pa=function(n){try{if(n==this.g)e:{const T=Zl(this.g);var e=this.g.Ia();if(this.g.da(),!(3>T)&&(3!=T||tR||this.g&&(this.h.h||this.g.ja()||hF(this.g)))){this.J||4!=T||7==e||WE(),KT(this);var t=this.g.da();this.ca=t;t:if(z1(this)){var r=hF(this.g);n="";var i=r.length,a=4==Zl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){mm(this),QE(this);var l="";break t}this.h.i=new $t.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function iB(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.W,T,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!BE(f)){var E=f;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Zs(12),mm(this),QE(this);break e}lv(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,TR(this,t)}this.S?(W1(this,T,l),tR&&this.i&&3==T&&(O1(this.U,this.V,"tick",this.mb),this.V.start())):(lv(this.j,this.m,l,null),TR(this,l)),4==T&&mm(this),this.i&&!this.J&&(4==T?wF(this.l,this):(this.i=!1,YE(this)))}else(function AB(n){const e={};n=(n.g&&2<=Zl(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(BE(n[r]))continue;var t=XU(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function WU(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Zs(12)):(this.o=0,Zs(13)),mm(this),QE(this)}}}catch{}},Je.mb=function(){if(this.g){var n=Zl(this.g),e=this.g.ja();this.C<e.length&&(KT(this),W1(this,n,e),this.i&&4!=n&&YE(this))}},Je.cancel=function(){this.J=!0,mm(this)},Je.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function sB(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(WE(),Zs(17)),mm(this),this.o=2,QE(this)):q1(this,this.Y-n)};var Z1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ym(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ym){this.h=n.h,ZT(this,n.j),this.s=n.s,this.g=n.g,YT(this,n.m),this.l=n.l;var e=n.i,t=new eI;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Y1(this,t),this.o=n.o}else n&&(e=String(n).match(Z1))?(this.h=!1,ZT(this,e[1]||"",!0),this.s=JE(e[2]||""),this.g=JE(e[3]||"",!0),YT(this,e[4]),this.l=JE(e[5]||"",!0),Y1(this,e[6]||"",!0),this.o=JE(e[7]||"")):(this.h=!1,this.i=new eI(null,this.h))}function Rd(n){return new ym(n)}function ZT(n,e,t){n.j=t?JE(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function YT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Y1(n,e,t){e instanceof eI?(n.i=e,function yB(n,e){e&&!n.j&&(Yf(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(J1(this,r),eF(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=XE(e,gB)),n.i=new eI(e,n.h))}function ir(n,e,t){n.i.set(e,t)}function QT(n){return ir(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function JE(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function XE(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,hB),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function hB(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ym.prototype.toString=function(){var n=[],e=this.j;e&&n.push(XE(e,Q1,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(XE(e,Q1,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(XE(t,"/"==t.charAt(0)?pB:fB,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",XE(t,mB)),n.join("")};var Q1=/[#\/\?@]/g,fB=/[#\?:]/g,pB=/[#\?]/g,gB=/[#\?@]/g,mB=/#/g;function eI(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Yf(n){n.g||(n.g=new Map,n.h=0,n.i&&function dB(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function J1(n,e){Yf(n),e=cv(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function X1(n,e){return Yf(n),e=cv(n,e),n.g.has(e)}function eF(n,e,t){J1(n,e),0<t.length&&(n.i=null,n.g.set(cv(n,e),XN(t)),n.h+=t.length)}function cv(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function tF(n){this.l=n||vB,n=$t.PerformanceNavigationTiming?0<(n=$t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!($t.g&&$t.g.Ka&&$t.g.Ka()&&$t.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Je=eI.prototype).add=function(n,e){Yf(this),this.i=null,n=cv(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(n,e){Yf(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Je.ta=function(){Yf(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Je.Z=function(n){Yf(this);let e=[];if("string"==typeof n)X1(this,n)&&(e=e.concat(this.g.get(cv(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Je.set=function(n,e){return Yf(this),this.i=null,X1(this,n=cv(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Je.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var vB=10;function nF(n){return!!n.h||!!n.g&&n.g.size>=n.j}function rF(n){return n.h?1:n.g?n.g.size:0}function SR(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function AR(n,e){n.g?n.g.add(e):n.h=e}function iF(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function sF(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return XN(n.i)}tF.prototype.cancel=function(){if(this.i=sF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var wB=class{stringify(n){return $t.JSON.stringify(n,void 0)}parse(n){return $t.JSON.parse(n,void 0)}};function EB(){this.g=new wB}function IB(n,e,t){const r=t||"";try{K1(n,function(i,a){let l=i;UE(i)&&(l=mR(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function JT(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function tI(n){this.l=n.fc||null,this.j=n.ob||!1}function XT(n,e){Fi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=MR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ki(tI,wR),tI.prototype.g=function(){return new XT(this.l,this.j)},tI.prototype.i=function(n){return function(){return n}}({}),ki(XT,Fi);var MR=0;function oF(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function nI(n){n.readyState=4,n.l=null,n.j=null,n.A=null,rI(n)}function rI(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Je=XT.prototype).open=function(n,e){if(this.readyState!=MR)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,rI(this)},Je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||$t).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nI(this)),this.readyState=MR},Je.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,rI(this)),this.g&&(this.readyState=3,rI(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof $t.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;oF(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Je.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?nI(this):rI(this),3==this.readyState&&oF(this)}},Je.Za=function(n){this.g&&(this.response=this.responseText=n,nI(this))},Je.Ya=function(n){this.g&&(this.response=n,nI(this))},Je.ka=function(){this.g&&nI(this)},Je.setRequestHeader=function(n,e){this.v.append(n,e)},Je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(XT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var DB=$t.JSON.parse;function Pr(n){Fi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=aF,this.L=this.M=!1}ki(Pr,Fi);var aF="",bB=/^https?$/i,TB=["POST","PUT"];function uF(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,lF(n),eS(n)}function lF(n){n.F||(n.F=!0,rs(n,"complete"),rs(n,"error"))}function cF(n){if(n.h&&typeof QN<"u"&&(!n.C[1]||4!=Zl(n)||2!=n.da()))if(n.v&&4==Zl(n))vR(n.La,0,n);else if(rs(n,"readystatechange"),4==Zl(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(Z1)[1]||null;!i&&$t.self&&$t.self.location&&(i=$t.self.location.protocol.slice(0,-1)),r=!bB.test(i?i.toLowerCase():"")}t=r}if(t)rs(n,"complete"),rs(n,"success");else{n.m=6;try{var a=2<Zl(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",lF(n)}}finally{eS(n)}}}function eS(n,e){if(n.g){dF(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||rs(n,"ready");try{t.onreadystatechange=r}catch{}}}function dF(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&($t.clearTimeout(n.A),n.A=null)}function Zl(n){return n.g?n.g.readyState:0}function hF(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case aF:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function fF(n){let e="";return aR(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function xR(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=fF(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ir(n,e,t))}function iI(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function pF(n){this.Ga=0,this.j=[],this.l=new HT,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=iI("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=iI("baseRetryDelayMs",5e3,n),this.hb=iI("retryDelaySeedMs",1e4,n),this.eb=iI("forwardChannelMaxRetries",2,n),this.xa=iI("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new tF(n&&n.concurrentRequestLimit),this.Ja=new EB,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function NR(n){if(gF(n),3==n.H){var e=n.W++,t=Rd(n.I);if(ir(t,"SID",n.K),ir(t,"RID",e),ir(t,"TYPE","terminate"),sI(n,t),(e=new ZE(n,n.l,e)).L=2,e.v=QT(Rd(t)),t=!1,$t.navigator&&$t.navigator.sendBeacon)try{t=$t.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&$t.Image&&((new Image).src=e.v,t=!0),t||(e.g=DF(e.l,null),e.g.ha(e.v)),e.G=Date.now(),YE(e)}IF(n)}function tS(n){n.g&&(PR(n),n.g.cancel(),n.g=null)}function gF(n){tS(n),n.u&&($t.clearTimeout(n.u),n.u=null),rS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&$t.clearTimeout(n.m),n.m=null)}function nS(n){if(!nF(n.i)&&!n.m){n.m=!0;var e=n.Na;HE||N1(),GE||(HE(),GE=!0),yR.add(e,n),n.C=0}}function mF(n,e){var t;t=e?e.m:n.W++;const r=Rd(n.I);ir(r,"SID",n.K),ir(r,"RID",t),ir(r,"AID",n.V),sI(n,r),n.o&&n.s&&xR(r,n.o,n.s),t=new ZE(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=yF(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),AR(n.i,t),bR(t,r,e)}function sI(n,e){n.na&&aR(n.na,function(t,r){ir(e,r,t)}),n.h&&K1({},function(t,r){ir(e,r,t)})}function yF(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Ds(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].g,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let y=0;y<t;y++){let E=i[y].g;const T=i[y].map;if(E-=a,0>E)a=Math.max(0,i[y].g-100),f=!1;else try{IB(T,l,"req"+E+"_")}catch{r&&r(T)}}if(f){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function _F(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;HE||N1(),GE||(HE(),GE=!0),yR.add(e,n),n.A=0}}function RR(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=qE(Ds(n.Ma,n),EF(n,n.A)),n.A++,0))}function PR(n){null!=n.B&&($t.clearTimeout(n.B),n.B=null)}function vF(n){n.g=new ZE(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Rd(n.wa);ir(e,"RID","rpc"),ir(e,"SID",n.K),ir(e,"AID",n.V),ir(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&ir(e,"TO",n.qa),ir(e,"TYPE","xmlhttp"),sI(n,e),n.o&&n.s&&xR(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=QT(Rd(e)),t.s=null,t.S=!0,G1(t,n)}function rS(n){null!=n.v&&($t.clearTimeout(n.v),n.v=null)}function wF(n,e){var t=null;if(n.g==e){rS(n),PR(n),n.g=null;var r=2}else{if(!SR(n.i,e))return;t=e.F,iF(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;rs(r=GT(),new U1(r,t)),nS(n)}else _F(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function MB(n,e){return!(rF(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=qE(Ds(n.Na,n,e),EF(n,n.C)),n.C++,0)))}(n,e)||2==r&&RR(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:_m(n,5);break;case 4:_m(n,10);break;case 3:_m(n,6);break;default:_m(n,2)}}function EF(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function _m(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Ds(n.pb,n);t||(t=new ym("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||ZT(t,"https"),QT(t)),function CB(n,e){const t=new HT;if($t.Image){const r=new Image;r.onload=LT(JT,t,r,"TestLoadImage: loaded",!0,e),r.onerror=LT(JT,t,r,"TestLoadImage: error",!1,e),r.onabort=LT(JT,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=LT(JT,t,r,"TestLoadImage: timeout",!1,e),$t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Zs(2);n.H=0,n.h&&n.h.za(e),IF(n),gF(n)}function IF(n){if(n.H=0,n.ma=[],n.h){const e=sF(n.i);(0!=e.length||0!=n.j.length)&&(y1(n.ma,e),y1(n.ma,n.j),n.i.i.length=0,XN(n.j),n.j.length=0),n.h.ya()}}function CF(n,e,t){var r=t instanceof ym?Rd(t):new ym(t);if(""!=r.g)e&&(r.g=e+"."+r.g),YT(r,r.m);else{var i=$t.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new ym(null);r&&ZT(a,r),e&&(a.g=e),i&&YT(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&ir(r,t,e),ir(r,"VER",n.ra),sI(n,r),r}function DF(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pr(t&&n.Ha&&!n.va?new tI({ob:!0}):n.va)).Oa(n.J),e}function bF(){}function iS(){if(uv&&!(10<=Number($U)))throw Error("Environmental error: no available transport.")}function ha(n,e){Fi.call(this),this.g=new pF(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!BE(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!BE(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new dv(this)}function TF(n){ER.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function SF(){IR.call(this),this.status=1}function dv(n){this.g=n}function el(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function OR(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],l=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;l=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(l<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((a=(e=t+((l=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=a+((l=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function Fn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(Je=Pr.prototype).Oa=function(n){this.M=n},Je.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():CR.g(),this.C=function j1(n){return n.h||(n.h=n.i())}(this.u?this.u:CR),this.g.onreadystatechange=Ds(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void uF(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=$t.FormData&&n instanceof $t.FormData,!(0<=m1(TB,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{dF(this),0<this.B&&((this.L=function SB(n){return uv&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ds(this.ua,this)):this.A=vR(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){uF(this,a)}},Je.ua=function(){typeof QN<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rs(this,"timeout"),this.abort(8))},Je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,rs(this,"complete"),rs(this,"abort"),eS(this))},Je.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),eS(this,!0)),Pr.$.N.call(this)},Je.La=function(){this.s||(this.G||this.v||this.l?cF(this):this.kb())},Je.kb=function(){cF(this)},Je.isActive=function(){return!!this.g},Je.da=function(){try{return 2<Zl(this)?this.g.status:-1}catch{return-1}},Je.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Je.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),DB(e)}},Je.Ia=function(){return this.m},Je.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=pF.prototype).ra=8,Je.H=1,Je.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new ZE(this,this.l,n);let a=this.s;if(this.U&&(a?(a=I1(a),D1(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=yF(this,i,e),ir(t=Rd(this.I),"RID",n),ir(t,"CVER",22),this.F&&ir(t,"X-HTTP-Session-Id",this.F),sI(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(fF(a)))+"&"+e:this.o&&xR(t,this.o,a)),AR(this.i,i),this.bb&&ir(t,"TYPE","init"),this.P?(ir(t,"$req",e),ir(t,"SID","null"),i.aa=!0,bR(i,t,null)):bR(i,t,e),this.H=2}}else 3==this.H&&(n?mF(this,n):0==this.j.length||nF(this.i)||mF(this))},Je.Ma=function(){if(this.u=null,vF(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=qE(Ds(this.jb,this),n)}},Je.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Zs(10),tS(this),vF(this))},Je.ib=function(){null!=this.v&&(this.v=null,tS(this),RR(this),Zs(19))},Je.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Zs(2)):(this.l.info("Failed to ping google.com"),Zs(1))},Je.isActive=function(){return!!this.h&&this.h.isActive(this)},(Je=bF.prototype).Ba=function(){},Je.Aa=function(){},Je.za=function(){},Je.ya=function(){},Je.isActive=function(){return!0},Je.Va=function(){},iS.prototype.g=function(n,e){return new ha(n,e)},ki(ha,Fi),ha.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Zs(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=CF(n,null,n.Y),nS(n)},ha.prototype.close=function(){NR(this.g)},ha.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=mR(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&nS(e)},ha.prototype.N=function(){this.g.h=null,delete this.j,NR(this.g),delete this.g,ha.$.N.call(this)},ki(TF,ER),ki(SF,IR),ki(dv,bF),dv.prototype.Ba=function(){rs(this.g,"a")},dv.prototype.Aa=function(n){rs(this.g,new TF(n))},dv.prototype.za=function(n){rs(this.g,new SF)},dv.prototype.ya=function(){rs(this.g,"b")},ki(el,function xB(){this.blockSize=-1}),el.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},el.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)OR(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){OR(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){OR(this,r),i=0;break}}this.h=i,this.i+=e},el.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var NB={};function kR(n){return-128<=n&&128>n?function UU(n,e){var t=NB;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Fn([0|e],0>e?-1:0)}):new Fn([0|n],0>n?-1:0)}function Yl(n){if(isNaN(n)||!isFinite(n))return hv;if(0>n)return is(Yl(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=FR;return new Fn(e,0)}var FR=4294967296,hv=kR(0),LR=kR(1),MF=kR(16777216);function Pd(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function tu(n){return-1==n.h}function is(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Fn(t,~n.h).add(LR)}function sS(n,e){return n.add(is(e))}function oS(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function oI(n,e){this.g=n,this.h=e}function aS(n,e){if(Pd(e))throw Error("division by zero");if(Pd(n))return new oI(hv,hv);if(tu(n))return e=aS(is(n),e),new oI(is(e.g),is(e.h));if(tu(e))return e=aS(n,is(e)),new oI(is(e.g),e.h);if(30<n.g.length){if(tu(n)||tu(e))throw Error("slowDivide_ only works with positive integers.");for(var t=LR,r=e;0>=r.X(n);)t=xF(t),r=xF(r);var i=fv(t,1),a=fv(r,1);for(r=fv(r,2),t=fv(t,2);!Pd(r);){var l=a.add(r);0>=l.X(n)&&(i=i.add(t),a=l),r=fv(r,1),t=fv(t,1)}return e=sS(n,i.R(e)),new oI(i,e)}for(i=hv;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(a=Yl(t)).R(e);tu(l)||0<l.X(n);)l=(a=Yl(t-=r)).R(e);Pd(a)&&(a=LR),i=i.add(a),n=sS(n,l)}return new oI(i,n)}function xF(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Fn(t,n.h)}function fv(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new Fn(i,n.h)}(Je=Fn.prototype).ea=function(){if(tu(this))return-is(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:FR+r)*e,e*=FR}return n},Je.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Pd(this))return"0";if(tu(this))return"-"+is(this).toString(n);for(var e=Yl(Math.pow(n,6)),t=this,r="";;){var i=aS(t,e).g,a=((0<(t=sS(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Pd(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Je.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Je.X=function(n){return tu(n=sS(this,n))?-1:Pd(n)?0:1},Je.abs=function(){return tu(this)?is(this):this},Je.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),l=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(a&=65535)}return new Fn(t,-2147483648&t[t.length-1]?-1:0)},Je.R=function(n){if(Pd(this)||Pd(n))return hv;if(tu(this))return tu(n)?is(this).R(is(n)):is(is(this).R(n));if(tu(n))return is(this.R(is(n)));if(0>this.X(MF)&&0>n.X(MF))return Yl(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,l=65535&this.D(r),f=n.D(i)>>>16,y=65535&n.D(i);t[2*r+2*i]+=l*y,oS(t,2*r+2*i),t[2*r+2*i+1]+=a*y,oS(t,2*r+2*i+1),t[2*r+2*i+1]+=l*f,oS(t,2*r+2*i+1),t[2*r+2*i+2]+=a*f,oS(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Fn(t,0)},Je.gb=function(n){return aS(this,n).h},Je.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Fn(t,this.h&n.h)},Je.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Fn(t,this.h|n.h)},Je.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Fn(t,this.h^n.h)},iS.prototype.createWebChannel=iS.prototype.g,ha.prototype.send=ha.prototype.u,ha.prototype.open=ha.prototype.m,ha.prototype.close=ha.prototype.close,zT.NO_ERROR=0,zT.TIMEOUT=8,zT.HTTP_ERROR=6,B1.COMPLETE="complete",$1.EventType=KE,KE.OPEN="a",KE.CLOSE="b",KE.ERROR="c",KE.MESSAGE="d",Fi.prototype.listen=Fi.prototype.O,Pr.prototype.listenOnce=Pr.prototype.P,Pr.prototype.getLastError=Pr.prototype.Sa,Pr.prototype.getLastErrorCode=Pr.prototype.Ia,Pr.prototype.getStatus=Pr.prototype.da,Pr.prototype.getResponseJson=Pr.prototype.Wa,Pr.prototype.getResponseText=Pr.prototype.ja,Pr.prototype.send=Pr.prototype.ha,Pr.prototype.setWithCredentials=Pr.prototype.Oa,el.prototype.digest=el.prototype.l,el.prototype.reset=el.prototype.reset,el.prototype.update=el.prototype.j,Fn.prototype.add=Fn.prototype.add,Fn.prototype.multiply=Fn.prototype.R,Fn.prototype.modulo=Fn.prototype.gb,Fn.prototype.compare=Fn.prototype.X,Fn.prototype.toNumber=Fn.prototype.ea,Fn.prototype.toString=Fn.prototype.toString,Fn.prototype.getBits=Fn.prototype.D,Fn.fromNumber=Yl,Fn.fromString=function AF(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return is(AF(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Yl(Math.pow(e,8)),r=hv,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+a),e);8>a?(a=Yl(Math.pow(e,a)),r=r.R(a).add(Yl(l))):r=(r=r.R(t)).add(Yl(l))}return r};var RB=Xu.createWebChannelTransport=function(){return new iS},PB=Xu.getStatEventTarget=function(){return GT()},VR=Xu.ErrorCode=zT,OB=Xu.EventType=B1,kB=Xu.Event=gm,NF=Xu.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},FB=Xu.FetchXmlHttpFactory=tI,uS=Xu.WebChannel=$1,LB=Xu.XhrIo=Pr,VB=Xu.Md5=el,pv=Xu.Integer=Fn;const RF="@firebase/firestore";class Li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Li.UNAUTHENTICATED=new Li(null),Li.GOOGLE_CREDENTIALS=new Li("google-credentials-uid"),Li.FIRST_PARTY=new Li("first-party-uid"),Li.MOCK_USER=new Li("mock-user");let gv="9.23.0";const Qf=new Xo.Yd("@firebase/firestore");function UR(){return Qf.logLevel}function Be(n,...e){if(Qf.logLevel<=Xo.in.DEBUG){const t=e.map(BR);Qf.debug(`Firestore (${gv}): ${n}`,...t)}}function $r(n,...e){if(Qf.logLevel<=Xo.in.ERROR){const t=e.map(BR);Qf.error(`Firestore (${gv}): ${n}`,...t)}}function nu(n,...e){if(Qf.logLevel<=Xo.in.WARN){const t=e.map(BR);Qf.warn(`Firestore (${gv}): ${n}`,...t)}}function BR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${gv}) INTERNAL ASSERTION FAILED: `+n;throw $r(e),new Error(e)}function yt(n,e){n||st()}function Ye(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class PF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Li.UNAUTHENTICATED))}shutdown(){}}class $B{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class HB{constructor(e){this.t=e,this.currentUser=Li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let l=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ii,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const E=l;e.enqueueRetryable((0,ye.Z)(function*(){yield E.promise,yield a(r.currentUser)}))},y=E=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(E=>y(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?y(E):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ii)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt("string"==typeof r.accessToken),new PF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yt(null===e||"string"==typeof e),new Li(e)}}class GB{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Li.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class zB{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new GB(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WB{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.T;return this.T=a.token,Be("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(yt("string"==typeof t.token),this.T=t.token,new OF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function qB(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class kF{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=qB(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function Vt(n,e){return n<e?-1:n>e?1:0}function mv(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function FF(n){return n+"\0"}class hr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hr.fromMillis(Date.now())}static fromDate(e){return hr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new hr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new hr(0,0))}static max(){return new vt(new hr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class aI{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===aI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof aI?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mn extends aI{construct(e,t,r){return new mn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new mn(t)}static emptyPath(){return new mn([])}}const KB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Or extends aI{construct(e,t,r){return new Or(e,t,r)}static isValidIdentifier(e){return KB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Or(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ne(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Ne(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Ne(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Or(t)}static emptyPath(){return new Or([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(mn.fromString(e))}static fromName(e){return new Ze(mn.fromString(e).popFirst(5))}static empty(){return new Ze(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new mn(e.slice()))}}class lS{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function jR(n){return n.fields.find(e=>2===e.kind)}function vm(n){return n.fields.filter(e=>2!==e.kind)}lS.UNKNOWN_ID=-1;class cS{constructor(e,t){this.fieldPath=e,this.kind=t}}class uI{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new uI(0,fa.min())}}function LF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=vt.fromTimestamp(1e9===r?new hr(t+1,0):new hr(t,r));return new fa(i,Ze.empty(),e)}function VF(n){return new fa(n.readTime,n.key,-1)}class fa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fa(vt.min(),Ze.empty(),-1)}static max(){return new fa(vt.max(),Ze.empty(),-1)}}function $R(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Vt(n.largestBatchId,e.largestBatchId))}const UF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Jf(n){return HR.apply(this,arguments)}function HR(){return HR=(0,ye.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==UF)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),HR.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},y=>r(y))}),l=!0,a===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let y=0;y<a;y++){const E=y;t(e[E]).next(T=>{l[E]=T,++f,f===a&&r(l)},T=>i(T))}})}static doWhile(e,t){return new oe((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class dS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Ii,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new lI(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=GR(r.target.error);this.v.reject(new lI(e,i))}}static open(e,t,r,i){try{return new dS(t,e.transaction(i,r))}catch(a){throw new lI(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new JB(t)}}class tl{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===tl.S((0,k.z$)())&&$r("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),wm(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,k.hl)())return!1;if(tl.C())return!0;const e=(0,k.z$)(),t=tl.S(e),r=0<t&&t<10,i=tl.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new lI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Ne(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ne(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new lI(e,f))},a.onupgradeneeded=l=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ye.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const y=dS.open(a.db,e,l?"readonly":"readwrite",r),E=i(y).next(T=>(y.P(),T)).catch(T=>(y.abort(T),oe.reject(T))).toPromise();return E.catch(()=>{}),yield y.R,E}catch(y){const E=y,T="FirebaseError"!==E.name&&f<3;if(Be("SimpleDb","Transaction failed with error:",E.message,"Retrying:",T),a.close(),!T)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class QB{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return wm(this.L.delete())}}class lI extends Ne{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xf(n){return"IndexedDbTransactionError"===n.name}class JB{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),wm(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),wm(this.store.add(e))}get(e){return wm(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),wm(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),wm(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new oe((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,l,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new oe((r,i)=>{t.onerror=a=>{const l=GR(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}W(e,t){const r=[];return new oe((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const y=new QB(f),E=t(f.primaryKey,f.value,y);if(E instanceof oe){const T=E.catch(M=>(y.done(),oe.reject(M)));r.push(T)}y.isDone?i():null===y.K?f.continue():f.continue(y.K)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function wm(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=GR(r.target.error);t(i)}})}let jF=!1;function GR(n){const e=tl.S((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return jF||(jF=!0,setTimeout(()=>{throw r},0)),r}}return n}class XB{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Xf(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Jf(r)}yield t.et(6e4)}))}}class ej{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return oe.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Be("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,a)).next(f=>(Be("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=VF(a);$R(l,r)>0&&(r=l)}),new fa(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let pa=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function cI(n){return null==n}function dI(n){return 0===n&&1/n==-1/0}function $F(n){return"number"==typeof n&&Number.isInteger(n)&&!dI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ts(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=HF(e)),e=tj(n.get(t),e);return HF(e)}function tj(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function HF(n){return n+"\x01\x01"}function Ql(n){const e=n.length;if(yt(e>=2),2===e)return yt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&st(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:st()}a=l+2}return new mn(r)}const GF=["userId","batchId"];function hS(n,e){return[n,Ts(e)]}function zF(n,e,t){return[n,Ts(e),t]}const nj={},rj=["prefixPath","collectionGroup","readTime","documentId"],ij=["prefixPath","collectionGroup","documentId"],sj=["collectionGroup","readTime","prefixPath","documentId"],oj=["canonicalId","targetId"],aj=["targetId","path"],uj=["path","targetId"],lj=["collectionId","parent"],cj=["indexId","uid"],dj=["uid","sequenceNumber"],hj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fj=["indexId","uid","orderedDocumentKey"],pj=["userId","collectionPath","documentId"],gj=["userId","collectionPath","largestBatchId"],mj=["userId","collectionGroup","largestBatchId"],WF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yj=[...WF,"documentOverlays"],qF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KF=qF,_j=[...KF,"indexConfiguration","indexState","indexEntries"];class zR extends BF{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Vi(n,e){const t=Ye(n);return tl.M(t.ht,e)}function ZF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ep(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function YF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class er{constructor(e,t){this.comparator=e,this.root=t||ss.EMPTY}insert(e,t){return new er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fS(this.root,e,this.comparator,!1)}getReverseIterator(){return new fS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fS(this.root,e,this.comparator,!0)}}class fS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ss{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ss.RED,this.left=i??ss.EMPTY,this.right=a??ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ss(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ss.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1,ss.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ss(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sr{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new QF(this.data.getIterator())}getIteratorFrom(e){return new QF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof sr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new sr(this.comparator);return t.data=e,t}}class QF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yv(n){return n.hasNext()?n.getNext():void 0}class So{constructor(e){this.fields=e,e.sort(Or.comparator)}static empty(){return new So([])}unionWith(e){let t=new sr(Or.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new So(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mv(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class JF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ci{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new JF("Invalid base64 string: "+i):i}}(e);return new Ci(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Ci(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ci.EMPTY_BYTE_STRING=new Ci("");const wj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tp(n){if(yt(!!n),"string"==typeof n){let e=0;const t=wj.exec(n);if(yt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kr(n.seconds),nanos:kr(n.nanos)}}function kr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Od(n){return"string"==typeof n?Ci.fromBase64String(n):Ci.fromUint8Array(n)}function pS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function gS(n){const e=n.mapValue.fields.__previous_value__;return pS(e)?gS(e):e}function hI(n){const e=tp(n.mapValue.fields.__local_write_time__.timestampValue);return new hr(e.seconds,e.nanos)}class Ej{constructor(e,t,r,i,a,l,f,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=y,this.useFetchStreams=E}}class np{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new np("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof np&&e.projectId===this.projectId&&e.database===this.database}}const rp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mS={nullValue:"NULL_VALUE"};function ip(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pS(n)?4:nL(n)?9007199254740991:10:st()}function Jl(n,e){if(n===e)return!0;const t=ip(n);if(t!==ip(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hI(n).isEqual(hI(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=tp(r.timestampValue),l=tp(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Od(n.bytesValue).isEqual(Od(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return kr(r.geoPointValue.latitude)===kr(i.geoPointValue.latitude)&&kr(r.geoPointValue.longitude)===kr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return kr(r.integerValue)===kr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=kr(r.doubleValue),l=kr(i.doubleValue);return a===l?dI(a)===dI(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return mv(n.arrayValue.values||[],e.arrayValue.values||[],Jl);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(ZF(a)!==ZF(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!Jl(a[f],l[f])))return!1;return!0}(n,e);default:return st()}var i}function fI(n,e){return void 0!==(n.values||[]).find(t=>Jl(t,e))}function sp(n,e){if(n===e)return 0;const t=ip(n),r=ip(e);if(t!==r)return Vt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=kr(i.integerValue||i.doubleValue),f=kr(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return XF(n.timestampValue,e.timestampValue);case 4:return XF(hI(n),hI(e));case 5:return Vt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Od(i),f=Od(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let y=0;y<l.length&&y<f.length;y++){const E=Vt(l[y],f[y]);if(0!==E)return E}return Vt(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Vt(kr(i.latitude),kr(a.latitude));return 0!==l?l:Vt(kr(i.longitude),kr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let y=0;y<l.length&&y<f.length;++y){const E=sp(l[y],f[y]);if(E)return E}return Vt(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===rp.mapValue&&a===rp.mapValue)return 0;if(i===rp.mapValue)return 1;if(a===rp.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),y=a.fields||{},E=Object.keys(y);f.sort(),E.sort();for(let T=0;T<f.length&&T<E.length;++T){const M=Vt(f[T],E[T]);if(0!==M)return M;const P=sp(l[f[T]],y[E[T]]);if(0!==P)return P}return Vt(f.length,E.length)}(n.mapValue,e.mapValue);default:throw st()}}function XF(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vt(n,e);const t=tp(n),r=tp(e),i=Vt(t.seconds,r.seconds);return 0!==i?i:Vt(t.nanos,r.nanos)}function _v(n){return WR(n)}function WR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=tp(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Od(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=WR(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${WR(r.fields[f])}`;return a+"}"}(n.mapValue):st();var e}function Em(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function qR(n){return!!n&&"integerValue"in n}function pI(n){return!!n&&"arrayValue"in n}function eL(n){return!!n&&"nullValue"in n}function tL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _S(n){return!!n&&"mapValue"in n}function gI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ep(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function nL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ij(n){return"nullValue"in n?mS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Em(np.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function Cj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Em(np.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?rp:st()}function rL(n,e){const t=sp(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function iL(n,e){const t=sp(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class os{constructor(e){this.value=e}static empty(){return new os({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_S(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gI(t)}setAll(e){let t=Or.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=gI(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());_S(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];_S(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ep(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new os(gI(this.value))}}function sL(n){const e=[];return ep(n.fields,(t,r)=>{const i=new Or([t]);if(_S(r)){const a=sL(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new So(e)}class or{constructor(e,t,r,i,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new or(e,0,vt.min(),vt.min(),vt.min(),os.empty(),0)}static newFoundDocument(e,t,r,i){return new or(e,1,t,vt.min(),r,i,0)}static newNoDocument(e,t){return new or(e,2,t,vt.min(),vt.min(),os.empty(),0)}static newUnknownDocument(e,t){return new or(e,3,t,vt.min(),vt.min(),os.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=os.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=os.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof or&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new or(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class op{constructor(e,t){this.position=e,this.inclusive=t}}function oL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Ze.comparator(Ze.fromName(l.referenceValue),t.key):sp(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function aL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jl(n.position[t],e.position[t]))return!1;return!0}class vv{constructor(e,t="asc"){this.field=e,this.dir=t}}function Dj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class uL{}class un extends uL{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new bj(e,t,r):"array-contains"===t?new Aj(e,r):"in"===t?new pL(e,r):"not-in"===t?new Mj(e,r):"array-contains-any"===t?new xj(e,r):new un(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Tj(e,r):new Sj(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(sp(t,this.value)):null!==t&&ip(this.value)===ip(t)&&this.matchesComparison(sp(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ln extends uL{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Ln(e,t)}matches(e){return wv(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function wv(n){return"and"===n.op}function KR(n){return"or"===n.op}function ZR(n){return lL(n)&&wv(n)}function lL(n){for(const e of n.filters)if(e instanceof Ln)return!1;return!0}function YR(n){if(n instanceof un)return n.field.canonicalString()+n.op.toString()+_v(n.value);if(ZR(n))return n.filters.map(e=>YR(e)).join(",");{const e=n.filters.map(t=>YR(t)).join(",");return`${n.op}(${e})`}}function cL(n,e){return n instanceof un?(t=n,(r=e)instanceof un&&t.op===r.op&&t.field.isEqual(r.field)&&Jl(t.value,r.value)):n instanceof Ln?function(t,r){return r instanceof Ln&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&cL(a,r.filters[l]),!0)}(n,e):void st();var t,r}function dL(n,e){const t=n.filters.concat(e);return Ln.create(t,n.op)}function hL(n){return n instanceof un?`${(e=n).field.canonicalString()} ${e.op} ${_v(e.value)}`:n instanceof Ln?function(e){return e.op.toString()+" {"+e.getFilters().map(hL).join(" ,")+"}"}(n):"Filter";var e}class bj extends un{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tj extends un{constructor(e,t){super(e,"in",t),this.keys=fL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sj extends un{constructor(e,t){super(e,"not-in",t),this.keys=fL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class Aj extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pI(t)&&fI(t.arrayValue,this.value)}}class pL extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fI(this.value.arrayValue,t)}}class Mj extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(fI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fI(this.value.arrayValue,t)}}class xj extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>fI(this.value.arrayValue,r))}}class Nj{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.dt=null}}function QR(n,e=null,t=[],r=[],i=null,a=null,l=null){return new Nj(n,e,t,r,i,a,l)}function Im(n){const e=Ye(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>YR(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),cI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_v(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_v(r)).join(",")),e.dt=t}return e.dt}function mI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Dj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!aL(n.startAt,e.startAt)&&aL(n.endAt,e.endAt)}function vS(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function wS(n,e){return n.filters.filter(t=>t instanceof un&&t.field.isEqual(e))}function gL(n,e,t){let r=mS,i=!0;for(const a of wS(n,e)){let l=mS,f=!0;switch(a.op){case"<":case"<=":l=Ij(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=mS}rL({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];rL({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function mL(n,e,t){let r=rp,i=!0;for(const a of wS(n,e)){let l=rp,f=!0;switch(a.op){case">=":case">":l=Cj(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=rp}iL({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];iL({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class kd{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=y,this.wt=null,this._t=null}}function yL(n,e,t,r,i,a,l,f){return new kd(n,e,t,r,i,a,l,f)}function Ev(n){return new kd(n)}function _L(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function JR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ES(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function XR(n){return null!==n.collectionGroup}function Cm(n){const e=Ye(n);if(null===e.wt){e.wt=[];const t=ES(e),r=JR(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new vv(t)),e.wt.push(new vv(Or.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new vv(Or.keyField(),a))}}}return e.wt}function Ys(n){const e=Ye(n);if(!e._t)if("F"===e.limitType)e._t=QR(e.path,e.collectionGroup,Cm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Cm(e))t.push(new vv(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new op(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new op(e.startAt.position,e.startAt.inclusive):null;e._t=QR(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function eP(n,e){e.getFirstInequalityField(),ES(n);const t=n.filters.concat([e]);return new kd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function IS(n,e,t){return new kd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yI(n,e){return mI(Ys(n),Ys(e))&&n.limitType===e.limitType}function vL(n){return`${Im(Ys(n))}|lt:${n.limitType}`}function tP(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>hL(r)).join(", ")}]`),cI(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_v(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_v(r)).join(",")),`Target(${t})`}(Ys(n))}; limitType=${n.limitType})`}function _I(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Cm(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=oL(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,Cm(t),r)||t.endAt&&!function(i,a,l){const f=oL(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,Cm(t),r)));var t,r}function wL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function EL(n){return(e,t)=>{let r=!1;for(const i of Cm(n)){const a=Rj(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Rj(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),y=l.data.field(i);return null!==f&&null!==y?sp(f,y):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}class Fd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ep(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return YF(this.inner)}size(){return this.innerSize}}const Pj=new er(Ze.comparator);function Ao(){return Pj}const IL=new er(Ze.comparator);function vI(...n){let e=IL;for(const t of n)e=e.insert(t.key,t);return e}function CL(n){let e=IL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Xl(){return wI()}function DL(){return wI()}function wI(){return new Fd(n=>n.toString(),(n,e)=>n.isEqual(e))}const Oj=new er(Ze.comparator),kj=new sr(Ze.comparator);function Yt(...n){let e=kj;for(const t of n)e=e.add(t);return e}const Fj=new sr(Vt);function nP(){return Fj}function bL(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dI(e)?"-0":e}}function TL(n){return{integerValue:""+n}}function SL(n,e){return $F(e)?TL(e):bL(n,e)}class CS{constructor(){this._=void 0}}function Lj(n,e,t){return n instanceof Iv?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&pS(i)&&(i=gS(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Dm?ML(n,e):n instanceof bm?xL(n,e):function(r,i){const a=AL(r,i),l=NL(a)+NL(r.gt);return qR(a)&&qR(r.gt)?TL(l):bL(r.serializer,l)}(n,e)}function Vj(n,e,t){return n instanceof Dm?ML(n,e):n instanceof bm?xL(n,e):t}function AL(n,e){return n instanceof Cv?qR(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Iv extends CS{}class Dm extends CS{constructor(e){super(),this.elements=e}}function ML(n,e){const t=RL(e);for(const r of n.elements)t.some(i=>Jl(i,r))||t.push(r);return{arrayValue:{values:t}}}class bm extends CS{constructor(e){super(),this.elements=e}}function xL(n,e){let t=RL(e);for(const r of n.elements)t=t.filter(i=>!Jl(i,r));return{arrayValue:{values:t}}}class Cv extends CS{constructor(e,t){super(),this.serializer=e,this.gt=t}}function NL(n){return kr(n.integerValue||n.doubleValue)}function RL(n){return pI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class EI{constructor(e,t){this.field=e,this.transform=t}}class Bj{constructor(e,t){this.version=e,this.transformResults=t}}class fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function DS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class bS{}function PL(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new bv(n.key,fr.none()):new Dv(n.key,n.data,fr.none());{const t=n.data,r=os.empty();let i=new sr(Or.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new Ld(n.key,r,new So(i.toArray()),fr.none())}}function jj(n,e,t){n instanceof Dv?function(r,i,a){const l=r.value.clone(),f=FL(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Ld?function(r,i,a){if(!DS(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=FL(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(kL(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function II(n,e,t,r){return n instanceof Dv?function(i,a,l,f){if(!DS(i.precondition,a))return l;const y=i.value.clone(),E=LL(i.fieldTransforms,f,a);return y.setAll(E),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ld?function(i,a,l,f){if(!DS(i.precondition,a))return l;const y=LL(i.fieldTransforms,f,a),E=a.data;return E.setAll(kL(i)),E.setAll(y),a.convertToFoundDocument(a.version,E).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(l=t,DS(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function $j(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=AL(r.transform,i||null);null!=a&&(null===t&&(t=os.empty()),t.set(r.field,a))}return t||null}function OL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&mv(t,r,(i,a)=>function Uj(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Dm&&r instanceof Dm||t instanceof bm&&r instanceof bm?mv(t.elements,r.elements,Jl):t instanceof Cv&&r instanceof Cv?Jl(t.gt,r.gt):t instanceof Iv&&r instanceof Iv);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Dv extends bS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ld extends bS{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function kL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function FL(n,e,t){const r=new Map;yt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,Vj(l,f,t[i]))}return r}function LL(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,Lj(a,l,e))}return r}class bv extends bS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rP extends bS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&jj(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=II(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=II(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=DL();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const y=PL(l,f);null!==y&&r.set(i.key,y),l.isValidDocument()||l.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&mv(this.mutations,e.mutations,(t,r)=>OL(t,r))&&mv(this.baseMutations,e.baseMutations,(t,r)=>OL(t,r))}}class sP{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){yt(e.mutations.length===r.length);let i=Oj;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new sP(e,t,r,i)}}class oP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Gj{constructor(e,t){this.count=e,this.unchangedNames=t}}var ei,yn;function VL(n){switch(n){default:return st();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function UL(n){if(void 0===n)return $r("GRPC error has no .code"),ce.UNKNOWN;switch(n){case ei.OK:return ce.OK;case ei.CANCELLED:return ce.CANCELLED;case ei.UNKNOWN:return ce.UNKNOWN;case ei.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case ei.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case ei.INTERNAL:return ce.INTERNAL;case ei.UNAVAILABLE:return ce.UNAVAILABLE;case ei.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case ei.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case ei.NOT_FOUND:return ce.NOT_FOUND;case ei.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case ei.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case ei.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case ei.ABORTED:return ce.ABORTED;case ei.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case ei.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case ei.DATA_LOSS:return ce.DATA_LOSS;default:return st()}}(yn=ei||(ei={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";class aP{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return TS}static getOrCreateInstance(){return null===TS&&(TS=new aP),TS}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let TS=null;function BL(){return new TextEncoder}const zj=new pv([4294967295,4294967295],0);function jL(n){const e=BL().encode(n),t=new VB;return t.update(e),new Uint8Array(t.digest())}function $L(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new pv([t,r],0),new pv([i,a],0)]}class uP{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new CI(`Invalid padding: ${t}`);if(r<0)throw new CI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new CI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new CI(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=pv.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(pv.fromNumber(r)));return 1===i.compare(zj)&&(i=new pv([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=jL(e),[r,i]=$L(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new uP(a,i,t);return r.forEach(f=>l.insert(f)),l}insert(e){if(0===this.It)return;const t=jL(e),[r,i]=$L(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class CI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class DI{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,bI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new DI(vt.min(),i,new er(Vt),Ao(),Yt())}}class bI{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new bI(r,t,Yt(),Yt(),Yt())}}class SS{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class HL{constructor(e,t){this.targetId=e,this.Vt=t}}class GL{constructor(e,t,r=Ci.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class zL{constructor(){this.St=0,this.Dt=qL(),this.Ct=Ci.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Yt(),t=Yt(),r=Yt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new bI(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=qL()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Wj{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ao(),this.zt=WL(),this.Wt=new er(Vt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const l=a.target;if(vS(l))if(0===i){const f=new Ze(l.path);this.Yt(r,f,or.newNoDocument(f,vt.min()))}else yt(1===i);else{const f=this.ie(r);if(f!==i){const y=this.re(e,f);0!==y&&(this.ee(r),this.Wt=this.Wt.insert(r,2===y?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=aP.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(E,T,M){var P,j,Z,me,xe,nt;const gt={localCacheCount:T,existenceFilterCount:M.count},ct=M.unchangedNames;return ct&&(gt.bloomFilter={applied:0===E,hashCount:null!==(P=ct?.hashCount)&&void 0!==P?P:0,bitmapLength:null!==(me=null===(Z=null===(j=ct?.bits)||void 0===j?void 0:j.bitmap)||void 0===Z?void 0:Z.length)&&void 0!==me?me:0,padding:null!==(nt=null===(xe=ct?.bits)||void 0===xe?void 0:xe.padding)&&void 0!==nt?nt:0}),gt}(y,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:l=0},hashCount:f=0}=r;let y,E;try{y=Od(a).toUint8Array()}catch(T){if(T instanceof JF)return nu("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw T}try{E=new uP(y,l,f)}catch(T){return nu(T instanceof CI?"BloomFilter error: ":"Applying bloom filter failed: ",T),1}return 0===E.It?1:i!==t-this.oe(e.targetId,E)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const l=this.Gt.ue(),f=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.vt(f)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,l)=>{const f=this.se(l);if(f){if(a.current&&vS(f.target)){const y=new Ze(f.target.path);null!==this.jt.get(y)||this.ae(l,y)||this.Yt(l,y,or.newNoDocument(y,e))}a.Mt&&(t.set(l,a.Ot()),a.Ft())}});let r=Yt();this.zt.forEach((a,l)=>{let f=!0;l.forEachWhile(y=>{const E=this.se(y);return!E||"TargetPurposeLimboResolution"===E.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.jt.forEach((a,l)=>l.setReadTime(e));const i=new DI(e,t,this.Wt,this.jt,r);return this.jt=Ao(),this.zt=WL(),this.Wt=new er(Vt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new zL,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new sr(Vt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new zL),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function WL(){return new er(Ze.comparator)}function qL(){return new er(Ze.comparator)}const qj={asc:"ASCENDING",desc:"DESCENDING"},Kj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zj={and:"AND",or:"OR"};class Yj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lP(n,e){return n.useProto3Json||cI(e)?e:{value:e}}function Tv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KL(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Qj(n,e){return Tv(n,e.toTimestamp())}function Hr(n){return yt(!!n),vt.fromTimestamp(function(e){const t=tp(e);return new hr(t.seconds,t.nanos)}(n))}function cP(n,e){return(t=n,new mn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ZL(n){const e=mn.fromString(n);return yt(iV(e)),e}function TI(n,e){return cP(n.databaseId,e.path)}function ec(n,e){const t=ZL(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(QL(t))}function dP(n,e){return cP(n.databaseId,e)}function YL(n){const e=ZL(n);return 4===e.length?mn.emptyPath():QL(e)}function SI(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QL(n){return yt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function JL(n,e,t){return{name:TI(n,e),fields:t.value.mapValue.fields}}function XL(n,e,t){const r=ec(n,e.name),i=Hr(e.updateTime),a=e.createTime?Hr(e.createTime):vt.min(),l=new os({mapValue:{fields:e.fields}}),f=or.newFoundDocument(r,i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function AI(n,e){let t;if(e instanceof Dv)t={update:JL(n,e.key,e.value)};else if(e instanceof bv)t={delete:TI(n,e.key)};else if(e instanceof Ld)t={update:JL(n,e.key,e.data),updateMask:s$(e.fieldMask)};else{if(!(e instanceof rP))return st();t={verify:TI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Iv)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Dm)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof bm)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Cv)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Qj(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function hP(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?fr.updateTime(Hr(i.updateTime)):void 0!==i.exists?fr.exists(i.exists):fr.none():fr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(yt("REQUEST_TIME"===l.setToServerValue),f=new Iv):"appendMissingElements"in l?f=new Dm(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new bm(l.removeAllFromArray.values||[]):"increment"in l?f=new Cv(a,l.increment):st();const y=Or.fromServerFormat(l.fieldPath);return new EI(y,f)}(n,i)):[];var i;if(e.update){const i=ec(n,e.update.name),a=new os({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new So((e.updateMask.fieldPaths||[]).map(E=>Or.fromServerFormat(E)));return new Ld(i,a,l,t,r)}return new Dv(i,a,t,r)}if(e.delete){const i=ec(n,e.delete);return new bv(i,t)}if(e.verify){const i=ec(n,e.verify);return new rP(i,t)}return st()}function eV(n,e){return{documents:[dP(n,e.path)]}}function fP(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=dP(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=dP(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0!==y.length)return rV(Ln.create(y,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(y){if(0!==y.length)return y.map(E=>{return{field:ap((T=E).field),direction:n$(T.dir)};var T})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=lP(n,e.limit);var f,y;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function tV(n){let e=YL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){yt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=function(T){const M=nV(T);return M instanceof Ln&&ZR(M)?M.getFilters():[M]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new vv(Sv((M=T).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let f=null;t.limit&&(f=function(T){let M;return M="object"==typeof T?T.value:T,cI(M)?null:M}(t.limit));let y=null;var T;t.startAt&&(y=new op((T=t.startAt).values||[],!!T.before));let E=null;return t.endAt&&(E=function(T){return new op(T.values||[],!T.before)}(t.endAt)),yL(e,i,l,a,f,"F",y,E)}function nV(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Sv(e.unaryFilter.field);return un.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Sv(e.unaryFilter.field);return un.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Sv(e.unaryFilter.field);return un.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Sv(e.unaryFilter.field);return un.create(a,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(n):void 0!==n.fieldFilter?un.create(Sv((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Ln.create(e.compositeFilter.filters.map(t=>nV(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return st()}}(e.compositeFilter.op))}(n):st();var e}function n$(n){return qj[n]}function r$(n){return Kj[n]}function i$(n){return Zj[n]}function ap(n){return{fieldPath:n.canonicalString()}}function Sv(n){return Or.fromServerFormat(n.fieldPath)}function rV(n){return n instanceof un?function(e){if("=="===e.op){if(tL(e.value))return{unaryFilter:{field:ap(e.field),op:"IS_NAN"}};if(eL(e.value))return{unaryFilter:{field:ap(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(tL(e.value))return{unaryFilter:{field:ap(e.field),op:"IS_NOT_NAN"}};if(eL(e.value))return{unaryFilter:{field:ap(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ap(e.field),op:r$(e.op),value:e.value}}}(n):n instanceof Ln?function(e){const t=e.getFilters().map(r=>rV(r));return 1===t.length?t[0]:{compositeFilter:{op:i$(e.op),filters:t}}}(n):st()}function s$(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iV(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Vd{constructor(e,t,r,i,a=vt.min(),l=vt.min(),f=Ci.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=y}withSequenceNumber(e){return new Vd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class sV{constructor(e){this.fe=e}}function oV(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:AS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:TI(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Tv(i,a.version.toTimestamp()),createTime:Tv(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Tm(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:Tm(e.version)}}var i,a;return r}function AS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Tm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Sm(n){const e=new hr(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function Am(n,e){const t=(e.baseMutations||[]).map(a=>hP(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>hP(n.fe,a)),i=hr.fromMillis(e.localWriteTimeMs);return new iP(e.batchId,i,t,r)}function MI(n){const e=Sm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Sm(n.lastLimboFreeSnapshotVersion):vt.min();let r;var i;return void 0!==n.query.documents?(yt(1===(i=n.query).documents.length),r=Ys(Ev(YL(i.documents[0])))):r=Ys(tV(n.query)),new Vd(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ci.fromBase64String(n.resumeToken))}function aV(n,e){const t=Tm(e.snapshotVersion),r=Tm(e.lastLimboFreeSnapshotVersion);let i;i=vS(e.target)?eV(n.fe,e.target):fP(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Im(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function pP(n){const e=tV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?IS(e,e.limit,"L"):e}function gP(n,e){return new oP(e.largestBatchId,hP(n.fe,e.overlayMutation))}function uV(n,e){const t=e.path.lastSegment();return[n,Ts(e.path.popLast()),t]}function lV(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Tm(r.readTime),documentKey:Ts(r.documentKey.path),largestBatchId:r.largestBatchId}}class a${getBundleMetadata(e,t){return cV(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Sm(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return cV(e).put({bundleId:(r=t).id,createTime:Tm(Hr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return dV(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:pP(i.bundledQuery),readTime:Sm(i.readTime)};var i})}saveNamedQuery(e,t){return dV(e).put({name:(r=t).name,readTime:Tm(Hr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function cV(n){return Vi(n,"bundles")}function dV(n){return Vi(n,"namedQueries")}class MS{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new MS(e,t.uid||"")}getOverlay(e,t){return xI(e).get(uV(this.userId,t)).next(r=>r?gP(this.serializer,r):null)}getOverlays(e,t){const r=Xl();return oe.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new oP(t,l);i.push(this.we(e,f))}),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ts(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(xI(e).J("collectionPathOverlayIndex",f))}),oe.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Xl(),a=Ts(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return xI(e).j("collectionPathOverlayIndex",l).next(f=>{for(const y of f){const E=gP(this.serializer,y);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Xl();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xI(e).X({index:"collectionGroupOverlayIndex",range:f},(y,E,T)=>{const M=gP(this.serializer,E);a.size()<i||M.largestBatchId===l?(a.set(M.getKey(),M),l=M.largestBatchId):T.done()}).next(()=>a)}we(e,t){return xI(e).put(function(r,i,a){const[l,f,y]=uV(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:y,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:AI(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function xI(n){return Vi(n,"documentOverlays")}class Mm{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(kr(e.integerValue));else if("doubleValue"in e){const r=kr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),dI(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Od(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?nL(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):st()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Ze.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function u$(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function hV(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=u$(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Mm.Ve=new Mm;class l${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=hV(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=hV(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class c${constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class d${constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class NI{constructor(){this.je=new l$,this.ze=new c$(this.je),this.We=new d$(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class xm{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new xm(this.indexId,this.documentKey,this.arrayValue,r)}}function up(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=fV(n.arrayValue,e.arrayValue),0!==t?t:(t=fV(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function fV(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class h${constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){yt(e.collectionGroup===this.collectionId);const t=jR(e);if(void 0!==t&&!this.en(t))return!1;const r=vm(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[a];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[l++],f))return!1}++a}for(;a<r.length;++a)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[a]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function pV(n){var e,t;if(yt(n instanceof un||n instanceof Ln),n instanceof un){if(n instanceof pL){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>un.create(n.field,"==",a)))||[];return Ln.create(i,"or")}return n}const r=n.filters.map(i=>pV(i));return Ln.create(r,n.op)}function f$(n){if(0===n.getFilters().length)return[];const e=_P(pV(n));return yt(gV(e)),mP(e)||yP(e)?[e]:e.getFilters()}function mP(n){return n instanceof un}function yP(n){return n instanceof Ln&&ZR(n)}function gV(n){return mP(n)||yP(n)||function(e){if(e instanceof Ln&&KR(e)){for(const t of e.getFilters())if(!mP(t)&&!yP(t))return!1;return!0}return!1}(n)}function _P(n){if(yt(n instanceof un||n instanceof Ln),n instanceof un)return n;if(1===n.filters.length)return _P(n.filters[0]);const e=n.filters.map(r=>_P(r));let t=Ln.create(e,n.op);return t=xS(t),gV(t)?t:(yt(t instanceof Ln),yt(wv(t)),yt(t.filters.length>1),t.filters.reduce((r,i)=>vP(r,i)))}function vP(n,e){let t;return yt(n instanceof un||n instanceof Ln),yt(e instanceof un||e instanceof Ln),t=n instanceof un?e instanceof un?Ln.create([n,e],"and"):mV(n,e):e instanceof un?mV(e,n):function(r,i){if(yt(r.filters.length>0&&i.filters.length>0),wv(r)&&wv(i))return dL(r,i.getFilters());const a=KR(r)?r:i,l=KR(r)?i:r,f=a.filters.map(y=>vP(y,l));return Ln.create(f,"or")}(n,e),xS(t)}function mV(n,e){if(wv(e))return dL(e,n.getFilters());{const t=e.filters.map(r=>vP(n,r));return Ln.create(t,"or")}}function xS(n){if(yt(n instanceof un||n instanceof Ln),n instanceof un)return n;const e=n.getFilters();if(1===e.length)return xS(e[0]);if(lL(n))return n;const t=e.map(i=>xS(i)),r=[];return t.forEach(i=>{i instanceof un?r.push(i):i instanceof Ln&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Ln.create(r,n.op)}class p${constructor(){this.rn=new wP}addToCollectionParentIndex(e,t){return this.rn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(fa.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(fa.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class wP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new sr(mn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new sr(mn.comparator)).toArray()}}const NS=new Uint8Array(0);class g${constructor(e,t){this.user=e,this.databaseId=t,this.on=new wP,this.un=new Fd(r=>Im(r),(r,i)=>mI(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:Ts(i)};return yV(e).put(a)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[FF(t),""],!1,!0);return yV(e).j(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Ql(l.parent))}return r})}addFieldIndex(e,t){const r=RS(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=PI(e);return a.next(f=>{l.put(lV(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=RS(e),i=PI(e),a=RI(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=RI(e);let i=!0;const a=new Map;return oe.forEach(this.cn(t),l=>this.an(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=Yt();const f=[];return oe.forEach(a,(y,E)=>{var T;Be("IndexedDbIndexManager",`Using index ${T=y,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(ct=>`${ct.fieldPath}:${ct.kind}`).join(",")}`} to execute ${Im(t)}`);const M=function(ct,Tt){const qt=jR(Tt);if(void 0===qt)return null;for(const fn of wS(ct,qt.fieldPath))switch(fn.op){case"array-contains-any":return fn.value.arrayValue.values||[];case"array-contains":return[fn.value]}return null}(E,y),P=function(ct,Tt){const qt=new Map;for(const fn of vm(Tt))for(const Ms of wS(ct,fn.fieldPath))switch(Ms.op){case"==":case"in":qt.set(fn.fieldPath.canonicalString(),Ms.value);break;case"not-in":case"!=":return qt.set(fn.fieldPath.canonicalString(),Ms.value),Array.from(qt.values())}return null}(E,y),j=function(ct,Tt){const qt=[];let fn=!0;for(const Ms of vm(Tt)){const Bm=0===Ms.kind?gL(ct,Ms.fieldPath,ct.startAt):mL(ct,Ms.fieldPath,ct.startAt);qt.push(Bm.value),fn&&(fn=Bm.inclusive)}return new op(qt,fn)}(E,y),Z=function(ct,Tt){const qt=[];let fn=!0;for(const Ms of vm(Tt)){const Bm=0===Ms.kind?mL(ct,Ms.fieldPath,ct.endAt):gL(ct,Ms.fieldPath,ct.endAt);qt.push(Bm.value),fn&&(fn=Bm.inclusive)}return new op(qt,fn)}(E,y),me=this.hn(y,E,j),xe=this.hn(y,E,Z),nt=this.ln(y,E,P),gt=this.fn(y.indexId,M,me,j.inclusive,xe,Z.inclusive,nt);return oe.forEach(gt,ct=>r.H(ct,t.limit).next(Tt=>{Tt.forEach(qt=>{const fn=Ze.fromSegments(qt.documentKey);l.has(fn)||(l=l.add(fn),f.push(fn))})}))}).next(()=>f)}return oe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:f$(Ln.create(e.filters,"and")).map(r=>QR(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,l,f){const y=(null!=t?t.length:1)*Math.max(r.length,a.length),E=y/(null!=t?t.length:1),T=[];for(let M=0;M<y;++M){const P=t?this.dn(t[M/E]):NS,j=this.wn(e,P,r[M%E],i),Z=this._n(e,P,a[M%E],l),me=f.map(xe=>this.wn(e,P,xe,!0));T.push(...this.createRange(j,Z,me))}return T}wn(e,t,r,i){const a=new xm(e,Ze.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new xm(e,Ze.empty(),t,r);return i?a.Je():a}an(e,t){const r=new h$(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.tn(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return oe.forEach(i,a=>this.an(e,a).next(l=>{l?0!==r&&l.fields.length<function(f){let y=new sr(Or.comparator),E=!1;for(const T of f.filters)for(const M of T.getFlattenedFilters())M.field.isKeyField()||("array-contains"===M.op||"array-contains-any"===M.op?E=!0:y=y.add(M.field));for(const T of f.orderBy)T.field.isKeyField()||(y=y.add(T.field));return y.size+(E?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new NI;for(const i of vm(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.He(i.kind);Mm.Ve._e(a,l)}return r.Qe()}dn(e){const t=new NI;return Mm.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new NI;return Mm.Ve._e(Em(this.databaseId,t),r.He(function(i){const a=vm(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new NI);let a=0;for(const l of vm(e)){const f=r[a++];for(const y of i)if(this.yn(t,l.fieldPath)&&pI(f))i=this.pn(i,l,f);else{const E=y.He(l.kind);Mm.Ve._e(f,E)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const y=new NI;y.seed(f.Qe()),Mm.Ve._e(l,y.He(t.kind)),a.push(y)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof un&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=RS(e),i=PI(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const l=[];return oe.forEach(a,f=>i.get([f.indexId,this.uid]).next(y=>{l.push(function(E,T){const M=T?new uI(T.sequenceNumber,new fa(Sm(T.readTime),new Ze(Ql(T.documentKey)),T.largestBatchId)):uI.empty(),P=E.fields.map(([j,Z])=>new cS(Or.fromServerFormat(j),Z));return new lS(E.indexId,E.collectionGroup,P,M)}(f,y))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Vt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=RS(e),a=PI(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>oe.forEach(f,y=>a.put(lV(y.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?oe.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),oe.forEach(f,y=>this.En(e,i,y).next(E=>{const T=this.An(a,y);return E.isEqual(T)?oe.resolve():this.vn(e,a,y,E,T)}))))})}Rn(e,t,r,i){return RI(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return RI(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=RI(e);let a=new sr(up);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,f)=>{a=a.add(new xm(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}An(e,t){let r=new sr(up);const i=this.mn(t,e);if(null==i)return r;const a=jR(t);if(null!=a){const l=e.data.field(a.fieldPath);if(pI(l))for(const f of l.arrayValue.values||[])r=r.add(new xm(t.indexId,e.key,this.dn(f),i))}else r=r.add(new xm(t.indexId,e.key,NS,i));return r}vn(e,t,r,i,a){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,y,E,T,M){const P=f.getIterator(),j=y.getIterator();let Z=yv(P),me=yv(j);for(;Z||me;){let xe=!1,nt=!1;if(Z&&me){const gt=E(Z,me);gt<0?nt=!0:gt>0&&(xe=!0)}else null!=Z?nt=!0:xe=!0;xe?(T(me),me=yv(j)):nt?(M(Z),Z=yv(P)):(Z=yv(P),me=yv(j))}}(i,a,up,f=>{l.push(this.Rn(e,t,r,f))},f=>{l.push(this.Pn(e,t,r,f))}),oe.waitFor(l)}Tn(e){let t=1;return PI(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>up(l,f)).filter((l,f,y)=>!f||0!==up(l,y[f-1]));const i=[];i.push(e);for(const l of r){const f=up(l,e),y=up(l,t);if(0===f)i[0]=e.Je();else if(f>0&&y<0)i.push(l),i.push(l.Je());else if(y>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,NS,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,NS,[]]))}return a}bn(e,t){return up(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(_V)}getMinOffset(e,t){return oe.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||st())).next(_V)}}function yV(n){return Vi(n,"collectionParents")}function RI(n){return Vi(n,"indexEntries")}function RS(n){return Vi(n,"indexConfiguration")}function PI(n){return Vi(n,"indexState")}function _V(n){yt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;$R(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new fa(e.readTime,e.documentKey,t)}const vV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ss{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ss(e,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function wV(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const y=r.X({range:l},(T,M,P)=>(f++,P.delete()));a.push(y.next(()=>{yt(1===f)}));const E=[];for(const T of t.mutations){const M=zF(e,T.key.path,t.batchId);a.push(i.delete(M)),E.push(T.key)}return oe.waitFor(a).next(()=>E)}function PS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}Ss.DEFAULT_COLLECTION_PERCENTILE=10,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ss.DEFAULT=new Ss(41943040,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ss.DISABLED=new Ss(-1,0,0);class OS{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){yt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new OS(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lp(e).X({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Av(e),l=lp(e);return l.add({}).next(f=>{yt("number"==typeof f);const y=new iP(f,t,r,i),E=function(P,j,Z){const me=Z.baseMutations.map(nt=>AI(P.fe,nt)),xe=Z.mutations.map(nt=>AI(P.fe,nt));return{userId:j,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:me,mutations:xe}}(this.serializer,this.userId,y),T=[];let M=new sr((P,j)=>Vt(P.canonicalString(),j.canonicalString()));for(const P of i){const j=zF(this.userId,P.key.path,f);M=M.add(P.key.path.popLast()),T.push(l.put(E)),T.push(a.put(j,nj))}return M.forEach(P=>{T.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.Vn[f]=y.keys()}),oe.waitFor(T).next(()=>y)})}lookupMutationBatch(e,t){return lp(e).get(t).next(r=>r?(yt(r.userId===this.userId),Am(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?oe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return lp(e).X({index:"userMutationsIndex",range:i},(l,f,y)=>{f.userId===this.userId&&(yt(f.batchId>=r),a=Am(this.serializer,f)),y.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return lp(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lp(e).j("userMutationsIndex",t).next(r=>r.map(i=>Am(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=hS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Av(e).X({range:i},(l,f,y)=>{const[E,T,M]=l,P=Ql(T);if(E===this.userId&&t.path.isEqual(P))return lp(e).get(M).next(j=>{if(!j)throw st();yt(j.userId===this.userId),a.push(Am(this.serializer,j))});y.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new sr(Vt);const i=[];return t.forEach(a=>{const l=hS(this.userId,a.path),f=IDBKeyRange.lowerBound(l),y=Av(e).X({range:f},(E,T,M)=>{const[P,j,Z]=E,me=Ql(j);P===this.userId&&a.path.isEqual(me)?r=r.add(Z):M.done()});i.push(y)}),oe.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=hS(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new sr(Vt);return Av(e).X({range:l},(y,E,T)=>{const[M,P,j]=y,Z=Ql(P);M===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(f=f.add(j)):T.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(lp(e).get(a).next(l=>{if(null===l)throw st();yt(l.userId===this.userId),r.push(Am(this.serializer,l))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return wV(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Av(e).X({range:r},(a,l,f)=>{if(a[0]===this.userId){const y=Ql(a[1]);i.push(y)}else f.done()}).next(()=>{yt(0===i.length)})})}containsKey(e,t){return EV(e,this.userId,t)}xn(e){return IV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function EV(n,e,t){const r=hS(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Av(n).X({range:a,Y:!0},(f,y,E)=>{const[T,M,P]=f;T===e&&M===i&&(l=!0),E.done()}).next(()=>l)}function lp(n){return Vi(n,"mutations")}function Av(n){return Vi(n,"documentMutations")}function IV(n){return Vi(n,"mutationQueues")}class Nm{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Nm(0)}static Mn(){return new Nm(-1)}}class m${constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Nm(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>vt.fromTimestamp(new hr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Mv(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(yt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Mv(e).X((l,f)=>{const y=MI(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,a.push(this.removeTargetData(e,y)))}).next(()=>oe.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Mv(e).X((r,i)=>{const a=MI(i);t(a)})}$n(e){return CV(e).get("targetGlobalKey").next(t=>(yt(null!==t),t))}On(e,t){return CV(e).put("targetGlobalKey",t)}Fn(e,t){return Mv(e).put(aV(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Im(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Mv(e).X({range:i,index:"queryTargetsIndex"},(l,f,y)=>{const E=MI(f);mI(t,E.target)&&(a=E,y.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=cp(e);return t.forEach(l=>{const f=Ts(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=cp(e);return oe.forEach(t,a=>{const l=Ts(a.path);return oe.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=cp(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=cp(e);let a=Yt();return i.X({range:r,Y:!0},(l,f,y)=>{const E=Ql(l[1]),T=new Ze(E);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=Ts(t.path),i=IDBKeyRange.bound([r],[FF(r)],!1,!0);let a=0;return cp(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,f],y,E)=>{0!==l&&(a++,E.done())}).next(()=>a>0)}le(e,t){return Mv(e).get(t).next(r=>r?MI(r):null)}}function Mv(n){return Vi(n,"targets")}function CV(n){return Vi(n,"targetGlobal")}function cp(n){return Vi(n,"targetDocuments")}function DV([n,e],[t,r]){const i=Vt(n,t);return 0===i?Vt(e,r):i}class y${constructor(e){this.Ln=e,this.buffer=new sr(DV),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();DV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Xf(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Jf(r)}yield t.Qn(3e5)}))}}class _${constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(pa.ct);const r=new y$(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(vV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vV):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,l,f,y,E;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,l=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,f=Date.now(),this.removeTargets(e,r,t))).next(M=>(a=M,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(E=Date.now(),UR()<=Xo.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(y-f)+`ms\n\tRemoved ${M} documents in `+(E-y)+`ms\nTotal Duration: ${E-T}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:M})))}}class v${constructor(e,t){this.db=e,this.garbageCollector=function TV(n,e){return new _$(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return kS(e,r)}removeReference(e,t,r){return kS(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return kS(e,t)}Xn(e,t){return function(r,i){let a=!1;return IV(r).Z(l=>EV(r,l,i).next(f=>(f&&(a=!0),oe.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(l,f)=>{if(f<=t){const y=this.Xn(e,l).next(E=>{if(!E)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,vt.min()),cp(e).delete([0,Ts(l.path)])))});i.push(y)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return kS(e,t)}Yn(e,t){const r=cp(e);let i,a=pa.ct;return r.X({index:"documentTargetsIndex"},([l,f],{path:y,sequenceNumber:E})=>{0===l?(a!==pa.ct&&t(new Ze(Ql(i)),a),a=E,i=y):a=pa.ct}).next(()=>{a!==pa.ct&&t(new Ze(Ql(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function kS(n,e){return cp(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ts(e.path),sequenceNumber:r}));var r}class SV{constructor(){this.changes=new Fd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,or.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class w${constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Rm(e).put(r)}removeEntry(e,t,r){return Rm(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],AS(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=or.newInvalidDocument(t);return Rm(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(OI(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:or.newInvalidDocument(t)};return Rm(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(OI(t))},(i,a)=>{r={document:this.ts(t,a),size:PS(a)}}).next(()=>r)}getEntries(e,t){let r=Ao();return this.ns(e,t,(i,a)=>{const l=this.ts(i,a);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=Ao(),i=new er(Ze.comparator);return this.ns(e,t,(a,l)=>{const f=this.ts(a,l);r=r.insert(a,f),i=i.insert(a,PS(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return oe.resolve();let i=new sr(NV);t.forEach(y=>i=i.add(y));const a=IDBKeyRange.bound(OI(i.first()),OI(i.last())),l=i.getIterator();let f=l.getNext();return Rm(e).X({index:"documentKeyIndex",range:a},(y,E,T)=>{const M=Ze.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;f&&NV(f,M)<0;)r(f,null),f=l.getNext();f&&f.isEqual(M)&&(r(f,E),f=l.hasNext()?l.getNext():null),f?T.G(OI(f)):T.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),AS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rm(e).j(IDBKeyRange.bound(l,f,!0)).next(y=>{let E=Ao();for(const T of y){const M=this.ts(Ze.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);M.isFoundDocument()&&(_I(t,M)||i.has(M.key))&&(E=E.insert(M.key,M))}return E})}getAllFromCollectionGroup(e,t,r,i){let a=Ao();const l=xV(t,r),f=xV(t,fa.max());return Rm(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(y,E,T)=>{const M=this.ts(Ze.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);a=a.insert(M.key,M),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(e){return new E$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return MV(e).get("remoteDocumentGlobalKey").next(t=>(yt(!!t),t))}Zn(e,t){return MV(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function o$(n,e){let t;if(e.document)t=XL(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),i=Sm(e.noDocument.readTime);t=or.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Ze.fromSegments(e.unknownDocument.path),i=Sm(e.unknownDocument.version);t=or.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new hr(r[0],r[1]);return vt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return or.newInvalidDocument(e)}}function AV(n){return new w$(n)}class E$ extends SV{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Fd(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new sr((a,l)=>Vt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.us.get(a);if(t.push(this.os.removeEntry(e,a,f.readTime)),l.isValidDocument()){const y=oV(this.os.serializer,l);i=i.add(a.path.popLast());const E=PS(y);r+=E-f.size,t.push(this.os.addEntry(e,a,y))}else if(r-=f.size,this.trackRemovals){const y=oV(this.os.serializer,l.convertToNoDocument(vt.min()));t.push(this.os.addEntry(e,a,y))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,l)=>{this.us.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function MV(n){return Vi(n,"remoteDocumentGlobal")}function Rm(n){return Vi(n,"remoteDocumentsV14")}function OI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xV(n,e){const t=e.documentKey.path.toArray();return[n,AS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function NV(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Vt(t[a],r[a]),i)return i;return i=Vt(t.length,r.length),i||(i=Vt(t[t.length-2],r[r.length-2]),i||Vt(t[t.length-1],r[r.length-1]))}class I${constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class RV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&II(r.mutation,i,So.empty(),hr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=Xl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=vI();return a.forEach((f,y)=>{l=l.insert(f,y.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Xl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=Ao();const l=wI(),f=wI();return t.forEach((y,E)=>{const T=r.get(E.key);i.has(E.key)&&(void 0===T||T.mutation instanceof Ld)?a=a.insert(E.key,E):void 0!==T?(l.set(E.key,T.mutation.getFieldMask()),II(T.mutation,E,T.mutation.getFieldMask(),hr.now())):l.set(E.key,So.empty())}),this.recalculateAndSaveOverlays(e,a).next(y=>(y.forEach((E,T)=>l.set(E,T)),t.forEach((E,T)=>{var M;return f.set(E,new I$(T,null!==(M=l.get(E))&&void 0!==M?M:null))}),f))}recalculateAndSaveOverlays(e,t){const r=wI();let i=new er((l,f)=>l-f),a=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(y=>{const E=t.get(y);if(null===E)return;let T=r.get(y)||So.empty();T=f.applyToLocalView(E,T),r.set(y,T);const M=(i.get(f.batchId)||Yt()).add(y);i=i.insert(f.batchId,M)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),E=y.key,T=y.value,M=DL();T.forEach(P=>{if(!a.has(P)){const j=PL(t.get(P),r.get(P));null!==j&&M.set(P,j),a=a.add(P)}}),l.push(this.documentOverlayCache.saveOverlays(e,E,M))}return oe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):XR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):oe.resolve(Xl());let f=-1,y=a;return l.next(E=>oe.forEach(E,(T,M)=>(f<M.largestBatchId&&(f=M.largestBatchId),a.get(T)?oe.resolve():this.remoteDocumentCache.getEntry(e,T).next(P=>{y=y.insert(T,P)}))).next(()=>this.populateOverlays(e,E,a)).next(()=>this.computeViews(e,y,E,Yt())).next(T=>({batchId:f,changes:CL(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let i=vI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=vI();return this.indexManager.getCollectionParents(e,i).next(l=>oe.forEach(l,f=>{const y=(E=t,T=f.child(i),new kd(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,T;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(E=>{E.forEach((T,M)=>{a=a.insert(T,M)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,y)=>{const E=y.getKey();null===a.get(E)&&(a=a.insert(E,or.newInvalidDocument(E)))});let l=vI();return a.forEach((f,y)=>{const E=i.get(f);void 0!==E&&II(E.mutation,y,So.empty(),hr.now()),_I(t,y)&&(l=l.insert(f,y))}),l})}}class C${constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return oe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Hr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:pP(r.bundledQuery),readTime:Hr(r.readTime)}),oe.resolve();var r}}class D${constructor(){this.overlays=new er(Ze.comparator),this.ls=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Xl();return oe.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=Xl(),a=t.length+1,l=new Ze(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const y=f.getNext().value,E=y.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===a&&y.largestBatchId>r&&i.set(y.getKey(),y)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new er((E,T)=>E-T);const l=this.overlays.getIterator();for(;l.hasNext();){const E=l.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let T=a.get(E.largestBatchId);null===T&&(T=Xl(),a=a.insert(E.largestBatchId,T)),T.set(E.getKey(),E)}}const f=Xl(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((E,T)=>f.set(E,T)),!(f.size()>=i)););return oe.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new oP(t,r));let a=this.ls.get(t);void 0===a&&(a=Yt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class EP{constructor(){this.fs=new sr(Ui.ds),this.ws=new sr(Ui._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ui(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ui(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ze(new mn([])),r=new Ui(t,e),i=new Ui(t,e+1),a=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),a.push(l.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ze(new mn([])),r=new Ui(t,e),i=new Ui(t,e+1);let a=Yt();return this.ws.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Ui(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ui{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ze.comparator(e.key,t.key)||Vt(e.As,t.As)}static _s(e,t){return Vt(e.As,t.As)||Ze.comparator(e.key,t.key)}}class b${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new sr(Ui.ds)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const l=new iP(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.Rs=this.Rs.add(new Ui(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,t){return oe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ui(t,0),i=new Ui(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],l=>{const f=this.Ps(l.As);a.push(f)}),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new sr(Vt);return t.forEach(i=>{const a=new Ui(i,0),l=new Ui(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,l],f=>{r=r.add(f.As)})}),oe.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ze.isDocumentKey(a)||(a=a.child(""));const l=new Ui(new Ze(a),0);let f=new sr(Vt);return this.Rs.forEachWhile(y=>{const E=y.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(f=f.add(y.As)),!0)},l),oe.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){yt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return oe.forEach(t.mutations,i=>{const a=new Ui(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ui(t,0),i=this.Rs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class T${constructor(e){this.Ds=e,this.docs=new er(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():or.newInvalidDocument(t))}getEntries(e,t){let r=Ao();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():or.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Ao();const l=t.path,f=new Ze(l.child("")),y=this.docs.getIteratorFrom(f);for(;y.hasNext();){const{key:E,value:{document:T}}=y.getNext();if(!l.isPrefixOf(E.path))break;E.path.length>l.length+1||$R(VF(T),r)<=0||(i.has(T.key)||_I(t,T))&&(a=a.insert(T.key,T.mutableCopy()))}return oe.resolve(a)}getAllFromCollectionGroup(e,t,r,i){st()}Cs(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new S$(this)}getSize(e){return oe.resolve(this.size)}}class S$ extends SV{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class A${constructor(e){this.persistence=e,this.xs=new Fd(t=>Im(t),mI),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new EP,this.targetCount=0,this.Ms=Nm.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),oe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Nm(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Fn(t),oe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),oe.waitFor(a).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),oe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.ks.containsKey(t))}}class IP{constructor(e,t){this.$s={},this.overlays={},this.Os=new pa(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new A$(this),this.indexManager=new p$,this.remoteDocumentCache=new T$(r=>this.referenceDelegate.Ls(r)),this.serializer=new sV(t),this.qs=new C$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new D$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new b$(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new M$(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return oe.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class M$ extends BF{constructor(e){super(),this.currentSequenceNumber=e}}class FS{constructor(e){this.persistence=e,this.Qs=new EP,this.js=null}static zs(e){return new FS(e)}get Ws(){if(this.js)return this.js;throw st()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ws,r=>{const i=Ze.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,vt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return oe.or([()=>oe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class x${constructor(e){this.serializer=e}O(e,t,r,i){const a=new dS("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",GF,{unique:!0}),f.createObjectStore("documentMutations"),PV(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),PV(e)),l=l.next(()=>function(f){const y=f.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",E)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,y){return y.store("mutations").j().next(E=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",GF,{unique:!0});const T=y.store("mutations"),M=E.map(P=>T.put(P));return oe.waitFor(M)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(a))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:pj});y.createIndex("collectionPathOverlayIndex",gj,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",mj,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:rj});y.createIndex("documentKeyIndex",ij),y.createIndex("collectionGroupIndex",sj)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:cj}).createIndex("sequenceNumberIndex",dj,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:hj}).createIndex("documentKeyIndex",fj,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=PS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>oe.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(f=>oe.forEach(f,y=>{yt(y.userId===a.userId);const E=Am(this.serializer,y);return wV(e,a.userId,E).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((l,f)=>{const y=new mn(l),E=[0,Ts(y)];a.push(t.get(E).next(T=>T?oe.resolve():t.put({targetId:0,path:Ts(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:lj});const r=t.store("collectionParents"),i=new wP,a=l=>{if(i.add(l)){const f=l.lastSegment(),y=l.popLast();return r.put({collectionId:f,parent:Ts(y)})}};return t.store("remoteDocuments").X({Y:!0},(l,f)=>{const y=new mn(l);return a(y.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,f,y],E)=>{const T=Ql(f);return a(T.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=MI(i),l=aV(this.serializer,a);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,l)=>{const f=t.store("remoteDocumentsV14"),y=(E=l,E.document?new Ze(mn.fromString(E.document.name).popFirst(5)):E.noDocument?Ze.fromSegments(E.noDocument.path):E.unknownDocument?Ze.fromSegments(E.unknownDocument.path):st()).path.toArray();var E;const T={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(T))}).next(()=>oe.waitFor(i))}si(e,t){const r=t.store("mutations"),i=AV(this.serializer),a=new IP(FS.zs,this.serializer.fe);return r.j().next(l=>{const f=new Map;return l.forEach(y=>{var E;let T=null!==(E=f.get(y.userId))&&void 0!==E?E:Yt();Am(this.serializer,y).keys().forEach(M=>T=T.add(M)),f.set(y.userId,T)}),oe.forEach(f,(y,E)=>{const T=new Li(E),M=MS.de(this.serializer,T),P=a.getIndexManager(T),j=OS.de(T,this.serializer,P,a.referenceDelegate);return new RV(i,j,M,P).recalculateAndSaveOverlaysForDocumentKeys(new zR(t,pa.ct),y).next()})})}}function PV(n){n.createObjectStore("targetDocuments",{keyPath:aj}).createIndex("documentTargetsIndex",uj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",oj,{unique:!0}),n.createObjectStore("targetGlobal")}const CP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class DP{constructor(e,t,r,i,a,l,f,y,E,T,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=l,this.document=f,this.ri=E,this.oi=T,this.ui=M,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=P=>Promise.resolve(),!DP.D())throw new Ne(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new v$(this,i),this.di=t+"main",this.serializer=new sV(y),this.wi=new tl(this.di,this.ui,new x$(this.serializer)),this.Bs=new m$(this.referenceDelegate,this.serializer),this.remoteDocumentCache=AV(this.serializer),this.qs=new a$,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===T&&$r("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,CP);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new pa(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>VS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Xf(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return kI(e).get("owner").next(t=>oe.resolve(this.Ri(t)))}Pi(e){return VS(e).delete(this.clientId)}bi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Vi(r,"clientMetadata");return i.j().next(a=>{const l=e.Si(a,18e5),f=a.filter(y=>-1===l.indexOf(y));return oe.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?oe.resolve(!0):kI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,CP);return!1}}return!(!this.networkEnabled||!this.inForeground)||VS(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new zR(t,pa.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>VS(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return OS.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new g$(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return MS.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.ui)?_j:14===l?KF:13===l?qF:12===l?yj:11===l?WF:void st();var l;let f;return this.wi.runTransaction(e,i,a,y=>(f=new zR(y,this.Os?this.Os.next():pa.ct),"readwrite-primary"===t?this.Ti(f).next(E=>!!E||this.Ei(f)).next(E=>{if(!E)throw $r(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ne(ce.FAILED_PRECONDITION,UF);return r(f)}).next(E=>this.vi(f).next(()=>E)):this.Oi(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}Oi(e){return kI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ce.FAILED_PRECONDITION,CP)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kI(e).put("owner",t)}static D(){return tl.D()}Ai(e){const t=kI(e);return t.get("owner").next(r=>this.Ri(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&($r(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,k.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return $r("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){$r("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kI(n){return Vi(n,"owner")}function VS(n){return Vi(n,"clientMetadata")}function bP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class TP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Yt(),i=Yt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new TP(e,t.fromCache,r,i)}}class OV{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(_L(t))return oe.resolve(null);let r=Ys(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=IS(t,null,"F"),r=Ys(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Yt(...a);return this.Ui.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(y=>{const E=this.ji(t,f);return this.zi(t,E,l,y.readTime)?this.Ki(e,IS(t,null,"F")):this.Wi(e,E,t,y)}))})))}Gi(e,t,r,i){return _L(t)||i.isEqual(vt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const l=this.ji(t,a);return this.zi(t,l,r,i)?this.Qi(e,t):(UR()<=Xo.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),tP(t)),this.Wi(e,l,t,LF(i,-1)))})}ji(e,t){let r=new sr(EL(e));return t.forEach((i,a)=>{_I(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return UR()<=Xo.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",tP(t)),this.Ui.getDocumentsMatchingQuery(e,t,fa.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class N${constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new er(Vt),this.Yi=new Fd(a=>Im(a),mI),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RV(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function kV(n,e,t,r){return new N$(n,e,t,r)}function FV(n,e){return SP.apply(this,arguments)}function SP(){return SP=(0,ye.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let y=Yt();for(const E of i){l.push(E.batchId);for(const T of E.mutations)y=y.add(T.key)}for(const E of a){f.push(E.batchId);for(const T of E.mutations)y=y.add(T.key)}return t.localDocuments.getDocuments(r,y).next(E=>({er:E,removedBatchIds:l,addedBatchIds:f}))})})}),SP.apply(this,arguments)}function LV(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function VV(n,e,t){let r=Yt(),i=Yt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Ao();return t.forEach((f,y)=>{const E=a.get(f);y.isFoundDocument()!==E.isFoundDocument()&&(i=i.add(f)),y.isNoDocument()&&y.version.isEqual(vt.min())?(e.removeEntry(f,y.readTime),l=l.insert(f,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||0===y.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(y),l=l.insert(f,y)):Be("LocalStore","Ignoring outdated watch update for ",f,". Current version:",E.version," Watch version:",y.version)}),{nr:l,sr:i}})}function O$(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xv(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,oe.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new Vd(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Nv(n,e,t){return AP.apply(this,arguments)}function AP(){return AP=(0,ye.Z)(function*(n,e,t){const r=Ye(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Xf(l))throw l;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),AP.apply(this,arguments)}function US(n,e,t){const r=Ye(n);let i=vt.min(),a=Yt();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,y,E){const T=Ye(f),M=T.Yi.get(E);return void 0!==M?oe.resolve(T.Ji.get(M)):T.Bs.getTargetData(y,E)}(r,l,Ys(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,f.targetId).next(y=>{a=y})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:vt.min(),t?a:Yt())).next(f=>(jV(r,wL(e),f),{documents:f,ir:a})))}function UV(n,e){const t=Ye(n),r=Ye(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(l=>l?l.target:null))}function BV(n,e){const t=Ye(n),r=t.Xi.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,LF(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(jV(t,e,i),i))}function jV(n,e,t){let r=n.Xi.get(e)||vt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function MP(){return MP=(0,ye.Z)(function*(n,e,t,r){const i=Ye(n);let a=Yt(),l=Ao();for(const E of t){const T=e.rr(E.metadata.name);E.document&&(a=a.add(T));const M=e.ur(E);M.setReadTime(e.cr(E.metadata.readTime)),l=l.insert(T,M)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),y=yield xv(i,(E=r,Ys(Ev(mn.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>VV(E,f,l).next(T=>(f.apply(E),T)).next(T=>i.Bs.removeMatchingKeysForTargetId(E,y.targetId).next(()=>i.Bs.addMatchingKeys(E,a,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(E,T.nr,T.sr)).next(()=>T.nr)))}),MP.apply(this,arguments)}function F$(n,e){return xP.apply(this,arguments)}function xP(){return xP=(0,ye.Z)(function*(n,e,t=Yt()){const r=yield xv(n,Ys(pP(e.bundledQuery))),i=Ye(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Hr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(a,e);const f=r.withResumeToken(Ci.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(a,f).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),xP.apply(this,arguments)}function $V(n,e){return`firestore_clients_${n}_${e}`}function HV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function NP(n,e){return`firestore_targets_${n}_${e}`}class BS{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ne(i.error.code,i.error.message))),l?new BS(e,t,i.state,a):($r("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class FI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ne(r.error.code,r.error.message))),a?new FI(e,r.state,i):($r("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=nP();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=$F(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new jS(e,a):($r("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class RP{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new RP(t.clientId,t.onlineState):($r("SharedClientState",`Failed to parse online state: ${e}`),null)}}class PP{constructor(){this.activeTargetIds=nP()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OP{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new er(Vt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=$V(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new PP),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem($V(e.persistenceKey,i));if(a){const l=jS.ar(i,a);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(NP(this.persistenceKey,e));if(r){const i=FI.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(NP(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void $r("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let l=pa.ct;if(null!=a)try{const f=JSON.parse(a);yt("number"==typeof f),l=f}catch(f){$r("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==pa.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new BS(this.currentUser,e,t,r),a=HV(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=HV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=NP(this.persistenceKey,e),a=new FI(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return jS.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return BS.ar(new Li(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return FI.ar(i,t)}br(e){return RP.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),l=[],f=[];return a.forEach(y=>{i.has(y)||l.push(y)}),i.forEach(y=>{a.has(y)||f.push(y)}),this.syncEngine.Wr(l,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=nP();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class GV{constructor(){this.Hr=new PP,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new PP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class L${Yr(e){}shutdown(){}}class zV{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let $S=null;function kP(){return null===$S?$S=268435456+Math.round(2147483648*Math.random()):$S++,"0x"+$S.toString(16)}const V$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U${constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const As="WebChannelConnection";class B$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const l=kP(),f=this.To(e,t);Be("RestConnection",`Sending RPC '${e}' ${l}:`,f,r);const y={};return this.Eo(y,i,a),this.Ao(e,f,y,r).then(E=>(Be("RestConnection",`Received RPC '${e}' ${l}: `,E),E),E=>{throw nu("RestConnection",`RPC '${e}' ${l} failed with error: `,E,"url: ",f,"request:",r),E})}vo(e,t,r,i,a,l){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+gv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${V$[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=kP();return new Promise((l,f)=>{const y=new LB;y.setWithCredentials(!0),y.listenOnce(OB.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case VR.NO_ERROR:const T=y.getResponseJson();Be(As,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(T)),l(T);break;case VR.TIMEOUT:Be(As,`RPC '${e}' ${a} timed out`),f(new Ne(ce.DEADLINE_EXCEEDED,"Request time out"));break;case VR.HTTP_ERROR:const M=y.getStatus();if(Be(As,`RPC '${e}' ${a} failed with status:`,M,"response text:",y.getResponseText()),M>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const j=P?.error;if(j&&j.status&&j.message){const Z=function(me){const xe=me.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(xe)>=0?xe:ce.UNKNOWN}(j.status);f(new Ne(Z,j.message))}else f(new Ne(ce.UNKNOWN,"Server responded with status "+y.getStatus()))}else f(new Ne(ce.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Be(As,`RPC '${e}' ${a} completed.`)}});const E=JSON.stringify(i);Be(As,`RPC '${e}' ${a} sending request:`,i),y.send(t,"POST",E,r,15)})}Ro(e,t,r){const i=kP(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=RB(),f=PB(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;void 0!==E&&(y.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(y.xmlHttpFactory=new FB({})),this.Eo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const T=a.join("");Be(As,`Creating RPC '${e}' stream ${i}: ${T}`,y);const M=l.createWebChannel(T,y);let P=!1,j=!1;const Z=new U$({ro:xe=>{j?Be(As,`Not sending because RPC '${e}' stream ${i} is closed:`,xe):(P||(Be(As,`Opening RPC '${e}' stream ${i} transport.`),M.open(),P=!0),Be(As,`RPC '${e}' stream ${i} sending:`,xe),M.send(xe))},oo:()=>M.close()}),me=(xe,nt,gt)=>{xe.listen(nt,ct=>{try{gt(ct)}catch(Tt){setTimeout(()=>{throw Tt},0)}})};return me(M,uS.EventType.OPEN,()=>{j||Be(As,`RPC '${e}' stream ${i} transport opened.`)}),me(M,uS.EventType.CLOSE,()=>{j||(j=!0,Be(As,`RPC '${e}' stream ${i} transport closed`),Z.wo())}),me(M,uS.EventType.ERROR,xe=>{j||(j=!0,nu(As,`RPC '${e}' stream ${i} transport errored:`,xe),Z.wo(new Ne(ce.UNAVAILABLE,"The operation could not be completed")))}),me(M,uS.EventType.MESSAGE,xe=>{var nt;if(!j){const gt=xe.data[0];yt(!!gt);const Tt=gt.error||(null===(nt=gt[0])||void 0===nt?void 0:nt.error);if(Tt){Be(As,`RPC '${e}' stream ${i} received error:`,Tt);const qt=Tt.status;let fn=function(Bm){const hU=ei[Bm];if(void 0!==hU)return UL(hU)}(qt),Ms=Tt.message;void 0===fn&&(fn=ce.INTERNAL,Ms="Unknown error status: "+qt+" with message "+Tt.message),j=!0,Z.wo(new Ne(fn,Ms)),M.close()}else Be(As,`RPC '${e}' stream ${i} received:`,gt),Z._o(gt)}}),me(f,kB.STAT_EVENT,xe=>{xe.stat===NF.PROXY?Be(As,`RPC '${e}' stream ${i} detected buffering proxy`):xe.stat===NF.NOPROXY&&Be(As,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{Z.fo()},0),Z}}function WV(){return typeof window<"u"?window:null}function HS(){return typeof document<"u"?document:null}function LI(n){return new Yj(n,!0)}class FP{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class qV{constructor(e,t,r,i,a,l,f,y){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new FP(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ye.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ye.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?($r(t.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Ne(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,ye.Z)(function*(){e.state=0,e.start()}))}tu(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class j$ extends qV{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Xj(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:st(),i=e.targetChange.targetIds||[],a=function(y,E){return y.useProto3Json?(yt(void 0===E||"string"==typeof E),Ci.fromBase64String(E||"")):(yt(void 0===E||E instanceof Uint8Array),Ci.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(y){const E=void 0===y.code?ce.UNKNOWN:UL(y.code);return new Ne(E,y.message||"")}(l);t=new GL(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=ec(n,r.document.name),a=Hr(r.document.updateTime),l=r.document.createTime?Hr(r.document.createTime):vt.min(),f=new os({mapValue:{fields:r.document.fields}}),y=or.newFoundDocument(i,a,l,f);t=new SS(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,i=ec(n,r.document),a=r.readTime?Hr(r.readTime):vt.min(),l=or.newNoDocument(i,a);t=new SS([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=ec(n,r.document);t=new SS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,{count:i=0,unchangedNames:a}=r,l=new Gj(i,a);t=new HL(r.targetId,l)}}var y;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return vt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?vt.min():a.readTime?Hr(a.readTime):vt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=SI(this.serializer),t.addTarget=function(i,a){let l;const f=a.target;if(l=vS(f)?{documents:eV(i,f)}:{query:fP(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=KL(i,a.resumeToken);const y=lP(i,a.expectedCount);null!==y&&(l.expectedCount=y)}else if(a.snapshotVersion.compareTo(vt.min())>0){l.readTime=Tv(i,a.snapshotVersion.toTimestamp());const y=lP(i,a.expectedCount);null!==y&&(l.expectedCount=y)}return l}(this.serializer,e);const r=function t$(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=SI(this.serializer),t.removeTarget=e,this.Wo(t)}}class $$ extends qV{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function e$(n,e){return n&&n.length>0?(yt(void 0!==e),n.map(t=>function(r,i){let a=Hr(r.updateTime?r.updateTime:i);return a.isEqual(vt.min())&&(a=Hr(i)),new Bj(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Hr(e.commitTime);return this.listener.cu(r,t)}return yt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=SI(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>AI(this.serializer,r))};this.Wo(t)}}class H$ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(ce.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.vo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(ce.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class z${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?($r(t),this.mu=!1):Be("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class W${constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(f=>{r.enqueueAndForget((0,ye.Z)(function*(){var y;dp(l)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,ye.Z)(function*(E){const T=Ye(E);T.vu.add(4),yield Rv(T),T.bu.set("Unknown"),T.vu.delete(4),yield VI(T)}),function(E){return y.apply(this,arguments)})(l))}))}),this.bu=new z$(r,i)}}function VI(n){return VP.apply(this,arguments)}function VP(){return VP=(0,ye.Z)(function*(n){if(dp(n))for(const e of n.Ru)yield e(!0)}),VP.apply(this,arguments)}function Rv(n){return UP.apply(this,arguments)}function UP(){return UP=(0,ye.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),UP.apply(this,arguments)}function GS(n,e){const t=Ye(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),$P(t)?jP(t):Ov(t).Ko()&&BP(t,e))}function UI(n,e){const t=Ye(n),r=Ov(t);t.Au.delete(e),r.Ko()&&KV(t,e),0===t.Au.size&&(r.Ko()?r.jo():dp(t)&&t.bu.set("Unknown"))}function BP(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ov(n).su(e)}function KV(n,e){n.Vu.qt(e),Ov(n).iu(e)}function jP(n){n.Vu=new Wj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Ov(n).start(),n.bu.gu()}function $P(n){return dp(n)&&!Ov(n).Uo()&&n.Au.size>0}function dp(n){return 0===Ye(n).vu.size}function ZV(n){n.Vu=void 0}function q$(n){return HP.apply(this,arguments)}function HP(){return HP=(0,ye.Z)(function*(n){n.Au.forEach((e,t)=>{BP(n,e)})}),HP.apply(this,arguments)}function K$(n,e){return GP.apply(this,arguments)}function GP(){return GP=(0,ye.Z)(function*(n,e){ZV(n),$P(n)?(n.bu.Iu(e),jP(n)):n.bu.set("Unknown")}),GP.apply(this,arguments)}function Z$(n,e,t){return zP.apply(this,arguments)}function zP(){return zP=(0,ye.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof GL&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield zS(n,r)}else if(e instanceof SS?n.Vu.Ht(e):e instanceof HL?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(vt.min()))try{const r=yield LV(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Vu.ce(a);return l.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const E=i.Au.get(y);E&&i.Au.set(y,E.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach((f,y)=>{const E=i.Au.get(f);if(!E)return;i.Au.set(f,E.withResumeToken(Ci.EMPTY_BYTE_STRING,E.snapshotVersion)),KV(i,f);const T=new Vd(E.target,f,y,E.sequenceNumber);BP(i,T)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield zS(n,r)}var r}),zP.apply(this,arguments)}function zS(n,e,t){return WP.apply(this,arguments)}function WP(){return WP=(0,ye.Z)(function*(n,e,t){if(!Xf(e))throw e;n.vu.add(1),yield Rv(n),n.bu.set("Offline"),t||(t=()=>LV(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield VI(n)}))}),WP.apply(this,arguments)}function YV(n,e){return e().catch(t=>zS(n,t,e))}function Pv(n){return qP.apply(this,arguments)}function qP(){return qP=(0,ye.Z)(function*(n){const e=Ye(n),t=hp(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Y$(e);)try{const i=yield O$(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,Q$(e,i)}catch(i){yield zS(e,i)}QV(e)&&JV(e)}),qP.apply(this,arguments)}function Y$(n){return dp(n)&&n.Eu.length<10}function Q$(n,e){n.Eu.push(e);const t=hp(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function QV(n){return dp(n)&&!hp(n).Uo()&&n.Eu.length>0}function JV(n){hp(n).start()}function J$(n){return KP.apply(this,arguments)}function KP(){return KP=(0,ye.Z)(function*(n){hp(n).hu()}),KP.apply(this,arguments)}function X$(n){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,ye.Z)(function*(n){const e=hp(n);for(const t of n.Eu)e.uu(t.mutations)}),ZP.apply(this,arguments)}function eH(n,e,t){return YP.apply(this,arguments)}function YP(){return YP=(0,ye.Z)(function*(n,e,t){const r=n.Eu.shift(),i=sP.from(r,e,t);yield YV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Pv(n)}),YP.apply(this,arguments)}function tH(n,e){return QP.apply(this,arguments)}function QP(){return QP=(0,ye.Z)(function*(n,e){var t;e&&hp(n).ou&&(yield(t=(0,ye.Z)(function*(r,i){if(VL(a=i.code)&&a!==ce.ABORTED){const l=r.Eu.shift();hp(r).Qo(),yield YV(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Pv(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),QV(n)&&JV(n)}),QP.apply(this,arguments)}function XV(n,e){return JP.apply(this,arguments)}function JP(){return JP=(0,ye.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=dp(t);t.vu.add(3),yield Rv(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield VI(t)}),JP.apply(this,arguments)}function XP(n,e){return eO.apply(this,arguments)}function eO(){return eO=(0,ye.Z)(function*(n,e){const t=Ye(n);e?(t.vu.delete(2),yield VI(t)):e||(t.vu.add(2),yield Rv(t),t.bu.set("Unknown"))}),eO.apply(this,arguments)}function Ov(n){return n.Su||(n.Su=function(e,t,r){const i=Ye(e);return i.fu(),new j$(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:q$.bind(null,n),ao:K$.bind(null,n),nu:Z$.bind(null,n)}),n.Ru.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Su.Qo(),$P(n)?jP(n):n.bu.set("Unknown")):(yield n.Su.stop(),ZV(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function hp(n){return n.Du||(n.Du=function(e,t,r){const i=Ye(e);return i.fu(),new $$(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:J$.bind(null,n),ao:tH.bind(null,n),au:X$.bind(null,n),cu:eH.bind(null,n)}),n.Ru.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Du.Qo(),yield Pv(n)):(yield n.Du.stop(),n.Eu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class tO{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new tO(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kv(n,e){if($r("AsyncQueue",`${e}: ${n}`),Xf(n))return new Ne(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Fv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=vI(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new Fv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Fv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class e2{constructor(){this.Cu=new er(Ze.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):st():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Lv{constructor(e,t,r,i,a,l,f,y,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new Lv(e,t,Fv.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class nH{constructor(){this.Nu=void 0,this.listeners=[]}}class rH{constructor(){this.queries=new Fd(e=>vL(e),yI),this.onlineState="Unknown",this.ku=new Set}}function nO(n,e){return rO.apply(this,arguments)}function rO(){return rO=(0,ye.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new nH),i)try{a.Nu=yield t.onListen(r)}catch(l){const f=kv(l,`Initialization of query '${tP(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&oO(t)}),rO.apply(this,arguments)}function iO(n,e){return sO.apply(this,arguments)}function sO(){return sO=(0,ye.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),sO.apply(this,arguments)}function iH(n,e){const t=Ye(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.$u(i)&&(r=!0);l.Nu=i}}r&&oO(t)}function sH(n,e,t){const r=Ye(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function oO(n){n.ku.forEach(e=>{e.next()})}class aO{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Lv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Lv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class oH{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class t2{constructor(e){this.serializer=e}rr(e){return ec(this.serializer,e)}ur(e){return e.metadata.exists?XL(this.serializer,e.document,!1):or.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Hr(e)}}class aH{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=n2(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=mn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new t2(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||Yt()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function k$(n,e,t,r){return MP.apply(this,arguments)}(e.localStore,new t2(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield F$(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function n2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class r2{constructor(e){this.key=e}}class i2{constructor(e){this.key=e}}class s2{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Yt(),this.mutatedKeys=Yt(),this.tc=EL(e),this.ec=new Fv(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new e2,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,E="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,M)=>{const P=i.get(T),j=_I(this.query,M)?M:null,Z=!!P&&this.mutatedKeys.has(P.key),me=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let xe=!1;P&&j?P.data.isEqual(j.data)?Z!==me&&(r.track({type:3,doc:j}),xe=!0):this.rc(P,j)||(r.track({type:2,doc:j}),xe=!0,(y&&this.tc(j,y)>0||E&&this.tc(j,E)<0)&&(f=!0)):!P&&j?(r.track({type:0,doc:j}),xe=!0):P&&!j&&(r.track({type:1,doc:P}),xe=!0,(y||E)&&(f=!0)),xe&&(j?(l=l.add(j),a=me?a.add(T):a.delete(T)):(l=l.delete(T),a=a.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{ec:l,ic:r,zi:f,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((E,T)=>function(M,P){const j=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return j(M)-j(P)}(E.type,T.type)||this.tc(E.doc,T.doc)),this.oc(r);const l=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,y=f!==this.Xu;return this.Xu=f,0!==a.length||y?{snapshot:new Lv(this.query,e.ec,i,a,e.mutatedKeys,0===f,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new e2,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Yt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new i2(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new r2(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Yt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Lv.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class uH{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class lH{constructor(e){this.key=e,this.fc=!1}}class cH{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Fd(f=>vL(f),yI),this._c=new Map,this.mc=new Set,this.gc=new er(Ze.comparator),this.yc=new Map,this.Ic=new EP,this.Tc={},this.Ec=new Map,this.Ac=Nm.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function dH(n,e){return uO.apply(this,arguments)}function uO(){return uO=(0,ye.Z)(function*(n,e){const t=NO(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const l=yield xv(t.localStore,Ys(e)),f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield lO(t,e,r,"current"===f,l.resumeToken),t.isPrimaryClient&&GS(t.remoteStore,l)}return i}),uO.apply(this,arguments)}function lO(n,e,t,r,i){return cO.apply(this,arguments)}function cO(){return cO=(0,ye.Z)(function*(n,e,t,r,i){n.Rc=(M,P,j)=>{return(Z=(0,ye.Z)(function*(me,xe,nt,gt){let ct=xe.view.sc(nt);ct.zi&&(ct=yield US(me.localStore,xe.query,!1).then(({documents:fn})=>xe.view.sc(fn,ct)));const Tt=gt&&gt.targetChanges.get(xe.targetId),qt=xe.view.applyChanges(ct,me.isPrimaryClient,Tt);return wO(me,xe.targetId,qt.cc),qt.snapshot}),function(me,xe,nt,gt){return Z.apply(this,arguments)})(n,M,P,j);var Z};const a=yield US(n.localStore,e,!0),l=new s2(e,a.ir),f=l.sc(a.documents),y=bI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),E=l.applyChanges(f,n.isPrimaryClient,y);wO(n,t,E.cc);const T=new uH(e,t,l);return n.wc.set(e,T),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),E.snapshot}),cO.apply(this,arguments)}function hH(n,e){return dO.apply(this,arguments)}function dO(){return dO=(0,ye.Z)(function*(n,e){const t=Ye(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!yI(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Nv(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),UI(t.remoteStore,r.targetId),Vv(t,r.targetId)}).catch(Jf))):(Vv(t,r.targetId),yield Nv(t.localStore,r.targetId,!0))}),dO.apply(this,arguments)}function hO(){return hO=(0,ye.Z)(function*(n,e,t){const r=RO(n);try{const i=yield function(a,l){const f=Ye(a),y=hr.now(),E=l.reduce((P,j)=>P.add(j.key),Yt());let T,M;return f.persistence.runTransaction("Locally write mutations","readwrite",P=>{let j=Ao(),Z=Yt();return f.Zi.getEntries(P,E).next(me=>{j=me,j.forEach((xe,nt)=>{nt.isValidDocument()||(Z=Z.add(xe))})}).next(()=>f.localDocuments.getOverlayedDocuments(P,j)).next(me=>{T=me;const xe=[];for(const nt of l){const gt=$j(nt,T.get(nt.key).overlayedDocument);null!=gt&&xe.push(new Ld(nt.key,gt,sL(gt.value.mapValue),fr.exists(!0)))}return f.mutationQueue.addMutationBatch(P,y,xe,l)}).next(me=>{M=me;const xe=me.applyToLocalDocumentSet(T,Z);return f.documentOverlayCache.saveOverlays(P,me.batchId,xe)})}).then(()=>({batchId:M.batchId,changes:CL(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let y=a.Tc[a.currentUser.toKey()];y||(y=new er(Vt)),y=y.insert(l,f),a.Tc[a.currentUser.toKey()]=y}(r,i.batchId,t),yield Ud(r,i.changes),yield Pv(r.remoteStore)}catch(i){const a=kv(i,"Failed to persist write");t.reject(a)}}),hO.apply(this,arguments)}function o2(n,e){return fO.apply(this,arguments)}function fO(){return fO=(0,ye.Z)(function*(n,e){const t=Ye(n);try{const r=yield function P$(n,e){const t=Ye(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((T,M)=>{const P=i.get(M);if(!P)return;f.push(t.Bs.removeMatchingKeys(a,T.removedDocuments,M).next(()=>t.Bs.addMatchingKeys(a,T.addedDocuments,M)));let j=P.withSequenceNumber(a.currentSequenceNumber);var Z,me,xe;null!==e.targetMismatches.get(M)?j=j.withResumeToken(Ci.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):T.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(T.resumeToken,r)),i=i.insert(M,j),me=j,xe=T,(0===(Z=P).resumeToken.approximateByteSize()||me.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||xe.addedDocuments.size+xe.modifiedDocuments.size+xe.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(a,j))});let y=Ao(),E=Yt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,T))}),f.push(VV(a,l,e.documentUpdates).next(T=>{y=T.nr,E=T.sr})),!r.isEqual(vt.min())){const T=t.Bs.getLastRemoteSnapshotVersion(a).next(M=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(T)}return oe.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,y,E)).next(()=>y)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.yc.get(a);l&&(yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?yt(l.fc):i.removedDocuments.size>0&&(yt(l.fc),l.fc=!1))}),yield Ud(t,r,e)}catch(r){yield Jf(r)}}),fO.apply(this,arguments)}function a2(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,l)=>{const f=l.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=Ye(a);f.onlineState=l;let y=!1;f.queries.forEach((E,T)=>{for(const M of T.listeners)M.Mu(l)&&(y=!0)}),y&&oO(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function pH(n,e,t){return pO.apply(this,arguments)}function pO(){return pO=(0,ye.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let l=new er(Ze.comparator);l=l.insert(a,or.newNoDocument(a,vt.min()));const f=Yt().add(a),y=new DI(vt.min(),new Map,new er(Vt),l,f);yield o2(r,y),r.gc=r.gc.remove(a),r.yc.delete(e),EO(r)}else yield Nv(r.localStore,e,!1).then(()=>Vv(r,e,t)).catch(Jf)}),pO.apply(this,arguments)}function gH(n,e){return gO.apply(this,arguments)}function gO(){return gO=(0,ye.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const i=yield function R$(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,f,y,E){const T=y.batch,M=T.keys();let P=oe.resolve();return M.forEach(j=>{P=P.next(()=>E.getEntry(f,j)).next(Z=>{const me=y.docVersions.get(j);yt(null!==me),Z.version.compareTo(me)<0&&(T.applyToRemoteDocument(Z,y),Z.isValidDocument()&&(Z.setReadTime(y.commitVersion),E.addEntry(Z)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(f,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=Yt();for(let y=0;y<l.mutationResults.length;++y)l.mutationResults[y].transformResults.length>0&&(f=f.add(l.batch.mutations[y].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);vO(t,r,null),_O(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ud(t,i)}catch(i){yield Jf(i)}}),gO.apply(this,arguments)}function mH(n,e,t){return mO.apply(this,arguments)}function mO(){return mO=(0,ye.Z)(function*(n,e,t){const r=Ye(n);try{const i=yield function(a,l){const f=Ye(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return f.mutationQueue.lookupMutationBatch(y,l).next(T=>(yt(null!==T),E=T.keys(),f.mutationQueue.removeMutationBatch(y,T))).next(()=>f.mutationQueue.performConsistencyCheck(y)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(y,E,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>f.localDocuments.getDocuments(y,E))})}(r.localStore,e);vO(r,e,t),_O(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ud(r,i)}catch(i){yield Jf(i)}}),mO.apply(this,arguments)}function yO(){return yO=(0,ye.Z)(function*(n,e){const t=Ye(n);dp(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Ye(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=kv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),yO.apply(this,arguments)}function _O(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function vO(n,e,t){const r=Ye(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Vv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||u2(n,r)})}function u2(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(UI(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),EO(n))}function wO(n,e,t){for(const r of t)r instanceof r2?(n.Ic.addReference(r.key,e),_H(n,r)):r instanceof i2?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||u2(n,r.key)):st()}function _H(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.mc.add(r),EO(n))}function EO(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ze(mn.fromString(e)),r=n.Ac.next();n.yc.set(r,new lH(t)),n.gc=n.gc.insert(t,r),GS(n.remoteStore,new Vd(Ys(Ev(t.path)),r,"TargetPurposeLimboResolution",pa.ct))}}function Ud(n,e,t){return IO.apply(this,arguments)}function IO(){return IO=(0,ye.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[],l=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,y)=>{l.push(r.Rc(y,e,t).then(E=>{if((E||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,E?.fromCache?"not-current":"current"),E){i.push(E);const T=TP.Li(y.targetId,E);a.push(T)}}))}),yield Promise.all(l),r.dc.nu(i),yield(f=(0,ye.Z)(function*(y,E){const T=Ye(y);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>oe.forEach(E,P=>oe.forEach(P.Fi,j=>T.persistence.referenceDelegate.addReference(M,P.targetId,j)).next(()=>oe.forEach(P.Bi,j=>T.persistence.referenceDelegate.removeReference(M,P.targetId,j)))))}catch(M){if(!Xf(M))throw M;Be("LocalStore","Failed to update sequence numbers: "+M)}for(const M of E){const P=M.targetId;if(!M.fromCache){const j=T.Ji.get(P),me=j.withLastLimboFreeSnapshotVersion(j.snapshotVersion);T.Ji=T.Ji.insert(P,me)}}}),function(y,E){return f.apply(this,arguments)})(r.localStore,a))}),IO.apply(this,arguments)}function vH(n,e){return CO.apply(this,arguments)}function CO(){return CO=(0,ye.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield FV(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(f=>{f.reject(new Ne(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ud(t,r.er)}var i}),CO.apply(this,arguments)}function wH(n,e){const t=Ye(n),r=t.yc.get(e);if(r&&r.fc)return Yt().add(r.key);{let i=Yt();const a=t._c.get(e);if(!a)return i;for(const l of a){const f=t.wc.get(l);i=i.unionWith(f.view.nc)}return i}}function EH(n,e){return DO.apply(this,arguments)}function DO(){return DO=(0,ye.Z)(function*(n,e){const t=Ye(n),r=yield US(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&wO(t,e.targetId,i.cc),i}),DO.apply(this,arguments)}function IH(n,e){return bO.apply(this,arguments)}function bO(){return bO=(0,ye.Z)(function*(n,e){const t=Ye(n);return BV(t.localStore,e).then(r=>Ud(t,r))}),bO.apply(this,arguments)}function CH(n,e,t,r){return TO.apply(this,arguments)}function TO(){return TO=(0,ye.Z)(function*(n,e,t,r){const i=Ye(n),a=yield function(l,f){const y=Ye(l),E=Ye(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",T=>E.Sn(T,f).next(M=>M?y.localDocuments.getDocuments(T,M):oe.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield Pv(i.remoteStore):"acknowledged"===t||"rejected"===t?(vO(i,e,r||null),_O(i,e),f=e,Ye(Ye(i.localStore).mutationQueue).Cn(f)):st(),yield Ud(i,a)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),TO.apply(this,arguments)}function SO(){return SO=(0,ye.Z)(function*(n,e){const t=Ye(n);if(NO(t),RO(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield l2(t,r.toArray());t.vc=!0,yield XP(t.remoteStore,!0);for(const a of i)GS(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Vv(t,l),Nv(t.localStore,l,!0))),UI(t.remoteStore,l)}),yield i,yield l2(t,r),function(a){const l=Ye(a);l.yc.forEach((f,y)=>{UI(l.remoteStore,y)}),l.Ic.Ts(),l.yc=new Map,l.gc=new er(Ze.comparator)}(t),t.vc=!1,yield XP(t.remoteStore,!1)}}),SO.apply(this,arguments)}function l2(n,e,t){return AO.apply(this,arguments)}function AO(){return AO=(0,ye.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[];for(const l of e){let f;const y=r._c.get(l);if(y&&0!==y.length){f=yield xv(r.localStore,Ys(y[0]));for(const E of y){const T=r.wc.get(E),M=yield EH(r,T);M.snapshot&&a.push(M.snapshot)}}else{const E=yield UV(r.localStore,l);f=yield xv(r.localStore,E),yield lO(r,c2(E),l,!1,f.resumeToken)}i.push(f)}return r.dc.nu(a),i}),AO.apply(this,arguments)}function c2(n){return yL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function bH(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).$i()}function TH(n,e,t,r){return MO.apply(this,arguments)}function MO(){return MO=(0,ye.Z)(function*(n,e,t,r){const i=Ye(n);if(i.vc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield BV(i.localStore,wL(a[0])),f=DI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ci.EMPTY_BYTE_STRING);yield Ud(i,l,f);break}case"rejected":yield Nv(i.localStore,e,!0),Vv(i,e,r);break;default:st()}}),MO.apply(this,arguments)}function SH(n,e,t){return xO.apply(this,arguments)}function xO(){return xO=(0,ye.Z)(function*(n,e,t){const r=NO(n);if(r.vc){for(const i of e){if(r._c.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const a=yield UV(r.localStore,i),l=yield xv(r.localStore,a);yield lO(r,c2(a),l.targetId,!1,l.resumeToken),GS(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield Nv(r.localStore,i,!1).then(()=>{UI(r.remoteStore,i),Vv(r,i)}).catch(Jf))}}),xO.apply(this,arguments)}function NO(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=o2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pH.bind(null,e),e.dc.nu=iH.bind(null,e.eventManager),e.dc.Pc=sH.bind(null,e.eventManager),e}function RO(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mH.bind(null,e),e}class BI{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.serializer=LI(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return kV(this.persistence,new OV,e.initialUser,this.serializer)}createPersistence(e){return new IP(FS.zs,this.serializer)}createSharedClientState(e){return new GV}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class PO extends BI{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield RO(r.Vc.syncEngine),yield Pv(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return kV(this.persistence,new OV,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new bV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new ej(t,this.persistence);return new XB(e.asyncQueue,r)}createPersistence(e){const t=bP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ss.withCacheSize(this.cacheSizeBytes):Ss.DEFAULT;return new DP(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,WV(),HS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new GV}}class d2 extends PO{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof OP&&(r.sharedClientState.syncEngine={jr:CH.bind(null,i),zr:TH.bind(null,i),Wr:SH.bind(null,i),$i:bH.bind(null,i),Qr:IH.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,ye.Z)(function*(l){yield function DH(n,e){return SO.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=WV();if(!OP.D(t))throw new Ne(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=bP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new OP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Uv{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>a2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=vH.bind(null,r.syncEngine),yield XP(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new rH}createDatastore(e){const t=LI(e.databaseInfo.databaseId),r=new B$(e.databaseInfo);return new H$(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>a2(this.syncEngine,f,0),l=zV.D()?new zV:new L$,new W$(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,y,E){const T=new cH(r,i,a,l,f,y);return E&&(T.vc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Ye(t);Be("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Rv(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function h2(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class WS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class xH{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Ii,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new oH(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ye.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class NH{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(a,l){const f=Ye(a),y=SI(f.serializer)+"/documents",E={documents:l.map(j=>TI(f.serializer,j))},T=yield f.vo("BatchGetDocuments",y,E,l.length),M=new Map;T.forEach(j=>{const Z=function Jj(n,e){return"found"in e?function(t,r){yt(!!r.found);const i=ec(t,r.found.name),a=Hr(r.found.updateTime),l=r.found.createTime?Hr(r.found.createTime):vt.min(),f=new os({mapValue:{fields:r.found.fields}});return or.newFoundDocument(i,a,l,f)}(n,e):"missing"in e?function(t,r){yt(!!r.missing),yt(!!r.readTime);const i=ec(t,r.missing),a=Hr(r.readTime);return or.newNoDocument(i,a)}(n,e):st()}(f.serializer,j);M.set(Z.key.toString(),Z)});const P=[];return l.forEach(j=>{const Z=M.get(j.toString());yt(!!Z),P.push(Z)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new bv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ze.fromPath(i);e.mutations.push(new rP(a,e.precondition(a)))}),yield(r=(0,ye.Z)(function*(i,a){const l=Ye(i),f=SI(l.serializer)+"/documents",y={writes:a.map(E=>AI(l.serializer,E))};yield l.Io("Commit",f,y)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?fr.exists(!1):fr.updateTime(t):fr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Ne(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fr.updateTime(t)}return fr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class RH{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new FP(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ye.Z)(function*(){const t=new NH(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!cI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!VL(t)}return!1}}class PH{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Li.UNAUTHENTICATED,this.clientId=kF.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ye.Z)(function*(f){Be("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Be("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=kv(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function qS(n,e){return OO.apply(this,arguments)}function OO(){return OO=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(a){r.isEqual(a)||(yield FV(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),OO.apply(this,arguments)}function kO(n,e){return FO.apply(this,arguments)}function FO(){return FO=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield LO(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>XV(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>XV(e.remoteStore,a)),n._onlineComponents=e}),FO.apply(this,arguments)}function f2(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function LO(n){return VO.apply(this,arguments)}function VO(){return VO=(0,ye.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Be("FirestoreClient","Using user provided OfflineComponentProvider");try{yield qS(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!f2(t))throw t;nu("Error using user provided cache. Falling back to memory cache: "+t),yield qS(n,new BI)}}else Be("FirestoreClient","Using default OfflineComponentProvider"),yield qS(n,new BI);return n._offlineComponents}),VO.apply(this,arguments)}function KS(n){return UO.apply(this,arguments)}function UO(){return UO=(0,ye.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Be("FirestoreClient","Using user provided OnlineComponentProvider"),yield kO(n,n._uninitializedComponentsProvider._online)):(Be("FirestoreClient","Using default OnlineComponentProvider"),yield kO(n,new Uv))),n._onlineComponents}),UO.apply(this,arguments)}function p2(n){return LO(n).then(e=>e.persistence)}function ZS(n){return LO(n).then(e=>e.localStore)}function g2(n){return KS(n).then(e=>e.remoteStore)}function BO(n){return KS(n).then(e=>e.syncEngine)}function Bv(n){return jO.apply(this,arguments)}function jO(){return jO=(0,ye.Z)(function*(n){const e=yield KS(n),t=e.eventManager;return t.onListen=dH.bind(null,e.syncEngine),t.onUnlisten=hH.bind(null,e.syncEngine),t}),jO.apply(this,arguments)}function y2(n,e,t={}){const r=new Ii;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,f,y){const E=new WS({next:M=>{a.enqueueAndForget(()=>iO(i,T));const P=M.docs.has(l);!P&&M.fromCache?y.reject(new Ne(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&M.fromCache&&f&&"server"===f.source?y.reject(new Ne(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(M)},error:M=>y.reject(M)}),T=new aO(Ev(l.path),E,{includeMetadataChanges:!0,Ku:!0});return nO(i,T)}(yield Bv(n),n.asyncQueue,e,t,r)})),r.promise}function _2(n,e,t={}){const r=new Ii;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,f,y){const E=new WS({next:M=>{a.enqueueAndForget(()=>iO(i,T)),M.fromCache&&"server"===f.source?y.reject(new Ne(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(M)},error:M=>y.reject(M)}),T=new aO(l,E,{includeMetadataChanges:!0,Ku:!0});return nO(i,T)}(yield Bv(n),n.asyncQueue,e,t,r)})),r.promise}function v2(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const w2=new Map;function $O(n,e,t){if(!t)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function E2(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function I2(n){if(!Ze.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function C2(n){if(Ze.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function YS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=YS(n);throw new Ne(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function D2(n,e){if(e<=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class b2{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}E2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=v2(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Ne(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ne(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ne(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b2(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new jB;switch(t.type){case"firstParty":return new zB(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=w2.get(e);t&&(Be("ComponentProvider","Removing Datastore"),w2.delete(e),t.terminate())}(this),Promise.resolve()}}class ar{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ar(this.firestore,e,this._key)}}class as{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new as(this.firestore,e,this._query)}}class tc extends as{constructor(e,t,r){super(e,t,Ev(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ar(this.firestore,null,new Ze(e))}withConverter(e){return new tc(this.firestore,e,this._path)}}function S2(n,e,...t){if(n=(0,k.m9)(n),$O("collection","path",e),n instanceof jI){const r=mn.fromString(e,...t);return C2(r),new tc(n,null,r)}{if(!(n instanceof ar||n instanceof tc))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return C2(r),new tc(n.firestore,null,r)}}function QS(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=kF.A()),$O("doc","path",e),n instanceof jI){const r=mn.fromString(e,...t);return I2(r),new ar(n,null,new Ze(r))}{if(!(n instanceof ar||n instanceof tc))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(e,...t));return I2(r),new ar(n.firestore,n instanceof tc?n.converter:null,new Ze(r))}}function A2(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof ar||n instanceof tc)&&(e instanceof ar||e instanceof tc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function HO(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof as&&e instanceof as&&n.firestore===e.firestore&&yI(n._query,e._query)&&n.converter===e.converter}class HH{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new FP(this,"async_queue_retry"),this.Xc=()=>{const t=HS();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=HS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=HS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Ii;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Xf(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,$r("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=tO.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&st()}verifyOperationInProgress(){}sa(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function GO(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class GH{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ii,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ur extends jI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new HH,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||M2(this),this._firestoreClient.terminate()}}function Gr(n){return n._firestoreClient||M2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function M2(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ej(n._databaseId,f,n._persistenceKey,(E=i).host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,v2(E.experimentalLongPollingOptions),E.useFetchStreams));var f,E;n._firestoreClient=new PH(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function x2(n,e,t){const r=new Ii;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield qS(n,t),yield kO(n,e),r.resolve()}catch(i){const a=i;if(!f2(a))throw a;nu("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function N2(n){if(n._initialized||n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nc(Ci.fromBase64String(e))}catch(t){throw new Ne(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new nc(Ci.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pm{constructor(e){this._methodName=e}}class JS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}const tG=/^__.*__$/;class nG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ld(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dv(e,this.data,t,this.fieldTransforms)}}class R2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ld(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function P2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class XS{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new XS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return nA(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(P2(this.ca)&&tG.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class rG{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||LI(e)}ya(e,t,r,i=!1){return new XS({ca:e,methodName:t,ga:r,path:Or.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Om(n){const e=n._freezeSettings(),t=LI(n._databaseId);return new rG(n._databaseId,!!e.ignoreUndefinedProperties,t)}function eA(n,e,t,r,i,a={}){const l=n.ya(a.merge||a.mergeFields?2:0,e,t,i);KO("Data must be an object, but it was:",l,r);const f=F2(r,l);let y,E;if(a.merge)y=new So(l.fieldMask),E=l.fieldTransforms;else if(a.mergeFields){const T=[];for(const M of a.mergeFields){const P=GI(e,M,t);if(!l.contains(P))throw new Ne(ce.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);V2(T,P)||T.push(P)}y=new So(T),E=l.fieldTransforms.filter(M=>y.covers(M.field))}else y=null,E=l.fieldTransforms;return new nG(new os(f),y,E)}class HI extends Pm{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof HI}}function O2(n,e,t){return new XS({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class zO extends Pm{_toFieldTransform(e){return new EI(e.path,new Iv)}isEqual(e){return e instanceof zO}}class iG extends Pm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=O2(this,e,!0),r=this.pa.map(a=>km(a,t)),i=new Dm(r);return new EI(e.path,i)}isEqual(e){return this===e}}class sG extends Pm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=O2(this,e,!0),r=this.pa.map(a=>km(a,t)),i=new bm(r);return new EI(e.path,i)}isEqual(e){return this===e}}class oG extends Pm{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Cv(e.serializer,SL(e.serializer,this.Ia));return new EI(e.path,t)}isEqual(e){return this===e}}function WO(n,e,t,r){const i=n.ya(1,e,t);KO("Data must be an object, but it was:",i,r);const a=[],l=os.empty();ep(r,(y,E)=>{const T=tA(e,y,t);E=(0,k.m9)(E);const M=i.da(T);if(E instanceof HI)a.push(T);else{const P=km(E,M);null!=P&&(a.push(T),l.set(T,P))}});const f=new So(a);return new R2(l,f,i.fieldTransforms)}function qO(n,e,t,r,i,a){const l=n.ya(1,e,t),f=[GI(e,r,t)],y=[i];if(a.length%2!=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)f.push(GI(e,a[P])),y.push(a[P+1]);const E=[],T=os.empty();for(let P=f.length-1;P>=0;--P)if(!V2(E,f[P])){const j=f[P];let Z=y[P];Z=(0,k.m9)(Z);const me=l.da(j);if(Z instanceof HI)E.push(j);else{const xe=km(Z,me);null!=xe&&(E.push(j),T.set(j,xe))}}const M=new So(E);return new R2(T,M,l.fieldTransforms)}function k2(n,e,t,r=!1){return km(t,n.ya(r?4:3,e))}function km(n,e){if(L2(n=(0,k.m9)(n)))return KO("Unsupported field value:",e,n),F2(n,e);if(n instanceof Pm)return function(t,r){if(!P2(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=km(l,r.wa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return SL(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=hr.fromDate(t);return{timestampValue:Tv(r.serializer,i)}}if(t instanceof hr){const i=new hr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Tv(r.serializer,i)}}if(t instanceof JS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof nc)return{bytesValue:KL(r.serializer,t._byteString)};if(t instanceof ar){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:cP(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${YS(t)}`)}(n,e)}function F2(n,e){const t={};return YF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ep(n,(r,i)=>{const a=km(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function L2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof hr||n instanceof JS||n instanceof nc||n instanceof ar||n instanceof Pm)}function KO(n,e,t){if(!L2(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=YS(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function GI(n,e,t){if((e=(0,k.m9)(e))instanceof Bd)return e._internalPath;if("string"==typeof e)return tA(n,e);throw nA("Field path arguments must be of type string or ",n,!1,void 0,t)}const aG=new RegExp("[~\\*/\\[\\]]");function tA(n,e,t){if(e.search(aG)>=0)throw nA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bd(...e.split("."))._internalPath}catch{throw nA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function nA(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(a||l)&&(y+=" (found",a&&(y+=` in field ${r}`),l&&(y+=` in document ${i}`),y+=")"),new Ne(ce.INVALID_ARGUMENT,f+n+y)}function V2(n,e){return n.some(t=>t.isEqual(e))}class zI{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ar(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class uG extends zI{data(){return super.data()}}function rA(n,e){return"string"==typeof e?tA(n,e):e instanceof Bd?e._internalPath:e._delegate._internalPath}function U2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZO{}class WI extends ZO{}function fp(n,e,...t){let r=[];e instanceof ZO&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof jv).length,l=i.filter(f=>f instanceof qI).length;if(a>1||a>0&&l>0)throw new Ne(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class qI extends WI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new qI(e,t,r)}_apply(e){const t=this._parse(e);return H2(e._query,t),new as(e.firestore,e.converter,eP(e._query,t))}_parse(e){const t=Om(e.firestore);return function(i,a,l,f,y,E,T){let M;if(y.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){$2(T,E);const P=[];for(const j of T)P.push(j2(f,i,j));M={arrayValue:{values:P}}}else M=j2(f,i,T)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||$2(T,E),M=k2(l,"where",T,"in"===E||"not-in"===E);return un.create(y,E,M)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class jv extends ZO{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Ln.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const f of l)H2(a,f),a=eP(a,f)}(e._query,t),new as(e.firestore,e.converter,eP(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class YO extends WI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new YO(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new vv(i,a);return function(f,y){if(null===JR(f)){const E=ES(f);null!==E&&G2(0,E,y.field)}}(r,l),l}(e._query,this._field,this._direction);return new as(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new kd(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class iA extends WI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new iA(e,t,r)}_apply(e){return new as(e.firestore,e.converter,IS(e._query,this._limit,this._limitType))}}class sA extends WI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new sA(e,t,r)}_apply(e){const t=B2(e,this.type,this._docOrFields,this._inclusive);return new as(e.firestore,e.converter,(i=t,new kd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class oA extends WI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new oA(e,t,r)}_apply(e){const t=B2(e,this.type,this._docOrFields,this._inclusive);return new as(e.firestore,e.converter,(i=t,new kd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function B2(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof zI)return function(i,a,l,f,y){if(!f)throw new Ne(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const E=[];for(const T of Cm(i))if(T.field.isKeyField())E.push(Em(a,f.key));else{const M=f.data.field(T.field);if(pS(M))throw new Ne(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const P=T.field.canonicalString();throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}E.push(M)}return new op(E,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Om(n.firestore);return function(a,l,f,y,E,T){const M=a.explicitOrderBy;if(E.length>M.length)throw new Ne(ce.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let j=0;j<E.length;j++){const Z=E[j];if(M[j].field.isKeyField()){if("string"!=typeof Z)throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof Z}`);if(!XR(a)&&-1!==Z.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${Z}' contains a slash.`);const me=a.path.child(mn.fromString(Z));if(!Ze.isDocumentKey(me))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${me}' is not because it contains an odd number of segments.`);const xe=new Ze(me);P.push(Em(l,xe))}else{const me=k2(f,y,Z);P.push(me)}}return new op(P,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function j2(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XR(e)&&-1!==t.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mn.fromString(t));if(!Ze.isDocumentKey(r))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Em(n,new Ze(r))}if(t instanceof ar)return Em(n,t._key);throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${YS(t)}.`)}function $2(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function H2(n,e){if(e.isInequality()){const r=ES(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=JR(n);null!==a&&G2(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ne(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function G2(n,e,t){if(!t.isEqual(e))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class QO{convertValue(e,t="none"){switch(ip(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Od(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ep(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new JS(kr(e.latitude),kr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hI(e));default:return null}}convertTimestamp(e){const t=tp(e);return new hr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mn.fromString(e);yt(iV(r));const i=new np(r.get(1),r.get(3)),a=new Ze(r.popFirst(5));return i.isEqual(t)||$r(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function aA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class yG extends QO{constructor(e){super(),this.firestore=e}convertBytes(e){return new nc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}class Fm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jd extends zI{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new KI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(rA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class KI extends jd{data(e={}){return super.data(e)}}class pp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new KI(this._firestore,this._userDataWriter,r.key,r,new Fm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new KI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Fm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new KI(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Fm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,E=-1;return 0!==l.type&&(y=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),E=a.indexOf(l.doc.key)),{type:vG(l.type),doc:f,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function vG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function W2(n,e){return n instanceof jd&&e instanceof jd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof pp&&e instanceof pp&&n._firestore===e._firestore&&HO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class gp extends QO{constructor(e){super(),this.firestore=e}convertBytes(e){return new nc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}function q2(n,e,t){n=ln(n,ar);const r=ln(n.firestore,ur),i=aA(n.converter,e,t);return $v(r,[eA(Om(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,fr.none())])}function K2(n,e,t,...r){n=ln(n,ar);const i=ln(n.firestore,ur),a=Om(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof Bd?qO(a,"updateDoc",n._key,e,t,r):WO(a,"updateDoc",n._key,e),$v(i,[l.toMutation(n._key,fr.exists(!0))])}function Z2(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||GO(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(GO(e[l])){const M=e[l];e[l]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[l+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[l+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let y,E,T;if(n instanceof ar)E=ln(n.firestore,ur),T=Ev(n._key.path),y={next:M=>{e[l]&&e[l](JO(E,n,M))},error:e[l+1],complete:e[l+2]};else{const M=ln(n,as);E=ln(M.firestore,ur),T=M._query;const P=new gp(E);y={next:j=>{e[l]&&e[l](new pp(E,P,M,j))},error:e[l+1],complete:e[l+2]},U2(n._query)}return function(M,P,j,Z){const me=new WS(Z),xe=new aO(P,me,j);return M.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return nO(yield Bv(M),xe)})),()=>{me.Dc(),M.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return iO(yield Bv(M),xe)}))}}(Gr(E),T,f,y)}function $v(n,e){return function(t,r){const i=new Ii;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function fH(n,e,t){return hO.apply(this,arguments)}(yield BO(t),r,i)})),i.promise}(Gr(n),e)}function JO(n,e,t){const r=t.docs.get(e._key),i=new gp(n);return new jd(n,i,e._key,r,new Fm(t.hasPendingWrites,t.fromCache),e.converter)}const LG={maxAttempts:5};class Y2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Om(e)}set(e,t,r){this._verifyNotCommitted();const i=mp(e,this._firestore),a=aA(i.converter,t,r),l=eA(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,fr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=mp(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Bd?qO(this._dataReader,"WriteBatch.update",a._key,t,r,i):WO(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=mp(e,this._firestore);return this._mutations=this._mutations.concat(new bv(t._key,fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mp(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Ne(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class VG extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Om(e)}get(e){const t=mp(e,this._firestore),r=new yG(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const a=i[0];if(a.isFoundDocument())return new zI(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new zI(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=mp(e,this._firestore),a=aA(i.converter,t,r),l=eA(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=mp(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Bd?qO(this._dataReader,"Transaction.update",a._key,t,r,i):WO(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=mp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=mp(e,this._firestore),r=new gp(this._firestore);return super.get(e).then(i=>new jd(this._firestore,r,t._key,i._document,new Fm(!1,!1),t.converter))}}function XO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function J2(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function X2(){if(!function vj(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){gv=Jo.SDK_VERSION,(0,Jo._registerComponent)(new ju.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new ur(new HB(t.getProvider("auth-internal")),new WB(t.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ne(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new np(f.options.projectId,y)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Jo.registerVersion)(RF,"3.13.0",n),(0,Jo.registerVersion)(RF,"3.13.0","esm2017")}();class ZI{constructor(e){this._delegate=e}static fromBase64String(e){return X2(),new ZI(nc.fromBase64String(e))}static fromUint8Array(e){return J2(),new ZI(nc.fromUint8Array(e))}toBase64(){return X2(),this._delegate.toBase64()}toUint8Array(){return J2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ek(n){return function qG(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class KG{enableIndexedDbPersistence(e,t){return function WH(n,e){N2(n=ln(n,ur));const t=Gr(n);if(t._uninitializedComponentsProvider)throw new Ne(ce.FAILED_PRECONDITION,"SDK cache is already specified.");nu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Uv;return x2(t,i,new PO(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function qH(n){N2(n=ln(n,ur));const e=Gr(n);if(e._uninitializedComponentsProvider)throw new Ne(ce.FAILED_PRECONDITION,"SDK cache is already specified.");nu("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Uv;return x2(e,r,new d2(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function KH(n){if(n._initialized&&!n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ii;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!tl.D())return Promise.resolve();const i=r+"main";yield tl.delete(i)}),function(r){return t.apply(this,arguments)})(bP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class eU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof np||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&nu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function T2(n,e,t,r={}){var i;const a=(n=ln(n,jI))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==l&&nu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let f,y;if("string"==typeof r.mockUserToken)f=r.mockUserToken,y=Li.MOCK_USER;else{f=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Ne(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Li(E)}n._authCredentials=new $B(new PF(f,y))}}(this._delegate,e,t,r)}enableNetwork(){return function YH(n){return function OH(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield p2(n),t=yield g2(n);return e.setNetworkEnabled(!0),function(r){const i=Ye(r);return i.vu.delete(0),VI(i)}(t)}))}(Gr(n=ln(n,ur)))}(this._delegate)}disableNetwork(){return function QH(n){return function kH(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield p2(n),t=yield g2(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const a=Ye(i);a.vu.add(0),yield Rv(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Gr(n=ln(n,ur)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,E2("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ZH(n){return function(e){const t=new Ii;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function yH(n,e){return yO.apply(this,arguments)}(yield BO(e),t)})),t.promise}(Gr(n=ln(n,ur)))}(this._delegate)}onSnapshotsInSync(e){return function AG(n,e){return function VH(n,e){const t=new WS(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Bv(n),i=t,Ye(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Bv(n),i=t,void Ye(r).ku.delete(i);var r,i}))}}(Gr(n=ln(n,ur)),GO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hv(this,S2(this._delegate,e))}catch(t){throw Qs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ru(this,QS(this._delegate,e))}catch(t){throw Qs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Js(this,function $H(n,e){if(n=ln(n,jI),$O("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new as(n,null,(t=e,new kd(mn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Qs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function UG(n,e,t){n=ln(n,ur);const r=Object.assign(Object.assign({},LG),t);return function(i){if(i.maxAttempts<1)throw new Ne(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new Ii;return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const y=yield function m2(n){return KS(n).then(e=>e.datastore)}(i);new RH(i.asyncQueue,y,l,a,f).run()})),f.promise}(Gr(n),i=>e(new VG(n,i)),r)}(this._delegate,t=>e(new tU(this,t)))}batch(){return Gr(this._delegate),new nU(new Y2(this._delegate,e=>$v(this._delegate,e)))}loadBundle(e){return function JH(n,e){const t=Gr(n=ln(n,ur)),r=new GH;return function UH(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?BL().encode(a):a,y=function(y,E){if(y instanceof Uint8Array)return h2(y,E);if(y instanceof ArrayBuffer)return h2(new Uint8Array(y),E);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new xH(y,l);var y}(t,LI(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function AH(n,e,t){const r=Ye(n);var i;(i=(0,ye.Z)(function*(a,l,f){try{const y=yield l.getMetadata();if(yield function(P,j){const Z=Ye(P),me=Hr(j.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",xe=>Z.qs.getBundleMetadata(xe,j.id)).then(xe=>!!xe&&xe.createTime.compareTo(me)>=0)}(a.localStore,y))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(P=y).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);f._updateProgress(n2(y));const E=new aH(y,a.localStore,l.serializer);let T=yield l.bc();for(;T;){const P=yield E.zu(T);P&&f._updateProgress(P),T=yield l.bc()}const M=yield E.complete();return yield Ud(a,M.Ju,void 0),yield function(P,j){const Z=Ye(P);return Z.persistence.runTransaction("Save bundle","readwrite",me=>Z.qs.saveBundleMetadata(me,j))}(a.localStore,y),f._completeWith(M.progress),Promise.resolve(M.Hu)}catch(y){return nu("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var P}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield BO(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function XH(n,e){return function BH(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=Ye(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield ZS(n),e)}))}(Gr(n=ln(n,ur)),e).then(t=>t?new as(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Js(this,t):null)}}class uA extends QO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ZI(new nc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ru.forKey(t,this.firestore,null)}}class tU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uA(e)}get(e){const t=Vm(e);return this._delegate.get(t).then(r=>new YI(this._firestore,new jd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Vm(e);return r?(XO("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Vm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Vm(e);return this._delegate.delete(t),this}}class nU{constructor(e){this._delegate=e}set(e,t,r){const i=Vm(e);return r?(XO("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Vm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Vm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Lm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new KI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new QI(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Lm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Lm(e,new uA(e),t),i.set(t,a)),a}}Lm.INSTANCES=new WeakMap;class ru{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ru(t,new ar(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new ru(t,new ar(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Hv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hv(this.firestore,S2(this._delegate,e))}catch(t){throw Qs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof ar&&A2(this._delegate,e)}set(e,t){t=XO("DocumentReference.set",t);try{return t?q2(this._delegate,e,t):q2(this._delegate,e)}catch(r){throw Qs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?K2(this._delegate,e):K2(this._delegate,e,t,...r)}catch(i){throw Qs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function TG(n){return $v(ln(n.firestore,ur),[new bv(n._key,fr.none())])}(this._delegate)}onSnapshot(...e){const t=rU(e),r=iU(e,i=>new YI(this.firestore,new jd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Z2(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function EG(n){n=ln(n,ar);const e=ln(n.firestore,ur),t=Gr(e),r=new gp(e);return function FH(n,e){const t=new Ii;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const f=yield function(y,E){const T=Ye(y);return T.persistence.runTransaction("read document","readonly",M=>T.localDocuments.getDocument(M,E))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Ne(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=kv(f,`Failed to get document '${a} from cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield ZS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new jd(e,r,n._key,i,new Fm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function IG(n){n=ln(n,ar);const e=ln(n.firestore,ur);return y2(Gr(e),n._key,{source:"server"}).then(t=>JO(e,n,t))}(this._delegate):function wG(n){n=ln(n,ar);const e=ln(n.firestore,ur);return y2(Gr(e),n._key).then(t=>JO(e,n,t))}(this._delegate),t.then(r=>new YI(this.firestore,new jd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ru(this.firestore,this._delegate.withConverter(e?Lm.getInstance(this.firestore,e):null))}}function Qs(n,e,t){return n.message=n.message.replace(e,t),n}function rU(n){for(const e of n)if("object"==typeof e&&!ek(e))return e;return{}}function iU(n,e){var t,r;let i;return i=ek(n[0])?n[0]:ek(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class YI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ru(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return W2(this._delegate,e._delegate)}}class QI extends YI{data(e){const t=this._delegate.data(e);return function BB(n,e){n||st()}(void 0!==t),t}}class Js{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uA(e)}where(e,t,r){try{return new Js(this.firestore,fp(this._delegate,function lG(n,e,t){const r=e,i=rA("where",n);return qI._create(i,r,t)}(e,t,r)))}catch(i){throw Qs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Js(this.firestore,fp(this._delegate,function cG(n,e="asc"){const t=e,r=rA("orderBy",n);return YO._create(r,t)}(e,t)))}catch(r){throw Qs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Js(this.firestore,fp(this._delegate,function dG(n){return D2("limit",n),iA._create("limit",n,"F")}(e)))}catch(t){throw Qs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Js(this.firestore,fp(this._delegate,function hG(n){return D2("limitToLast",n),iA._create("limitToLast",n,"L")}(e)))}catch(t){throw Qs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Js(this.firestore,fp(this._delegate,function fG(...n){return sA._create("startAt",n,!0)}(...e)))}catch(t){throw Qs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Js(this.firestore,fp(this._delegate,function pG(...n){return sA._create("startAfter",n,!1)}(...e)))}catch(t){throw Qs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Js(this.firestore,fp(this._delegate,function gG(...n){return oA._create("endBefore",n,!1)}(...e)))}catch(t){throw Qs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Js(this.firestore,fp(this._delegate,function mG(...n){return oA._create("endAt",n,!0)}(...e)))}catch(t){throw Qs(t,"endAt()","Query.endAt()")}}isEqual(e){return HO(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function DG(n){n=ln(n,as);const e=ln(n.firestore,ur),t=Gr(e),r=new gp(e);return function LH(n,e){const t=new Ii;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const f=yield US(i,a,!0),y=new s2(a,f.ir),E=y.sc(f.documents),T=y.applyChanges(E,!1);l.resolve(T.snapshot)}catch(f){const y=kv(f,`Failed to execute query '${a} against cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield ZS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new pp(e,r,n,i))}(this._delegate):"server"===e?.source?function bG(n){n=ln(n,as);const e=ln(n.firestore,ur),t=Gr(e),r=new gp(e);return _2(t,n._query,{source:"server"}).then(i=>new pp(e,r,n,i))}(this._delegate):function CG(n){n=ln(n,as);const e=ln(n.firestore,ur),t=Gr(e),r=new gp(e);return U2(n._query),_2(t,n._query).then(i=>new pp(e,r,n,i))}(this._delegate),t.then(r=>new tk(this.firestore,new pp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=rU(e),r=iU(e,i=>new tk(this.firestore,new pp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Z2(this._delegate,t,r)}withConverter(e){return new Js(this.firestore,this._delegate.withConverter(e?Lm.getInstance(this.firestore,e):null))}}class YG{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new QI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Js(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new QI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new YG(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new QI(this._firestore,r))})}isEqual(e){return W2(this._delegate,e._delegate)}}class Hv extends Js{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ru(this.firestore,e):null}doc(e){try{return new ru(this.firestore,void 0===e?QS(this._delegate):QS(this._delegate,e))}catch(t){throw Qs(t,"doc()","CollectionReference.doc()")}}add(e){return function SG(n,e){const t=ln(n.firestore,ur),r=QS(n),i=aA(n.converter,e);return $v(t,[eA(Om(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,fr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ru(this.firestore,t))}isEqual(e){return A2(this._delegate,e._delegate)}withConverter(e){return new Hv(this.firestore,this._delegate.withConverter(e?Lm.getInstance(this.firestore,e):null))}}function Vm(n){return ln(n,ar)}class nk{constructor(...e){this._delegate=new Bd(...e)}static documentId(){return new nk(Or.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof Bd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Um{constructor(e){this._delegate=e}static serverTimestamp(){const e=function jG(){return new zO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Um(e)}static delete(){const e=function BG(){return new HI("deleteField")}();return e._methodName="FieldValue.delete",new Um(e)}static arrayUnion(...e){const t=function $G(...n){return new iG("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Um(t)}static arrayRemove(...e){const t=function HG(...n){return new sG("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Um(t)}static increment(e){const t=function GG(n){return new oG("increment",n)}(e);return t._methodName="FieldValue.increment",new Um(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const QG={Firestore:eU,GeoPoint:JS,Timestamp:hr,Blob:ZI,Transaction:tU,WriteBatch:nU,DocumentReference:ru,DocumentSnapshot:YI,Query:Js,QueryDocumentSnapshot:QI,QuerySnapshot:tk,CollectionReference:Hv,FieldPath:nk,FieldValue:Um,setLogLevel:function ZG(n){!function UB(n){Qf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function sU(n,e){return function e3(n,e=OC.z){return new Vr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function rk(n,e){return sU(n,e).pipe((0,Ct.U)(t=>({payload:t,type:"query"})))}function lA(n,e){return rk(n,e).pipe(B_(void 0),YN(),(0,Ct.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const y=i.find(T=>T.doc.ref.isEqual(l.ref)),E=t?.payload.docs.find(T=>T.ref.isEqual(l.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(l.metadata)||!y&&E&&JSON.stringify(E.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function oU(n,e,t){return lA(n,t).pipe(Qh((r,i)=>function n3(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function r3(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ik(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ik(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ik(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),(0,D0.x)(),(0,Ct.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function ik(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function aU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function XG(n){(function JG(n,e){n.INTERNAL.registerComponent(new ju.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},QG)))})(n,(e,t)=>new eU(e,t,new KG)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(LA.Z);class uU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=lA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ct.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(B_(void 0),YN(),vo(([r,i])=>i.length>0||!r),(0,Ct.U)(([r,i])=>i),An.iC)}auditTrail(e){return this.stateChanges(e).pipe(Qh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=aU(e);return oU(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return rk(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),An.iC)}get(e){return(0,On.D)(this.query.get(e)).pipe(An.iC)}add(e){return this.ref.add(e)}doc(e){return new lU(this.ref.doc(e),this.afs)}}class lU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=cU(r,t);return new uU(i,a,this.afs)}snapshotChanges(){return function t3(n,e){return sU(n,e).pipe(B_(void 0),YN(),(0,Ct.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,On.D)(this.ref.get(e)).pipe(An.iC)}}class i3{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?lA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),vo(t=>t.length>0),An.iC):lA(this.query,this.afs.schedulers.outsideAngular).pipe(An.iC)}auditTrail(e){return this.stateChanges(e).pipe(Qh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=aU(e);return oU(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return rk(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),An.iC)}get(e){return(0,On.D)(this.query.get(e)).pipe(An.iC)}}const s3=new m.OlP("angularfire2.enableFirestorePersistence"),o3=new m.OlP("angularfire2.firestore.persistenceSettings"),a3=new m.OlP("angularfire2.firestore.settings"),u3=new m.OlP("angularfire2.firestore.use-emulator");function cU(n,e=(t=>t)){return{query:e(n),ref:n}}let l3=(()=>{class n{constructor(t,r,i,a,l,f,y,E,T,M,P,j,Z,me,xe,nt,gt){this.schedulers=y;const ct=(0,dr.on)(t,f,r),Tt=T;M&&ud(ct,f,P,Z,me,xe,j,nt),[this.firestore,this.persistenceEnabled$]=(0,dr.cc)(`${ct.name}.firestore`,"AngularFirestore",ct.name,()=>{const qt=f.runOutsideAngular(()=>ct.firestore());if(a&&qt.settings(a),Tt&&qt.useEmulator(...Tt),i&&!Oo(l)){const fn=()=>{try{return(0,On.D)(qt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(Ms){return typeof console<"u"&&console.warn(Ms),(0,mt.of)(!1)}};return[qt,f.runOutsideAngular(fn)]}return[qt,(0,mt.of)(!1)]},[a,Tt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=cU(i,r),f=this.schedulers.ngZone.run(()=>a);return new uU(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new i3(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new lU(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(dr.Dh),m.LFG(dr.xv,8),m.LFG(s3,8),m.LFG(a3,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(An.HU),m.LFG(o3,8),m.LFG(u3,8),m.LFG(Yh,8),m.LFG(ky,8),m.LFG(RC,8),m.LFG(I0,8),m.LFG(Zh,8),m.LFG(C0,8),m.LFG(Al,8),m.LFG(mg,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),dU=(()=>{class n{constructor(t){this.firestore=t,this.notesPath="notes"}create(t){return this.firestore.collection(this.notesPath).add(t)}getUserNotes(t){return this.firestore.collection(this.notesPath,r=>r.where("userId","==",t)).valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(l3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JI=(()=>{class n{constructor(t){this.afAuth=t,this.afAuth.setPersistence("session")}getUserId(){return this.afAuth.authState.pipe((0,Ct.U)(t=>t?t.uid:null))}logout(){return this.afAuth.signOut()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Yh))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),c3=(()=>{class n{constructor(t,r){this.noteService=t,this.authService=r,this.note={title:"",content:"",userId:""}}onSubmit(){this.authService.getUserId().subscribe(t=>{t&&(this.note.userId=t,this.noteService.create(this.note).then(()=>{console.log("Note created successfully!"),this.note.title="",this.note.content=""}).catch(r=>{console.error("Error creating note:",r)}))})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(dU),m.Y36(JI))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-create-note"]],decls:12,vars:2,consts:[[1,"create-note-container"],[3,"submit"],["for","title"],["type","text","id","title","name","title","required","",3,"ngModel","ngModelChange"],["for","content"],["id","content","name","content","required","",3,"ngModel","ngModelChange"],["type","submit"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"h1"),m._uU(2,"Create Note"),m.qZA(),m.TgZ(3,"form",1),m.NdJ("submit",function(){return r.onSubmit()}),m.TgZ(4,"label",2),m._uU(5,"Title:"),m.qZA(),m.TgZ(6,"input",3),m.NdJ("ngModelChange",function(a){return r.note.title=a}),m.qZA(),m.TgZ(7,"label",4),m._uU(8,"Content:"),m.qZA(),m.TgZ(9,"textarea",5),m.NdJ("ngModelChange",function(a){return r.note.content=a}),m.qZA(),m.TgZ(10,"button",6),m._uU(11,"Create Note"),m.qZA()()()),2&t&&(m.xp6(6),m.Q6J("ngModel",r.note.title),m.xp6(3),m.Q6J("ngModel",r.note.content))},dependencies:[qp,$o,Es,jn,Xc,Ph,Mh],styles:[".create-note-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-color:#f0f0f0}.create-note-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 2px 4px #0000001a;width:300px}.create-note-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.create-note-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-note-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:90%;padding:10px;margin-bottom:15px;border:1px solid #ccc;border-radius:3px}.create-note-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:3px;cursor:pointer;transition:background-color .3s ease}.create-note-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]}),n})();function d3(n,e){if(1&n&&(m.TgZ(0,"div",6)(1,"h2",7),m._uU(2),m.qZA(),m.TgZ(3,"p",8),m._uU(4),m.qZA()()),2&n){const t=e.$implicit;m.xp6(2),m.Oqu(t.title),m.xp6(2),m.Oqu(t.content)}}function h3(n,e){if(1&n&&(m.TgZ(0,"div",4),m.YNc(1,d3,5,2,"div",5),m.qZA()),2&n){const t=e.ngIf;m.xp6(1),m.Q6J("ngForOf",t)}}function f3(n,e){1&n&&(m.TgZ(0,"p",9),m._uU(1,"You haven't created any notes yet."),m.qZA())}let p3=(()=>{class n{constructor(t,r){this.noteService=t,this.authService=r}ngOnInit(){this.fetchUserNotes()}fetchUserNotes(){this.authService.getUserId().subscribe(t=>{t&&(this.notes$=this.noteService.getUserNotes(t))})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(dU),m.Y36(JI))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-notes-list"]],decls:7,vars:4,consts:[[1,"notes-list-container"],[1,"notes-list-title"],["class","notes-list",4,"ngIf","ngIfElse"],["noNotes",""],[1,"notes-list"],["class","note-card",4,"ngFor","ngForOf"],[1,"note-card"],[1,"note-title"],[1,"note-content"],[1,"empty-notes"]],template:function(t,r){if(1&t&&(m.TgZ(0,"div",0)(1,"h1",1),m._uU(2,"Your Notes"),m.qZA(),m.YNc(3,h3,2,1,"div",2),m.ALo(4,"async"),m.YNc(5,f3,2,0,"ng-template",null,3,m.W1O),m.qZA()),2&t){const i=m.MAs(6);m.xp6(3),m.Q6J("ngIf",m.lcZ(4,2,r.notes$))("ngIfElse",i)}},dependencies:[nl,No,au],styles:[".notes-list-container[_ngcontent-%COMP%]{margin:20px auto;max-width:600px;padding:20px;background-color:#f7f7f7;border-radius:8px;box-shadow:0 2px 4px #0000001a}.notes-list-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}.note-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e0e0e0;border-radius:8px;padding:10px;margin-bottom:10px;display:flex;flex-direction:column}.note-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-bottom:8px}.note-content[_ngcontent-%COMP%]{font-size:14px;color:#555}.empty-notes[_ngcontent-%COMP%]{text-align:center;margin-top:20px;color:#888}"]}),n})(),sk=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(){return this.authService.getUserId().pipe((0,Ct.U)(t=>!!t||(this.router.navigate(["/login"]),!1)))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(JI),m.LFG(ts))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const g3=[{path:"login",component:xU},{path:"create-note",component:c3,canActivate:[sk]},{path:"notes",component:p3,canActivate:[sk]},{path:"",component:NU}];let m3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[p1.forRoot(g3),p1]}),n})();function y3(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"button",4),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.logout())}),m._uU(1," Logout "),m.qZA()}}let _3=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.isAuthenticated=!1,this.isLoginPage=!1}ngOnInit(){this.authService.getUserId().subscribe(t=>{this.isAuthenticated=!!t}),this.router.events.subscribe(t=>{t instanceof la&&(this.isLoginPage="/login"===t.url)})}logout(){this.authService.logout().then(()=>{window.location.href="/login"}).catch(t=>{console.error("Logout error:",t)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(JI),m.Y36(ts))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-navigation-bar"]],decls:6,vars:1,consts:[[1,"navigation-bar"],["routerLink","/create-note"],["routerLink","/notes"],["class","logout-button",3,"click",4,"ngIf"],[1,"logout-button",3,"click"]],template:function(t,r){1&t&&(m.TgZ(0,"nav",0)(1,"a",1),m._uU(2,"Create Note"),m.qZA(),m.TgZ(3,"a",2),m._uU(4,"View Notes"),m.qZA(),m.YNc(5,y3,2,0,"button",3),m.qZA()),2&t&&(m.xp6(5),m.Q6J("ngIf",r.isAuthenticated&&!r.isLoginPage))},dependencies:[No,pm],styles:[".navigation-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;background-color:#333;padding:10px 20px;align-items:center}.navigation-bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:700}.navigation-bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.logout-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px}.logout-button[_ngcontent-%COMP%]:hover{background-color:#c82333}"]}),n})(),v3=(()=>{class n{constructor(t){this.router=t,this.isLoginPage=!1}ngOnInit(){this.router.events.subscribe(t=>{t instanceof la&&(this.isLoginPage="/login"===t.url)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ts))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"app-container"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0),m._UZ(1,"app-navigation-bar")(2,"router-outlet"),m.qZA())},dependencies:[_E,_3],styles:[".logout-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px}.logout-button[_ngcontent-%COMP%]:hover{background-color:#c82333}"]}),n})(),w3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[v3]}),n.\u0275inj=m.cJS({providers:[JI,sk],imports:[wu,tg,dr.hO.initializeApp(Kx_firebaseConfig),PC,qx,m3]}),n})();dl().bootstrapModule(w3).catch(n=>console.error(n))},5619:(ot,De,O)=>{O.d(De,{X:()=>X});var m=O(8645);class X extends m.x{constructor(ee){super(),this._value=ee}get value(){return this.getValue()}_subscribe(ee){const ne=super._subscribe(ee);return!ne.closed&&ee.next(this._value),ne}getValue(){const{hasError:ee,thrownError:ne,_value:pe}=this;if(ee)throw ne;return this._throwIfClosed(),pe}next(ee){super.next(this._value=ee)}}},5592:(ot,De,O)=>{O.d(De,{y:()=>Oe});var m=O(305),X=O(7394),F=O(4850),ee=O(8407),ne=O(2653),pe=O(4674),ge=O(1441);let Oe=(()=>{class J{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const We=new J;return We.source=this,We.operator=Me,We}subscribe(Me,We,Pe){const Ge=function G(J){return J&&J instanceof m.Lv||function U(J){return J&&(0,pe.m)(J.next)&&(0,pe.m)(J.error)&&(0,pe.m)(J.complete)}(J)&&(0,X.Nn)(J)}(Me)?Me:new m.Hp(Me,We,Pe);return(0,ge.x)(()=>{const{operator:Le,source:pt}=this;Ge.add(Le?Le.call(Ge,pt):pt?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(Me){try{return this._subscribe(Me)}catch(We){Me.error(We)}}forEach(Me,We){return new(We=he(We))((Pe,Ge)=>{const Le=new m.Hp({next:pt=>{try{Me(pt)}catch(ut){Ge(ut),Le.unsubscribe()}},error:Ge,complete:Pe});this.subscribe(Le)})}_subscribe(Me){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(Me)}[F.L](){return this}pipe(...Me){return(0,ee.U)(Me)(this)}toPromise(Me){return new(Me=he(Me))((We,Pe)=>{let Ge;this.subscribe(Le=>Ge=Le,Le=>Pe(Le),()=>We(Ge))})}}return J.create=Ue=>new J(Ue),J})();function he(J){var Ue;return null!==(Ue=J??ne.config.Promise)&&void 0!==Ue?Ue:Promise}},8645:(ot,De,O)=>{O.d(De,{x:()=>ge});var m=O(5592),X=O(7394);const ee=(0,O(2306).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=O(9039),pe=O(1441);let ge=(()=>{class he extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const J=new Oe(this,this);return J.operator=G,J}_throwIfClosed(){if(this.closed)throw new ee}next(G){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(G)}})}error(G){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:J}=this;for(;J.length;)J.shift().error(G)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:J,isStopped:Ue,observers:Me}=this;return J||Ue?X.Lc:(this.currentObservers=null,Me.push(G),new X.w0(()=>{this.currentObservers=null,(0,ne.P)(Me,G)}))}_checkFinalizedStatuses(G){const{hasError:J,thrownError:Ue,isStopped:Me}=this;J?G.error(Ue):Me&&G.complete()}asObservable(){const G=new m.y;return G.source=this,G}}return he.create=(U,G)=>new Oe(U,G),he})();class Oe extends ge{constructor(U,G){super(),this.destination=U,this.source=G}next(U){var G,J;null===(J=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===J||J.call(G,U)}error(U){var G,J;null===(J=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===J||J.call(G,U)}complete(){var U,G;null===(G=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===G||G.call(U)}_subscribe(U){var G,J;return null!==(J=null===(G=this.source)||void 0===G?void 0:G.subscribe(U))&&void 0!==J?J:X.Lc}}},305:(ot,De,O)=>{O.d(De,{Hp:()=>Pe,Lv:()=>J});var m=O(4674),X=O(7394),F=O(2653),ee=O(3894),ne=O(2420);const pe=he("C",void 0,void 0);function he(ie,_e,te){return{kind:ie,value:_e,error:te}}var U=O(7599),G=O(1441);class J extends X.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,X.Nn)(_e)&&_e.add(this)):this.destination=ut}static create(_e,te,be){return new Pe(_e,te,be)}next(_e){this.isStopped?pt(function Oe(ie){return he("N",ie,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?pt(function ge(ie){return he("E",void 0,ie)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?pt(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Me(ie,_e){return Ue.call(ie,_e)}class We{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:te}=this;if(te.next)try{te.next(_e)}catch(be){Ge(be)}}error(_e){const{partialObserver:te}=this;if(te.error)try{te.error(_e)}catch(be){Ge(be)}else Ge(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(te){Ge(te)}}}class Pe extends J{constructor(_e,te,be){let Fe;if(super(),(0,m.m)(_e)||!_e)Fe={next:_e??void 0,error:te??void 0,complete:be??void 0};else{let ze;this&&F.config.useDeprecatedNextContext?(ze=Object.create(_e),ze.unsubscribe=()=>this.unsubscribe(),Fe={next:_e.next&&Me(_e.next,ze),error:_e.error&&Me(_e.error,ze),complete:_e.complete&&Me(_e.complete,ze)}):Fe=_e}this.destination=new We(Fe)}}function Ge(ie){F.config.useDeprecatedSynchronousErrorHandling?(0,G.O)(ie):(0,ee.h)(ie)}function pt(ie,_e){const{onStoppedNotification:te}=F.config;te&&U.z.setTimeout(()=>te(ie,_e))}const ut={closed:!0,next:ne.Z,error:function Le(ie){throw ie},complete:ne.Z}},7394:(ot,De,O)=>{O.d(De,{Lc:()=>pe,w0:()=>ne,Nn:()=>ge});var m=O(4674);const F=(0,O(2306).d)(he=>function(G){he(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((J,Ue)=>`${Ue+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ee=O(9039);class ne{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Me of G)Me.remove(this);else G.remove(this);const{initialTeardown:J}=this;if((0,m.m)(J))try{J()}catch(Me){U=Me instanceof F?Me.errors:[Me]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Me of Ue)try{Oe(Me)}catch(We){U=U??[],We instanceof F?U=[...U,...We.errors]:U.push(We)}}if(U)throw new F(U)}}add(U){var G;if(U&&U!==this)if(this.closed)Oe(U);else{if(U instanceof ne){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(U)}}_hasParent(U){const{_parentage:G}=this;return G===U||Array.isArray(G)&&G.includes(U)}_addParent(U){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(U),G):G?[G,U]:U}_removeParent(U){const{_parentage:G}=this;G===U?this._parentage=null:Array.isArray(G)&&(0,ee.P)(G,U)}remove(U){const{_finalizers:G}=this;G&&(0,ee.P)(G,U),U instanceof ne&&U._removeParent(this)}}ne.EMPTY=(()=>{const he=new ne;return he.closed=!0,he})();const pe=ne.EMPTY;function ge(he){return he instanceof ne||he&&"closed"in he&&(0,m.m)(he.remove)&&(0,m.m)(he.add)&&(0,m.m)(he.unsubscribe)}function Oe(he){(0,m.m)(he)?he():he.unsubscribe()}},2653:(ot,De,O)=>{O.d(De,{config:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(ot,De,O)=>{O.d(De,{E:()=>X});const X=new(O(5592).y)(ne=>ne.complete())},2459:(ot,De,O)=>{O.d(De,{D:()=>_e});var m=O(4829),X=O(3093),F=O(5137),pe=O(5592),Oe=O(4971),he=O(4674),U=O(7103);function J(te,be){if(!te)throw new Error("Iterable cannot be null");return new pe.y(Fe=>{(0,U.f)(Fe,be,()=>{const ze=te[Symbol.asyncIterator]();(0,U.f)(Fe,be,()=>{ze.next().then(ae=>{ae.done?Fe.complete():Fe.next(ae.value)})},0,!0)})})}var Ue=O(8382),Me=O(4026),We=O(4266),Pe=O(3664),Ge=O(5726),Le=O(9853),pt=O(541);function _e(te,be){return be?function ie(te,be){if(null!=te){if((0,Ue.c)(te))return function ee(te,be){return(0,m.Xf)(te).pipe((0,F.R)(be),(0,X.Q)(be))}(te,be);if((0,We.z)(te))return function ge(te,be){return new pe.y(Fe=>{let ze=0;return be.schedule(function(){ze===te.length?Fe.complete():(Fe.next(te[ze++]),Fe.closed||this.schedule())})})}(te,be);if((0,Me.t)(te))return function ne(te,be){return(0,m.Xf)(te).pipe((0,F.R)(be),(0,X.Q)(be))}(te,be);if((0,Ge.D)(te))return J(te,be);if((0,Pe.T)(te))return function G(te,be){return new pe.y(Fe=>{let ze;return(0,U.f)(Fe,be,()=>{ze=te[Oe.h](),(0,U.f)(Fe,be,()=>{let ae,_t;try{({value:ae,done:_t}=ze.next())}catch(Ut){return void Fe.error(Ut)}_t?Fe.complete():Fe.next(ae)},0,!0)}),()=>(0,he.m)(ze?.return)&&ze.return()})}(te,be);if((0,pt.L)(te))return function ut(te,be){return J((0,pt.Q)(te),be)}(te,be)}throw(0,Le.z)(te)}(te,be):(0,m.Xf)(te)}},4829:(ot,De,O)=>{O.d(De,{Xf:()=>Ue});var m=O(7582),X=O(4266),F=O(4026),ee=O(5592),ne=O(8382),pe=O(5726),ge=O(9853),Oe=O(3664),he=O(541),U=O(4674),G=O(3894),J=O(4850);function Ue(ie){if(ie instanceof ee.y)return ie;if(null!=ie){if((0,ne.c)(ie))return function Me(ie){return new ee.y(_e=>{const te=ie[J.L]();if((0,U.m)(te.subscribe))return te.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ie);if((0,X.z)(ie))return function We(ie){return new ee.y(_e=>{for(let te=0;te<ie.length&&!_e.closed;te++)_e.next(ie[te]);_e.complete()})}(ie);if((0,F.t)(ie))return function Pe(ie){return new ee.y(_e=>{ie.then(te=>{_e.closed||(_e.next(te),_e.complete())},te=>_e.error(te)).then(null,G.h)})}(ie);if((0,pe.D)(ie))return Le(ie);if((0,Oe.T)(ie))return function Ge(ie){return new ee.y(_e=>{for(const te of ie)if(_e.next(te),_e.closed)return;_e.complete()})}(ie);if((0,he.L)(ie))return function pt(ie){return Le((0,he.Q)(ie))}(ie)}throw(0,ge.z)(ie)}function Le(ie){return new ee.y(_e=>{(function ut(ie,_e){var te,be,Fe,ze;return(0,m.mG)(this,void 0,void 0,function*(){try{for(te=(0,m.KL)(ie);!(be=yield te.next()).done;)if(_e.next(be.value),_e.closed)return}catch(ae){Fe={error:ae}}finally{try{be&&!be.done&&(ze=te.return)&&(yield ze.call(te))}finally{if(Fe)throw Fe.error}}_e.complete()})})(ie,_e).catch(te=>_e.error(te))})}},3019:(ot,De,O)=>{O.d(De,{T:()=>pe});var m=O(7537),X=O(4829),F=O(6232),ee=O(4564),ne=O(2459);function pe(...ge){const Oe=(0,ee.yG)(ge),he=(0,ee._6)(ge,1/0),U=ge;return U.length?1===U.length?(0,X.Xf)(U[0]):(0,m.J)(he)((0,ne.D)(U,Oe)):F.E}},2096:(ot,De,O)=>{O.d(De,{of:()=>F});var m=O(4564),X=O(2459);function F(...ee){const ne=(0,m.yG)(ee);return(0,X.D)(ee,ne)}},8251:(ot,De,O)=>{O.d(De,{x:()=>X});var m=O(305);function X(ee,ne,pe,ge,Oe){return new F(ee,ne,pe,ge,Oe)}class F extends m.Lv{constructor(ne,pe,ge,Oe,he,U){super(ne),this.onFinalize=he,this.shouldUnsubscribe=U,this._next=pe?function(G){try{pe(G)}catch(J){ne.error(J)}}:super._next,this._error=Oe?function(G){try{Oe(G)}catch(J){ne.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(G){ne.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},3997:(ot,De,O)=>{O.d(De,{x:()=>ee});var m=O(2737),X=O(9360),F=O(8251);function ee(pe,ge=m.y){return pe=pe??ne,(0,X.e)((Oe,he)=>{let U,G=!0;Oe.subscribe((0,F.x)(he,J=>{const Ue=ge(J);(G||!pe(U,Ue))&&(G=!1,U=Ue,he.next(J))}))})}function ne(pe,ge){return pe===ge}},7398:(ot,De,O)=>{O.d(De,{U:()=>F});var m=O(9360),X=O(8251);function F(ee,ne){return(0,m.e)((pe,ge)=>{let Oe=0;pe.subscribe((0,X.x)(ge,he=>{ge.next(ee.call(ne,he,Oe++))}))})}},7537:(ot,De,O)=>{O.d(De,{J:()=>F});var m=O(1631),X=O(2737);function F(ee=1/0){return(0,m.z)(X.y,ee)}},1631:(ot,De,O)=>{O.d(De,{z:()=>Oe});var m=O(7398),X=O(4829),F=O(9360),ee=O(7103),ne=O(8251),ge=O(4674);function Oe(he,U,G=1/0){return(0,ge.m)(U)?Oe((J,Ue)=>(0,m.U)((Me,We)=>U(J,Me,Ue,We))((0,X.Xf)(he(J,Ue))),G):("number"==typeof U&&(G=U),(0,F.e)((J,Ue)=>function pe(he,U,G,J,Ue,Me,We,Pe){const Ge=[];let Le=0,pt=0,ut=!1;const ie=()=>{ut&&!Ge.length&&!Le&&U.complete()},_e=be=>Le<J?te(be):Ge.push(be),te=be=>{Me&&U.next(be),Le++;let Fe=!1;(0,X.Xf)(G(be,pt++)).subscribe((0,ne.x)(U,ze=>{Ue?.(ze),Me?_e(ze):U.next(ze)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(Le--;Ge.length&&Le<J;){const ze=Ge.shift();We?(0,ee.f)(U,We,()=>te(ze)):te(ze)}ie()}catch(ze){U.error(ze)}}))};return he.subscribe((0,ne.x)(U,_e,()=>{ut=!0,ie()})),()=>{Pe?.()}}(J,Ue,he,G)))}},3093:(ot,De,O)=>{O.d(De,{Q:()=>ee});var m=O(7103),X=O(9360),F=O(8251);function ee(ne,pe=0){return(0,X.e)((ge,Oe)=>{ge.subscribe((0,F.x)(Oe,he=>(0,m.f)(Oe,ne,()=>Oe.next(he),pe),()=>(0,m.f)(Oe,ne,()=>Oe.complete(),pe),he=>(0,m.f)(Oe,ne,()=>Oe.error(he),pe)))})}},3020:(ot,De,O)=>{O.d(De,{B:()=>ne});var m=O(4829),X=O(8645),F=O(305),ee=O(9360);function ne(ge={}){const{connector:Oe=(()=>new X.x),resetOnError:he=!0,resetOnComplete:U=!0,resetOnRefCountZero:G=!0}=ge;return J=>{let Ue,Me,We,Pe=0,Ge=!1,Le=!1;const pt=()=>{Me?.unsubscribe(),Me=void 0},ut=()=>{pt(),Ue=We=void 0,Ge=Le=!1},ie=()=>{const _e=Ue;ut(),_e?.unsubscribe()};return(0,ee.e)((_e,te)=>{Pe++,!Le&&!Ge&&pt();const be=We=We??Oe();te.add(()=>{Pe--,0===Pe&&!Le&&!Ge&&(Me=pe(ie,G))}),be.subscribe(te),!Ue&&Pe>0&&(Ue=new F.Hp({next:Fe=>be.next(Fe),error:Fe=>{Le=!0,pt(),Me=pe(ut,he,Fe),be.error(Fe)},complete:()=>{Ge=!0,pt(),Me=pe(ut,U),be.complete()}}),(0,m.Xf)(_e).subscribe(Ue))})(J)}}function pe(ge,Oe,...he){if(!0===Oe)return void ge();if(!1===Oe)return;const U=new F.Hp({next:()=>{U.unsubscribe(),ge()}});return(0,m.Xf)(Oe(...he)).subscribe(U)}},5137:(ot,De,O)=>{O.d(De,{R:()=>X});var m=O(9360);function X(F,ee=0){return(0,m.e)((ne,pe)=>{pe.add(F.schedule(()=>ne.subscribe(pe),ee))})}},4664:(ot,De,O)=>{O.d(De,{w:()=>ee});var m=O(4829),X=O(9360),F=O(8251);function ee(ne,pe){return(0,X.e)((ge,Oe)=>{let he=null,U=0,G=!1;const J=()=>G&&!he&&Oe.complete();ge.subscribe((0,F.x)(Oe,Ue=>{he?.unsubscribe();let Me=0;const We=U++;(0,m.Xf)(ne(Ue,We)).subscribe(he=(0,F.x)(Oe,Pe=>Oe.next(pe?pe(Ue,Pe,We,Me++):Pe),()=>{he=null,J()}))},()=>{G=!0,J()}))})}},9397:(ot,De,O)=>{O.d(De,{b:()=>ne});var m=O(4674),X=O(9360),F=O(8251),ee=O(2737);function ne(pe,ge,Oe){const he=(0,m.m)(pe)||ge||Oe?{next:pe,error:ge,complete:Oe}:pe;return he?(0,X.e)((U,G)=>{var J;null===(J=he.subscribe)||void 0===J||J.call(he);let Ue=!0;U.subscribe((0,F.x)(G,Me=>{var We;null===(We=he.next)||void 0===We||We.call(he,Me),G.next(Me)},()=>{var Me;Ue=!1,null===(Me=he.complete)||void 0===Me||Me.call(he),G.complete()},Me=>{var We;Ue=!1,null===(We=he.error)||void 0===We||We.call(he,Me),G.error(Me)},()=>{var Me,We;Ue&&(null===(Me=he.unsubscribe)||void 0===Me||Me.call(he)),null===(We=he.finalize)||void 0===We||We.call(he)}))}):ee.y}},1954:(ot,De,O)=>{O.d(De,{o:()=>ne});var m=O(7394);class X extends m.w0{constructor(ge,Oe){super()}schedule(ge,Oe=0){return this}}const F={setInterval(pe,ge,...Oe){const{delegate:he}=F;return he?.setInterval?he.setInterval(pe,ge,...Oe):setInterval(pe,ge,...Oe)},clearInterval(pe){const{delegate:ge}=F;return(ge?.clearInterval||clearInterval)(pe)},delegate:void 0};var ee=O(9039);class ne extends X{constructor(ge,Oe){super(ge,Oe),this.scheduler=ge,this.work=Oe,this.pending=!1}schedule(ge,Oe=0){var he;if(this.closed)return this;this.state=ge;const U=this.id,G=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(G,U,Oe)),this.pending=!0,this.delay=Oe,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(G,this.id,Oe),this}requestAsyncId(ge,Oe,he=0){return F.setInterval(ge.flush.bind(ge,this),he)}recycleAsyncId(ge,Oe,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return Oe;null!=Oe&&F.clearInterval(Oe)}execute(ge,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ge,Oe);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,Oe){let U,he=!1;try{this.work(ge)}catch(G){he=!0,U=G||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:ge,scheduler:Oe}=this,{actions:he}=Oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(he,this),null!=ge&&(this.id=this.recycleAsyncId(Oe,ge,null)),this.delay=null,super.unsubscribe()}}}},2631:(ot,De,O)=>{O.d(De,{v:()=>F});var m=O(4552);class X{constructor(ne,pe=X.now){this.schedulerActionCtor=ne,this.now=pe}schedule(ne,pe=0,ge){return new this.schedulerActionCtor(this,ne).schedule(ge,pe)}}X.now=m.l.now;class F extends X{constructor(ne,pe=X.now){super(ne,pe),this.actions=[],this._active=!1}flush(ne){const{actions:pe}=this;if(this._active)return void pe.push(ne);let ge;this._active=!0;do{if(ge=ne.execute(ne.state,ne.delay))break}while(ne=pe.shift());if(this._active=!1,ge){for(;ne=pe.shift();)ne.unsubscribe();throw ge}}}},6321:(ot,De,O)=>{O.d(De,{z:()=>F});var m=O(1954);const F=new(O(2631).v)(m.o)},4552:(ot,De,O)=>{O.d(De,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},7599:(ot,De,O)=>{O.d(De,{z:()=>m});const m={setTimeout(X,F,...ee){const{delegate:ne}=m;return ne?.setTimeout?ne.setTimeout(X,F,...ee):setTimeout(X,F,...ee)},clearTimeout(X){const{delegate:F}=m;return(F?.clearTimeout||clearTimeout)(X)},delegate:void 0}},4971:(ot,De,O)=>{O.d(De,{h:()=>X});const X=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(ot,De,O)=>{O.d(De,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(ot,De,O)=>{O.d(De,{_6:()=>pe,jO:()=>ee,yG:()=>ne});var m=O(4674);function F(ge){return ge[ge.length-1]}function ee(ge){return(0,m.m)(F(ge))?ge.pop():void 0}function ne(ge){return function X(ge){return ge&&(0,m.m)(ge.schedule)}(F(ge))?ge.pop():void 0}function pe(ge,Oe){return"number"==typeof F(ge)?ge.pop():Oe}},9039:(ot,De,O)=>{function m(X,F){if(X){const ee=X.indexOf(F);0<=ee&&X.splice(ee,1)}}O.d(De,{P:()=>m})},2306:(ot,De,O)=>{function m(X){const ee=X(ne=>{Error.call(ne),ne.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}O.d(De,{d:()=>m})},1441:(ot,De,O)=>{O.d(De,{O:()=>ee,x:()=>F});var m=O(2653);let X=null;function F(ne){if(m.config.useDeprecatedSynchronousErrorHandling){const pe=!X;if(pe&&(X={errorThrown:!1,error:null}),ne(),pe){const{errorThrown:ge,error:Oe}=X;if(X=null,ge)throw Oe}}else ne()}function ee(ne){m.config.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=ne)}},7103:(ot,De,O)=>{function m(X,F,ee,ne=0,pe=!1){const ge=F.schedule(function(){ee(),pe?X.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(X.add(ge),!pe)return ge}O.d(De,{f:()=>m})},2737:(ot,De,O)=>{function m(X){return X}O.d(De,{y:()=>m})},4266:(ot,De,O)=>{O.d(De,{z:()=>m});const m=X=>X&&"number"==typeof X.length&&"function"!=typeof X},5726:(ot,De,O)=>{O.d(De,{D:()=>X});var m=O(4674);function X(F){return Symbol.asyncIterator&&(0,m.m)(F?.[Symbol.asyncIterator])}},4674:(ot,De,O)=>{function m(X){return"function"==typeof X}O.d(De,{m:()=>m})},8382:(ot,De,O)=>{O.d(De,{c:()=>F});var m=O(4850),X=O(4674);function F(ee){return(0,X.m)(ee[m.L])}},3664:(ot,De,O)=>{O.d(De,{T:()=>F});var m=O(4971),X=O(4674);function F(ee){return(0,X.m)(ee?.[m.h])}},4026:(ot,De,O)=>{O.d(De,{t:()=>X});var m=O(4674);function X(F){return(0,m.m)(F?.then)}},541:(ot,De,O)=>{O.d(De,{L:()=>ee,Q:()=>F});var m=O(7582),X=O(4674);function F(ne){return(0,m.FC)(this,arguments,function*(){const ge=ne.getReader();try{for(;;){const{value:Oe,done:he}=yield(0,m.qq)(ge.read());if(he)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(Oe)}}finally{ge.releaseLock()}})}function ee(ne){return(0,X.m)(ne?.getReader)}},9360:(ot,De,O)=>{O.d(De,{A:()=>X,e:()=>F});var m=O(4674);function X(ee){return(0,m.m)(ee?.lift)}function F(ee){return ne=>{if(X(ne))return ne.lift(function(pe){try{return ee(pe,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(ot,De,O)=>{function m(){}O.d(De,{Z:()=>m})},8407:(ot,De,O)=>{O.d(De,{U:()=>F,z:()=>X});var m=O(2737);function X(...ee){return F(ee)}function F(ee){return 0===ee.length?m.y:1===ee.length?ee[0]:function(pe){return ee.reduce((ge,Oe)=>Oe(ge),pe)}}},3894:(ot,De,O)=>{O.d(De,{h:()=>F});var m=O(2653),X=O(7599);function F(ee){X.z.setTimeout(()=>{const{onUnhandledError:ne}=m.config;if(!ne)throw ee;ne(ee)})}},9853:(ot,De,O)=>{function m(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(De,{z:()=>m})},5879:(ot,De,O)=>{O.d(De,{$8M:()=>La,$WT:()=>to,$Z:()=>rf,AFp:()=>bC,ALo:()=>$b,AaK:()=>J,CHM:()=>Rp,CRH:()=>ua,EJc:()=>gN,EpF:()=>ID,F4k:()=>CD,FYo:()=>PC,FiY:()=>qo,GfV:()=>D0,Gpc:()=>We,HDt:()=>cT,JOm:()=>Rh,KtG:()=>io,LFG:()=>tn,Lbi:()=>My,Lck:()=>Ix,MAs:()=>vD,MMx:()=>xb,NdJ:()=>aw,Ojb:()=>SA,OlP:()=>hn,Oqu:()=>g_,P3R:()=>yC,PXZ:()=>yT,Q6J:()=>xn,QGY:()=>ow,Qsj:()=>OC,R0b:()=>Ei,RDi:()=>aC,Rgc:()=>em,SBq:()=>ud,Sil:()=>_N,Suo:()=>Xb,TTD:()=>Ma,TgZ:()=>If,VuI:()=>WN,W1O:()=>tE,X6Q:()=>Hf,XFs:()=>ht,Xpm:()=>Ro,Xq5:()=>K0,Xts:()=>Gh,Y36:()=>nf,YKP:()=>bo,YNc:()=>Ng,Yjl:()=>sc,Yz7:()=>Nt,Z0I:()=>cn,ZZ4:()=>RE,_Bn:()=>Tb,_UZ:()=>Og,_c5:()=>UN,_uU:()=>p_,aQg:()=>qf,c2e:()=>um,cJS:()=>bn,cg1:()=>C_,dDg:()=>yE,dqk:()=>nn,eFA:()=>CN,eJc:()=>wn,ekj:()=>d_,eoX:()=>Q_,f3M:()=>Kt,g9A:()=>dg,h0i:()=>Ff,hGG:()=>BN,iGM:()=>bd,ifc:()=>Tn,ip1:()=>Z_,jDz:()=>Nb,kL8:()=>xf,lG2:()=>ic,lcZ:()=>qw,lqb:()=>ad,lri:()=>Y_,n5z:()=>Lc,oAB:()=>Ps,oxw:()=>AD,q4F:()=>kC,qFp:()=>pm,qLn:()=>ld,qOj:()=>Zt,qZA:()=>Pg,rWj:()=>mE,rg0:()=>ah,sBO:()=>dm,s_b:()=>F_,soG:()=>Bf,tb:()=>xd,tp0:()=>Ur,uIk:()=>ra,vHH:()=>ie,vpe:()=>oa,wAp:()=>_i,xp6:()=>ef,z2F:()=>$f,zSh:()=>Sy,zs3:()=>xl});var m=O(8645),X=O(7394),F=O(5619),ee=O(5592),ne=O(3019),pe=O(2096),ge=O(3020),Oe=O(4664),he=O(3997);function U(s){for(let o in s)if(s[o]===U)return o;throw Error("Could not find renamed property on target object.")}function G(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function J(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(J).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Ue(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Me=U({__forward_ref__:U});function We(s){return s.__forward_ref__=We,s.toString=function(){return J(this())},s}function Pe(s){return Ge(s)?s():s}function Ge(s){return"function"==typeof s&&s.hasOwnProperty(Me)&&s.__forward_ref__===We}function Le(s){return s&&!!s.\u0275providers}const ut="https://g.co/ng/security#xss";class ie extends Error{constructor(o,u){super(function _e(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function te(s){return"string"==typeof s?s:null==s?"":String(s)}function _t(s,o){throw new ie(-201,!1)}function Qe(s,o){null==s&&function rt(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Nt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function bn(s){return{providers:s.providers||[],imports:s.imports||[]}}function lr(s){return Cr(s,ni)||Cr(s,Xs)}function cn(s){return null!==lr(s)}function Cr(s,o){return s.hasOwnProperty(o)?s[o]:null}function ga(s){return s&&(s.hasOwnProperty(ri)||s.hasOwnProperty(iu))?s[ri]:null}const ni=U({\u0275prov:U}),ri=U({\u0275inj:U}),Xs=U({ngInjectableDef:U}),iu=U({ngInjectorDef:U});var ht=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(ht||{});let Bt;function _n(s){const o=Bt;return Bt=s,o}function Nn(s,o,u){const c=lr(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&ht.Optional?null:void 0!==o?o:void _t(J(s))}const nn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Dr={},Ot="__NG_DI_FLAG__",Bi="ngTempTokenPath",ya=/\n/gm,us="__source";let mr;function En(s){const o=mr;return mr=s,o}function ls(s,o=ht.Default){if(void 0===mr)throw new ie(-203,!1);return null===mr?Nn(s,void 0,o):mr.get(s,o&ht.Optional?null:void 0,o)}function tn(s,o=ht.Default){return(function bt(){return Bt}()||ls)(Pe(s),o)}function Kt(s,o=ht.Default){return tn(s,$(o))}function $(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function B(s){const o=[];for(let u=0;u<s.length;u++){const c=Pe(s[u]);if(Array.isArray(c)){if(0===c.length)throw new ie(900,!1);let d,p=ht.Default;for(let _=0;_<c.length;_++){const I=c[_],D=Ce(I);"number"==typeof D?-1===D?d=I.token:p|=D:d=I}o.push(tn(d,p))}else o.push(tn(c))}return o}function q(s,o){return s[Ot]=o,s.prototype[Ot]=o,s}function Ce(s){return s[Ot]}function ft(s){return{toString:s}.toString()}var jt=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(jt||{}),Tn=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(Tn||{});const pn={},Et=[],zt=U({\u0275cmp:U}),yr=U({\u0275dir:U}),Di=U({\u0275pipe:U}),ds=U({\u0275mod:U}),si=U({\u0275fac:U}),fe=U({__NG_ELEMENT_ID__:U}),re=U({__NG_ENV_ID__:U});function ke(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}u=d+1}}function at(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const p=u[c++],_=u[c++],I=u[c++];s.setAttribute(o,_,I,p)}else{const p=d,_=u[++c];Rt(p)?s.setProperty(o,p,_):s.setAttribute(o,p,_),c++}}return c}function It(s){return 3===s||4===s||6===s}function Rt(s){return 64===s.charCodeAt(0)}function Qt(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||nr(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function nr(s,o,u,c,d){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const I=s[p++];if("number"==typeof I){if(I===o){_=-1;break}if(I>o){_=p-1;break}}}for(;p<s.length;){const I=s[p];if("number"==typeof I)break;if(I===u){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}const Kn="ng-template";function Rs(s,o,u){let c=0,d=!0;for(;c<s.length;){let p=s[c++];if("string"==typeof p&&d){const _=s[c++];if(u&&"class"===p&&-1!==ke(_.toLowerCase(),o,0))return!0}else{if(1===p){for(;c<s.length&&"string"==typeof(p=s[c++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function xo(s){return 4===s.type&&s.value!==Kn}function su(s,o,u){return o===(4!==s.type||u?s.value:Kn)}function $d(s,o,u){let c=4;const d=s.attrs||[],p=function nl(s){for(let o=0;o<s.length;o++)if(It(s[o]))return o;return s.length}(d);let _=!1;for(let I=0;I<o.length;I++){const D=o[I];if("number"!=typeof D){if(!_)if(4&c){if(c=2|1&c,""!==D&&!su(s,D,u)||""===D&&1===o.length){if(oi(c))return!1;_=!0}}else{const A=8&c?D:o[++I];if(8&c&&null!==s.attrs){if(!Rs(s.attrs,A,u)){if(oi(c))return!1;_=!0}continue}const V=Hd(8&c?"class":D,d,xo(s),u);if(-1===V){if(oi(c))return!1;_=!0;continue}if(""!==A){let W;W=V>p?"":d[V+1].toLowerCase();const Q=8&c?W:null;if(Q&&-1!==ke(Q,A,0)||2&c&&A!==W){if(oi(c))return!1;_=!0}}}}else{if(!_&&!oi(c)&&!oi(D))return!1;if(_&&oi(D))continue;_=!1,c=D|1&c}}return oi(c)||_}function oi(s){return 0==(1&s)}function Hd(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let p=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function Gd(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function bi(s,o,u=!1){for(let c=0;c<o.length;c++)if($d(s,o[c],u))return!0;return!1}function No(s,o){return s?":not("+o.trim()+")":o}function jm(s){let o=s[0],u=1,c=2,d="",p=!1;for(;u<s.length;){let _=s[u];if("string"==typeof _)if(2&c){const I=s[++u];d+="["+_+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!oi(_)&&(o+=No(p,d),d=""),c=_,p=p||!oi(c);u++}return""!==d&&(o+=No(p,d)),o}function Ro(s){return ft(()=>{const o=au(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===jt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||Tn.Emulated,styles:s.styles||Et,_:null,schemas:s.schemas||null,tView:null,id:""};oc(u);const c=s.dependencies;return u.directiveDefs=_a(c,!1),u.pipeDefs=_a(c,!0),u.id=function qd(s){let o=0;const u=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const d of u)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(u),u})}function Wd(s){return Pt(s)||cr(s)}function $m(s){return null!==s}function Ps(s){return ft(()=>({type:s.type,bootstrap:s.bootstrap||Et,declarations:s.declarations||Et,imports:s.imports||Et,exports:s.exports||Et,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function ou(s,o){if(null==s)return pn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=c,o&&(o[d]=p)}return u}function ic(s){return ft(()=>{const o=au(s);return oc(o),o})}function sc(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Pt(s){return s[zt]||null}function cr(s){return s[yr]||null}function dn(s){return s[Di]||null}function to(s){const o=Pt(s)||cr(s)||dn(s);return null!==o&&o.standalone}function br(s,o){const u=s[ds]||null;if(!u&&!0===o)throw new Error(`Type ${J(s)} does not have '\u0275mod' property.`);return u}function au(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:s.inputs||pn,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Et,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ou(s.inputs,o),outputs:ou(s.outputs)}}function oc(s){s.features?.forEach(o=>o(s))}function _a(s,o){if(!s)return null;const u=o?dn:Wd;return()=>("function"==typeof s?s():s).map(c=>u(c)).filter($m)}const Hn=0,Ke=1,At=2,Cn=3,ai=4,va=5,Fr=6,Po=7,Sn=8,_r=9,Os=10,Mt=11,qr=12,Kd=13,hs=14,Rn=15,wa=16,lu=17,Ti=18,Ea=19,Zd=20,ui=21,Gn=22,ac=23,Oo=24,Ft=25,il=1,fs=2,Kr=7,ko=9,vr=11;function zn(s){return Array.isArray(s)&&"object"==typeof s[il]}function li(s){return Array.isArray(s)&&!0===s[il]}function Ia(s){return 0!=(4&s.flags)}function ks(s){return s.componentOffset>-1}function Fs(s){return 1==(1&s.flags)}function wr(s){return!!s.template}function Tr(s){return 0!=(512&s[At])}function Ca(s,o){return s.hasOwnProperty(si)?s[si]:null}let rh=nn.WeakRef??class pu{constructor(o){this.ref=o}deref(){return this.ref}},ba=0,gs=null,Ta=!1;function Yn(s){const o=gs;return gs=s,o}class Zr{constructor(){this.id=ba++,this.ref=function Da(s){return new rh(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[o,u]of this.producers){const c=u.producerNode.deref();if(null!=c&&u.atTrackingVersion===this.trackingVersion){if(c.producerPollStatus(u.seenValueVersion))return!0}else this.producers.delete(o),c?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const o=Ta;Ta=!0;try{for(const[u,c]of this.consumers){const d=c.consumerNode.deref();null!=d&&d.trackingVersion===c.atTrackingVersion?d.onConsumerDependencyMayHaveChanged():(this.consumers.delete(u),d?.producers.delete(this.id))}}finally{Ta=o}}producerAccessed(){if(Ta)throw new Error("");if(null===gs)return;let o=gs.producers.get(this.id);void 0===o?(o={consumerNode:gs.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:gs.trackingVersion},gs.producers.set(this.id,o),this.consumers.set(gs.id,o)):(o.seenValueVersion=this.valueVersion,o.atTrackingVersion=gs.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==gs?.consumerAllowSignalWrites}producerPollStatus(o){return this.valueVersion!==o||(this.onProducerUpdateValueVersion(),this.valueVersion!==o)}}let oh=null;function ah(s){const o=Yn(null);try{return s()}finally{Yn(o)}}const gc=()=>{};class mc extends Zr{constructor(o,u,c){super(),this.watch=o,this.schedule=u,this.dirty=!1,this.cleanupFn=gc,this.registerOnCleanup=d=>{this.cleanupFn=d},this.consumerAllowSignalWrites=c}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const o=Yn(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=gc,this.watch(this.registerOnCleanup)}finally{Yn(o)}}cleanup(){this.cleanupFn()}}class yc{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ma(){return ol}function ol(s){return s.type.prototype.ngOnChanges&&(s.setInput=Sp),mu}function mu(){const s=Ap(this),o=s?.current;if(o){const u=s.previous;if(u===pn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Sp(s,o,u,c){const d=this.declaredInputs[u],p=Ap(s)||function al(s,o){return s[_c]=o}(s,{previous:pn,current:null}),_=p.current||(p.current={}),I=p.previous,D=I[d];_[d]=new yc(D&&D.currentValue,o,I===pn),s[c]=o}Ma.ngInherit=!0;const _c="__ngSimpleChanges__";function Ap(s){return s[_c]||null}const ms=function(s,o,u){};function rn(s){for(;Array.isArray(s);)s=s[Hn];return s}function xa(s,o){return rn(o[s])}function Ar(s,o){return rn(o[s.index])}function ch(s,o){return s.data[o]}function Vs(s,o){return s[o]}function Mi(s,o){const u=o[s];return zn(u)?u:u[Hn]}function ys(s,o){return null==o?null:s[o]}function hh(s){s[lu]=0}function Ec(s){1024&s[At]||(s[At]|=1024,Ic(s,1))}function ul(s){1024&s[At]&&(s[At]&=-1025,Ic(s,-1))}function Ic(s,o){let u=s[Cn];if(null===u)return;u[va]+=o;let c=u;for(u=u[Cn];null!==u&&(1===o&&1===c[va]||-1===o&&0===c[va]);)u[va]+=o,c=u,u=u[Cn]}const wt={lFrame:Mc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Dc(){return wt.bindingsEnabled}function Se(){return wt.lFrame.lView}function Wt(){return wt.lFrame.tView}function Rp(s){return wt.lFrame.contextLView=s,s[Sn]}function io(s){return wt.lFrame.contextLView=null,s}function Mr(){let s=so();for(;null!==s&&64===s.type;)s=s.parent;return s}function so(){return wt.lFrame.currentTNode}function $i(s,o){const u=wt.lFrame;u.currentTNode=s,u.isParent=o}function vu(){return wt.lFrame.isParent}function Pn(){return wt.lFrame.bindingIndex++}function mh(s,o){const u=wt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Iu(o)}function Iu(s){wt.lFrame.currentDirectiveIndex=s}function Cu(){return wt.lFrame.currentQueryIndex}function Lo(s){wt.lFrame.currentQueryIndex=s}function _s(s){const o=s[Ke];return 2===o.type?o.declTNode:1===o.type?s[Fr]:null}function hl(s,o,u){if(u&ht.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&ht.Host||(d=_s(p),null===d||(p=p[hs],10&d.type))););if(null===d)return!1;o=d,s=p}const c=wt.lFrame=bu();return c.currentTNode=o,c.lView=s,!0}function Du(s){const o=bu(),u=s[Ke];wt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function bu(){const s=wt.lFrame,o=null===s?null:s.child;return null===o?Mc(s):o}function Mc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Pp(){const s=wt.lFrame;return wt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const qm=Pp;function Vo(){const s=Pp();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Yr(){return wt.lFrame.selectedIndex}function oo(s){wt.lFrame.selectedIndex=s}function Bn(){const s=wt.lFrame;return ch(s.tView,s.selectedIndex)}let xc=!0;function Su(){return xc}function Uo(s){xc=s}function Nc(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:I,ngAfterViewInit:D,ngAfterViewChecked:A,ngOnDestroy:R}=p;_&&(s.contentHooks??=[]).push(-u,_),I&&((s.contentHooks??=[]).push(u,I),(s.contentCheckHooks??=[]).push(u,I)),D&&(s.viewHooks??=[]).push(-u,D),A&&((s.viewHooks??=[]).push(u,A),(s.viewCheckHooks??=[]).push(u,A)),null!=R&&(s.destroyHooks??=[]).push(u,R)}}function Pa(s,o,u){On(s,o,3,u)}function Rc(s,o,u,c){(3&s[At])===u&&On(s,o,u,c)}function pl(s,o){let u=s[At];(3&u)===o&&(u&=8191,u+=1,s[At]=u)}function On(s,o,u,c){const p=c??-1,_=o.length-1;let I=0;for(let D=void 0!==c?65535&s[lu]:0;D<_;D++)if("number"==typeof o[D+1]){if(I=o[D],null!=c&&I>=c)break}else o[D]<0&&(s[lu]+=65536),(I<p||-1==p)&&(kp(s,u,o,D),s[lu]=(4294901760&s[lu])+D+2),D++}function Vr(s,o){ms(4,s,o);const u=Yn(null);try{o.call(s)}finally{Yn(u),ms(5,s,o)}}function kp(s,o,u,c){const d=u[c]<0,p=u[c+1],I=s[d?-u[c]:u[c]];d?s[At]>>13<s[lu]>>16&&(3&s[At])===o&&(s[At]+=8192,Vr(I,p)):Vr(I,p)}const vs=-1;class Au{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function uo(s){return s!==vs}function Nr(s){return 32767&s}function xu(s,o){let u=function Oc(s){return s>>16}(s),c=o;for(;u>0;)c=c[hs],u--;return c}let jo=!0;function ci(s){const o=jo;return jo=s,o}const zi=255,Nu=5;let wh=0;const ws={};function $o(s,o){const u=Ru(s,o);if(-1!==u)return u;const c=o[Ke];c.firstCreatePass&&(s.injectorIndex=o.length,Ni(c.data,s),Ni(o,null),Ni(c.blueprint,null));const d=Qn(s,o),p=s.injectorIndex;if(uo(d)){const _=Nr(d),I=xu(d,o),D=I[Ke].data;for(let A=0;A<8;A++)o[p+A]=I[_+A]|D[_+A]}return o[p+8]=d,p}function Ni(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ru(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Qn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=Ih(d),null===c)return vs;if(u++,d=d[hs],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return vs}function di(s,o,u){!function kc(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(fe)&&(c=u[fe]),null==c&&(c=u[fe]=wh++);const d=c&zi;o.data[s+(d>>Nu)]|=1<<d}(s,o,u)}function Fc(s,o,u){if(u&ht.Optional||void 0!==s)return s;_t()}function gl(s,o,u,c){if(u&ht.Optional&&void 0===c&&(c=null),!(u&(ht.Self|ht.Host))){const d=s[_r],p=_n(void 0);try{return d?d.get(o,c,u&ht.Optional):Nn(o,c,u&ht.Optional)}finally{_n(p)}}return Fc(c,0,u)}function ml(s,o,u,c=ht.Default,d){if(null!==s){if(2048&o[At]&&!(c&ht.Self)){const _=function Lp(s,o,u,c,d){let p=s,_=o;for(;null!==p&&null!==_&&2048&_[At]&&!(512&_[At]);){const I=yl(p,_,u,c|ht.Self,ws);if(I!==ws)return I;let D=p.parent;if(!D){const A=_[Zd];if(A){const R=A.get(u,ws,c);if(R!==ws)return R}D=Ih(_),_=_[hs]}p=D}return d}(s,o,u,c,ws);if(_!==ws)return _}const p=yl(s,o,u,c,ws);if(p!==ws)return p}return gl(o,u,c,d)}function yl(s,o,u,c,d){const p=function _l(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(fe)?s[fe]:void 0;return"number"==typeof o?o>=0?o&zi:Eh:o}(u);if("function"==typeof p){if(!hl(o,s,c))return c&ht.Host?Fc(d,0,c):gl(o,u,c,d);try{const _=p(c);if(null!=_||c&ht.Optional)return _;_t()}finally{qm()}}else if("number"==typeof p){let _=null,I=Ru(s,o),D=vs,A=c&ht.Host?o[Rn][Fr]:null;for((-1===I||c&ht.SkipSelf)&&(D=-1===I?Qn(s,o):o[I+8],D!==vs&&Pu(c,!1)?(_=o[Ke],I=Nr(D),o=xu(D,o)):I=-1);-1!==I;){const R=o[Ke];if(vl(p,I,R.data)){const V=Fp(I,o,u,_,c,A);if(V!==ws)return V}D=o[I+8],D!==vs&&Pu(c,o[Ke].data[I+8]===A)&&vl(p,I,o)?(_=R,I=Nr(D),o=xu(D,o)):I=-1}}return d}function Fp(s,o,u,c,d,p){const _=o[Ke],I=_.data[s+8],R=Ho(I,_,u,null==c?ks(I)&&jo:c!=_&&0!=(3&I.type),d&ht.Host&&p===I);return null!==R?lo(o,_,R,I):ws}function Ho(s,o,u,c,d){const p=s.providerIndexes,_=o.data,I=1048575&p,D=s.directiveStart,R=p>>20,W=d?I+R:s.directiveEnd;for(let Q=c?I:I+R;Q<W;Q++){const Ee=_[Q];if(Q<D&&u===Ee||Q>=D&&Ee.type===u)return Q}if(d){const Q=_[D];if(Q&&wr(Q)&&Q.type===u)return D}return null}function lo(s,o,u,c){let d=s[u];const p=o.data;if(function Mu(s){return s instanceof Au}(d)){const _=d;_.resolving&&function Fe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ie(-200,`Circular dependency in DI detected for ${s}${u}`)}(function be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():te(s)}(p[u]));const I=ci(_.canSeeViewProviders);_.resolving=!0;const D=_.injectImpl?_n(_.injectImpl):null;hl(s,c,ht.Default);try{d=s[u]=_.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function vh(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const _=ol(o);(u.preOrderHooks??=[]).push(s,_),(u.preOrderCheckHooks??=[]).push(s,_)}d&&(u.preOrderHooks??=[]).push(0-s,d),p&&((u.preOrderHooks??=[]).push(s,p),(u.preOrderCheckHooks??=[]).push(s,p))}(u,p[u],o)}finally{null!==D&&_n(D),ci(I),_.resolving=!1,qm()}}return d}function vl(s,o,u){return!!(u[o+(s>>Nu)]&1<<s)}function Pu(s,o){return!(s&ht.Self||s&ht.Host&&o)}class Us{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return ml(this._tNode,this._lView,o,$(c),u)}}function Eh(){return new Us(Mr(),Se())}function Lc(s){return ft(()=>{const o=s.prototype.constructor,u=o[si]||Fa(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const p=d[si]||Fa(d);if(p&&p!==u)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Fa(s){return Ge(s)?()=>{const o=Fa(Pe(s));return o&&o()}:Ca(s)}function Ih(s){const o=s[Ke],u=o.type;return 2===u?o.declTNode:1===u?s[Fr]:null}function La(s){return function Ym(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const p=u[d];if(It(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(Mr(),s)}const Bs="__parameters__";function qi(s,o,u){return ft(()=>{const c=function Go(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const _=new d(...p);return I.annotation=_,I;function I(D,A,R){const V=D.hasOwnProperty(Bs)?D[Bs]:Object.defineProperty(D,Bs,{value:[]})[Bs];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(_),D}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}function Ki(s,o){s.forEach(u=>Array.isArray(u)?Ki(u,o):o(u))}function Xm(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Ch(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function b(s,o,u){let c=L(s,o);return c>=0?s[1|c]=u:(c=~c,function Wv(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function x(s,o){const u=L(s,o);if(u>=0)return s[1|u]}function L(s,o){return function K(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const p=c+(d-c>>1),_=s[p<<u];if(o===_)return p<<u;_>o?d=p:c=p+1}return~(d<<u)}(s,o,1)}const qo=q(qi("Optional"),8),Ur=q(qi("SkipSelf"),4);function Nh(s){return 128==(128&s.flags)}var Rh=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(Rh||{});const Oh=new Map;let qc=0;const Cl="__ngContext__";function Br(s,o){zn(o)?(s[Cl]=o[Ea],function Kp(s){Oh.set(s[Ea],s)}(o)):s[Cl]=o}let Zc;function go(s,o){return Zc(s,o)}function Dl(s){const o=s[Cn];return li(o)?o[Cn]:o}function Yc(s){return Qc(s[qr])}function fi(s){return Qc(s[ai])}function Qc(s){for(;null!==s&&!li(s);)s=s[ai];return s}function Zo(s,o,u,c,d){if(null!=c){let p,_=!1;li(c)?p=c:zn(c)&&(_=!0,c=c[Hn]);const I=rn(c);0===s&&null!==u?null==d?Re(o,u,I):Y(o,u,I,d||null,!0):1===s&&null!==u?Y(o,u,I,d||null,!0):2===s?function Uu(s,o,u){const c=kn(s,o);c&&function Xe(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,I,_):3===s&&o.destroyNode(I),null!=p&&function sC(s,o,u,c,d){const p=u[Kr];p!==rn(u)&&Zo(o,s,c,p,d);for(let I=vr;I<u.length;I++){const D=u[I];nd(D[Ke],D,s,o,c,p)}}(o,s,p,u,d)}}function Jc(s,o,u){return s.createElement(o,u)}function Jp(s,o){const u=s[ko],c=u.indexOf(o);ul(o),u.splice(c,1)}function v(s,o){if(s.length<=vr)return;const u=vr+o,c=s[u];if(c){const d=c[wa];null!==d&&d!==s&&Jp(d,c),o>0&&(s[u-1][ai]=c[ai]);const p=Ch(s,vr+o);!function Yp(s,o){nd(s,o,o[Mt],2,null,null),o[Hn]=null,o[Fr]=null}(c[Ke],c);const _=p[Ti];null!==_&&_.detachView(p[Ke]),c[Cn]=null,c[ai]=null,c[At]&=-129}return c}function h(s,o){if(!(256&o[At])){const u=o[Mt];o[ac]?.destroy(),o[Oo]?.destroy(),u.destroyNode&&nd(s,o,u,3,null,null),function Xc(s){let o=s[qr];if(!o)return g(s[Ke],s);for(;o;){let u=null;if(zn(o))u=o[qr];else{const c=o[vr];c&&(u=c)}if(!u){for(;o&&!o[ai]&&o!==s;)zn(o)&&g(o[Ke],o),o=o[Cn];null===o&&(o=s),zn(o)&&g(o[Ke],o),u=o&&o[ai]}o=u}}(o)}}function g(s,o){if(!(256&o[At])){o[At]&=-129,o[At]|=256,function S(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Au)){const p=u[c+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const I=d[p[_]],D=p[_+1];ms(4,I,D);try{D.call(I)}finally{ms(5,I,D)}}else{ms(4,d,p);try{p.call(d)}finally{ms(5,d,p)}}}}}(s,o),function w(s,o){const u=s.cleanup,c=o[Po];if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const _=u[p+3];_>=0?c[_]():c[-_].unsubscribe(),p+=2}else u[p].call(c[u[p+1]]);null!==c&&(o[Po]=null);const d=o[ui];if(null!==d){o[ui]=null;for(let p=0;p<d.length;p++)(0,d[p])()}}(s,o),1===o[Ke].type&&o[Mt].destroy();const u=o[wa];if(null!==u&&li(o[Cn])){u!==o[Cn]&&Jp(u,o);const c=o[Ti];null!==c&&c.detachView(s)}!function ly(s){Oh.delete(s[Ea])}(o)}}function N(s,o,u){return function H(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[Hn];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:p}=s.data[c.directiveStart+d];if(p===Tn.None||p===Tn.Emulated)return null}return Ar(c,u)}}(s,o.parent,u)}function Y(s,o,u,c,d){s.insertBefore(o,u,c,d)}function Re(s,o,u){s.appendChild(o,u)}function $e(s,o,u,c,d){null!==c?Y(s,o,u,c,d):Re(s,o,u)}function kn(s,o){return s.parentNode(o)}let eg,rd,An,Xp=function gy(s,o,u){return 40&s.type?Ar(s,u):null};function ed(s,o,u,c){const d=N(s,c,o),p=o[Mt],I=function Bh(s,o,u){return Xp(s,o,u)}(c.parent||o[Fr],c,o);if(null!=d)if(Array.isArray(u))for(let D=0;D<u.length;D++)$e(p,d,u[D],I,!1);else $e(p,d,u,I,!1);void 0!==eg&&eg(p,c,o,u,d)}function dr(s,o){if(null!==o){const u=o.type;if(3&u)return Ar(o,s);if(4&u)return mt(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return dr(s,c);{const d=s[o.index];return li(d)?mt(-1,d):rn(d)}}if(32&u)return go(o,s)()||rn(s[o.index]);{const c=Yo(s,o);return null!==c?Array.isArray(c)?c[0]:dr(Dl(s[Rn]),c):dr(s,o.next)}}return null}function Yo(s,o){return null!==o?s[Rn][Fr].projection[o.projection]:null}function mt(s,o){const u=vr+s+1;if(u<o.length){const c=o[u],d=c[Ke].firstChild;if(null!==d)return dr(c,d)}return o[Kr]}function Jn(s,o,u,c,d,p,_){for(;null!=u;){const I=c[u.index],D=u.type;if(_&&0===o&&(I&&Br(rn(I),c),u.flags|=2),32!=(32&u.flags))if(8&D)Jn(s,o,u.child,c,d,p,!1),Zo(o,s,d,I,p);else if(32&D){const A=go(u,c);let R;for(;R=A();)Zo(o,s,d,R,p);Zo(o,s,d,I,p)}else 16&D?s0(s,o,c,u,d,p):Zo(o,s,d,I,p);u=_?u.projectionNext:u.next}}function nd(s,o,u,c,d,p){Jn(u,c,s.firstChild,o,d,p,!1)}function s0(s,o,u,c,d,p){const _=u[Rn],D=_[Fr].projection[c.projection];if(Array.isArray(D))for(let A=0;A<D.length;A++)Zo(o,s,d,D[A],p);else{let A=D;const R=_[Cn];Nh(c)&&(A.flags|=128),Jn(s,o,A,R,d,p,!0)}}function Qi(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function vo(s,o,u){const{mergedAttrs:c,classes:d,styles:p}=u;null!==c&&at(s,o,c),null!==d&&Qi(s,o,d),null!==p&&function my(s,o,u){s.setAttribute(o,"style",u)}(s,o,p)}function aC(s){rd=s}function pA(s){return function _y(){if(void 0===An&&(An=null,nn.trustedTypes))try{An=nn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return An}()?.createScriptURL(s)||s}class lC{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ut})`}}function sd(s){return s instanceof lC?s.changingThisBreaksApplicationSecurity:s}function vy(s,o){const u=function uk(s){return s instanceof lC&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${ut})`)}return u===o}const Xo=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var jh=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(jh||{});function pC(s){const o=Hh();return o?o.sanitize(jh.URL,s)||"":vy(s,"URL")?sd(s):function rg(s){return(s=String(s)).match(Xo)?s:"unsafe:"+s}(te(s))}function $h(s){const o=Hh();if(o)return pA(o.sanitize(jh.RESOURCE_URL,s)||"");if(vy(s,"ResourceURL"))return pA(sd(s));throw new ie(904,!1)}function yC(s,o,u){return function wA(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?$h:pC}(o,u)(s)}function Hh(){const s=Se();return s&&s[Os].sanitizer}class hn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Nt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Gh=new hn("ENVIRONMENT_INITIALIZER"),by=new hn("INJECTOR",-1),l0=new hn("INJECTOR_DEF_TYPES");class zh{get(o,u=Dr){if(u===Dr){const c=new Error(`NullInjectorError: No provider for ${J(o)}!`);throw c.name="NullInjectorError",c}return u}}function c0(...s){return{\u0275providers:Ty(0,s),\u0275fromNgModule:!0}}function Ty(s,...o){const u=[],c=new Set;let d;return Ki(o,p=>{const _=p;ag(_,u,[],c)&&(d||=[],d.push(_))}),void 0!==d&&vC(d,u),u}function vC(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];ug(d,p=>{o.push(p)})}}function ag(s,o,u,c){if(!(s=Pe(s)))return!1;let d=null,p=ga(s);const _=!p&&Pt(s);if(p||_){if(_&&!_.standalone)return!1;d=s}else{const D=s.ngModule;if(p=ga(D),!p)return!1;d=D}const I=c.has(d);if(_){if(I)return!1;if(c.add(d),_.dependencies){const D="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const A of D)ag(A,o,u,c)}}else{if(!p)return!1;{if(null!=p.imports&&!I){let A;c.add(d);try{Ki(p.imports,R=>{ag(R,o,u,c)&&(A||=[],A.push(R))})}finally{}void 0!==A&&vC(A,o)}if(!I){const A=Ca(d)||(()=>new d);o.push({provide:d,useFactory:A,deps:Et},{provide:l0,useValue:d,multi:!0},{provide:Gh,useValue:()=>tn(d),multi:!0})}const D=p.providers;null==D||I||ug(D,R=>{o.push(R)})}}return d!==s&&void 0!==s.providers}function ug(s,o){for(let u of s)Le(u)&&(u=u.\u0275providers),Array.isArray(u)?ug(u,o):o(u)}const d0=U({provide:String,useValue:U});function h0(s){return null!==s&&"object"==typeof s&&d0 in s}function $a(s){return"function"==typeof s}const Sy=new hn("Set Injector scope."),Wh={},p0={};let lg;function cg(){return void 0===lg&&(lg=new zh),lg}class ad{}class Ay extends ad{get destroyed(){return this._destroyed}constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,g0(o,_=>this.processProvider(_)),this.records.set(by,qh(void 0,this)),d.has("environment")&&this.records.set(ad,qh(void 0,this));const p=this.records.get(Sy);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(l0.multi,Et,ht.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of o)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const u=En(this),c=_n(void 0);try{return o()}finally{En(u),_n(c)}}get(o,u=Dr,c=ht.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(re))return o[re](this);c=$(c);const d=En(this),p=_n(void 0);try{if(!(c&ht.SkipSelf)){let I=this.records.get(o);if(void 0===I){const D=function DA(s){return"function"==typeof s||"object"==typeof s&&s instanceof hn}(o)&&lr(o);I=D&&this.injectableDefInScope(D)?qh(Sl(o),Wh):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&ht.Self?cg():this.parent).get(o,u=c&ht.Optional&&u===Dr?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[Bi]=_[Bi]||[]).unshift(J(o)),d)throw _;return function se(s,o,u,c){const d=s[Bi];throw o[us]&&d.unshift(o[us]),s.message=function et(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=J(o);if(Array.isArray(o))d=o.map(J).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let I=o[_];p.push(_+":"+("string"==typeof I?JSON.stringify(I):J(I)))}d=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(ya,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Bi]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{_n(p),En(d)}}resolveInjectorInitializers(){const o=En(this),u=_n(void 0);try{const c=this.get(Gh.multi,Et,ht.Self);for(const d of c)d()}finally{En(o),_n(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(J(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ie(205,!1)}processProvider(o){let u=$a(o=Pe(o))?o:Pe(o&&o.provide);const c=function EA(s){return h0(s)?qh(void 0,s.useValue):qh(DC(s),Wh)}(o);if($a(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=qh(void 0,Wh,!0),d.factory=()=>B(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===Wh&&(u.value=p0,u.value=u.factory()),"object"==typeof u.value&&u.value&&function CA(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Pe(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(o){const u=this._onDestroyHooks.indexOf(o);-1!==u&&this._onDestroyHooks.splice(u,1)}}function Sl(s){const o=lr(s),u=null!==o?o.factory:Ca(s);if(null!==u)return u;if(s instanceof hn)throw new ie(204,!1);if(s instanceof Function)return function CC(s){const o=s.length;if(o>0)throw function Fu(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new ie(204,!1);const u=function ti(s){return s&&(s[ni]||s[Xs])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new ie(204,!1)}function DC(s,o,u){let c;if($a(s)){const d=Pe(s);return Ca(d)||Sl(d)}if(h0(s))c=()=>Pe(s.useValue);else if(function IC(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...B(s.deps||[]));else if(function EC(s){return!(!s||!s.useExisting)}(s))c=()=>tn(Pe(s.useExisting));else{const d=Pe(s&&(s.useClass||s.provide));if(!function IA(s){return!!s.deps}(s))return Ca(d)||Sl(d);c=()=>new d(...B(s.deps))}return c}function qh(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function g0(s,o){for(const u of s)Array.isArray(u)?g0(u,o):u&&Le(u)?g0(u.\u0275providers,o):o(u)}const bC=new hn("AppId",{providedIn:"root",factory:()=>bA}),bA="ng",dg=new hn("Platform Initializer"),My=new hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),SA=new hn("CSP nonce",{providedIn:"root",factory:()=>function id(){if(void 0!==rd)return rd;if(typeof document<"u")return document;throw new ie(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let mg=(s,o)=>null;function NA(s,o){return mg(s,o)}class Ik{}class E0{}class I0{resolveComponentFactory(o){throw function OA(s){const o=Error(`No component factory found for ${J(s)}.`);return o.ngComponent=s,o}(o)}}let Zh=(()=>{class s{}return s.NULL=new I0,s})();function C0(){return Al(Mr(),Se())}function Al(s,o){return new ud(Ar(s,o))}let ud=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=C0,s})();function Yh(s){return s instanceof ud?s.nativeElement:s}class PC{}let OC=(()=>{class s{constructor(){this.destroyNode=null}}return s.__NG_ELEMENT_ID__=()=>function kA(){const s=Se(),u=Mi(Mr().index,s);return(zn(u)?u:s)[Mt]}(),s})(),Qh=(()=>{class s{}return s.\u0275prov=Nt({token:s,providedIn:"root",factory:()=>null}),s})();class D0{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const kC=new D0("16.1.8"),b0={};function yg(s){for(;s;){s[At]|=64;const o=Dl(s);if(Tr(s)&&!o)return s;s=o}return null}function Fy(s){return s.ngOriginalError}class ld{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Fy(o);for(;u&&Fy(u);)u=Fy(u);return u||null}}const FC=new hn("",{providedIn:"root",factory:()=>!1});function Ji(s){return s instanceof Function?s():s}class _g extends Zr{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(o){this._lView=o}onConsumerDependencyMayHaveChanged(){yg(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(o,u,c){const d=Yn(this);this.trackingVersion++;try{o(u,c)}finally{Yn(d)}}destroy(){this.trackingVersion++}}let Vy=null;function $u(){return Vy??=new _g,Vy}function Ga(s,o){return s[o]??$u()}function Ml(s,o){const u=$u();u.hasReadASignal&&(s[o]=Vy,u.lView=s,Vy=new _g)}const Lt={};function ef(s){Uy(Wt(),Se(),Yr()+s,!1)}function Uy(s,o,u,c){if(!c)if(3==(3&o[At])){const p=s.preOrderCheckHooks;null!==p&&Pa(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Rc(o,p,0,u)}oo(u)}function HC(s,o=null,u=null,c){const d=tf(s,o,u,c);return d.resolveInjectorInitializers(),d}function tf(s,o=null,u=null,c,d=new Set){const p=[u||Et,c0(s)];return c=c||("object"==typeof s?void 0:J(s)),new Ay(p,o||cg(),c||null,d)}let xl=(()=>{class s{static create(u,c){if(Array.isArray(u))return HC({name:""},c,u,"");{const d=u.name??"";return HC({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=Dr,s.NULL=new zh,s.\u0275prov=Nt({token:s,providedIn:"any",factory:()=>tn(by)}),s.__NG_ELEMENT_ID__=-1,s})();function nf(s,o=ht.Default){const u=Se();return null===u?tn(s,o):ml(Mr(),u,Pe(s),o)}function rf(){throw new Error("invalid")}function wg(s,o,u,c,d,p,_,I,D,A,R){const V=o.blueprint.slice();return V[Hn]=d,V[At]=140|c,(null!==A||s&&2048&s[At])&&(V[At]|=2048),hh(V),V[Cn]=V[hs]=s,V[Sn]=u,V[Os]=_||s&&s[Os],V[Mt]=I||s&&s[Mt],V[_r]=D||s&&s[_r]||null,V[Fr]=p,V[Ea]=function rC(){return qc++}(),V[Gn]=R,V[Zd]=A,V[Rn]=2==o.type?s[Rn]:V,V}function dd(s,o,u,c,d){let p=s.data[o];if(null===p)p=function jy(s,o,u,c,d){const p=so(),_=vu(),D=s.data[o]=function WA(s,o,u,c,d,p){let _=o?o.injectorIndex:-1,I=0;return function ji(){return null!==wt.skipHydrationRootTNode}()&&(I|=128),{type:u,index:c,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:I,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=D),null!==p&&(_?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D,D.prev=p)),D}(s,o,u,c,d),function xr(){return wt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=u,p.value=c,p.attrs=d;const _=function ll(){const s=wt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return $i(p,!0),p}function sf(s,o,u,c){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function N0(s,o,u,c,d){const p=Ga(o,ac),_=Yr(),I=2&c;try{if(oo(-1),I&&o.length>Ft&&Uy(s,o,Ft,!1),ms(I?2:0,d),I)p.runInContext(u,c,d);else{const A=Yn(null);try{u(c,d)}finally{Yn(A)}}}finally{I&&null===o[ac]&&Ml(o,ac),oo(_),ms(I?3:1,d)}}function $y(s,o,u){if(Ia(o)){const c=Yn(null);try{const p=o.directiveEnd;for(let _=o.directiveStart;_<p;_++){const I=s.data[_];I.contentQueries&&I.contentQueries(1,u[_],_)}}finally{Yn(c)}}}function Hy(s,o,u){Dc()&&(function JA(s,o,u,c){const d=u.directiveStart,p=u.directiveEnd;ks(u)&&function nM(s,o,u){const c=Ar(o,s),d=R0(u);let _=16;u.signals?_=4096:u.onPush&&(_=64);const I=af(s,wg(s,d,null,_,c,o,null,s[Os].rendererFactory.createRenderer(c,u),null,null,null));s[o.index]=I}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||$o(u,o),Br(c,o);const _=u.initialInputs;for(let I=d;I<p;I++){const D=s.data[I],A=lo(o,s,I,u);Br(A,o),null!==_&&QC(0,I-d,A,D,0,_),wr(D)&&(Mi(u.index,o)[Sn]=lo(o,s,I,u))}}(s,o,u,Ar(u,o)),64==(64&u.flags)&&U0(s,o,u))}function Eg(s,o,u=Ar){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const _=c[p+1],I=-1===_?u(o,s):s[_];s[d++]=I}}}function R0(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Gy(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function Gy(s,o,u,c,d,p,_,I,D,A,R){const V=Ft+c,W=V+d,Q=function P0(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Lt);return u}(V,W),Ee="function"==typeof A?A():A;return Q[Ke]={type:s,blueprint:Q,template:u,queries:null,viewQuery:I,declTNode:o,data:Q.slice().fill(null,V),bindingStartIndex:V,expandoStartIndex:W,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:D,consts:Ee,incompleteFirstPass:!1,ssrId:R}}let zC=s=>null;function WC(s,o,u,c){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const p=s[d];null===c?L0(u,o,d,p):c.hasOwnProperty(d)&&L0(u,o,c[d],p)}return u}function L0(s,o,u,c){s.hasOwnProperty(u)?s[u].push(o,c):s[u]=[o,c]}function V0(s,o,u,c){if(Dc()){const d=null===c?null:{"":-1},p=function XA(s,o){const u=s.directiveRegistry;let c=null,d=null;if(u)for(let p=0;p<u.length;p++){const _=u[p];if(bi(o,_.selectors,!1))if(c||(c=[]),wr(_))if(null!==_.findHostDirectiveDefs){const I=[];d=d||new Map,_.findHostDirectiveDefs(_,I,d),c.unshift(...I,_),B0(s,o,I.length)}else c.unshift(_),B0(s,o,0);else d=d||new Map,_.findHostDirectiveDefs?.(_,c,d),c.push(_)}return null===c?null:[c,d]}(s,u);let _,I;null===p?_=I=null:[_,I]=p,null!==_&&ZC(s,o,u,_,d,I),d&&function eM(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new ie(-301,!1);c.push(o[d],p)}}}(u,c,d)}u.mergedAttrs=Qt(u.mergedAttrs,u.attrs)}function ZC(s,o,u,c,d,p){for(let A=0;A<c.length;A++)di($o(u,o),s,c[A].type);!function j0(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,c.length);for(let A=0;A<c.length;A++){const R=c[A];R.providersResolver&&R.providersResolver(R)}let _=!1,I=!1,D=sf(s,o,c.length,null);for(let A=0;A<c.length;A++){const R=c[A];u.mergedAttrs=Qt(u.mergedAttrs,R.hostAttrs),tM(s,u,o,D,R),Nl(D,R,d),null!==R.contentQueries&&(u.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(u.flags|=64);const V=R.type.prototype;!_&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((s.preOrderHooks??=[]).push(u.index),_=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(u.index),I=!0),D++}!function qA(s,o,u){const d=o.directiveEnd,p=s.data,_=o.attrs,I=[];let D=null,A=null;for(let R=o.directiveStart;R<d;R++){const V=p[R],W=u?u.get(V):null,Ee=W?W.outputs:null;D=WC(V.inputs,R,D,W?W.inputs:null),A=WC(V.outputs,R,A,Ee);const Ve=null===D||null===_||xo(o)?null:rM(D,R,_);I.push(Ve)}null!==D&&(D.hasOwnProperty("class")&&(o.flags|=8),D.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=D,o.outputs=A}(s,u,p)}function U0(s,o,u){const c=u.directiveStart,d=u.directiveEnd,p=u.index,_=function Eu(){return wt.lFrame.currentDirectiveIndex}();try{oo(p);for(let I=c;I<d;I++){const D=s.data[I],A=o[I];Iu(I),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&YC(D,A)}}finally{oo(-1),Iu(_)}}function YC(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function B0(s,o,u){o.componentOffset=u,(s.components??=[]).push(o.index)}function Nl(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;wr(o)&&(u[""]=s)}}function tM(s,o,u,c,d){s.data[c]=d;const p=d.factory||(d.factory=Ca(d.type)),_=new Au(p,wr(d),nf);s.blueprint[c]=_,u[c]=_,function YA(s,o,u,c,d){const p=d.hostBindings;if(p){let _=s.hostBindingOpCodes;null===_&&(_=s.hostBindingOpCodes=[]);const I=~o.index;(function QA(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(_)!=I&&_.push(I),_.push(u,c,p)}}(s,o,c,sf(s,u,d.hostVars,Lt),d)}function Gs(s,o,u,c,d,p){const _=Ar(s,o);!function Rl(s,o,u,c,d,p,_){if(null==p)s.removeAttribute(o,d,u);else{const I=null==_?te(p):_(p,c||"",d);s.setAttribute(o,d,I,u)}}(o[Mt],_,p,s.value,u,c,d)}function QC(s,o,u,c,d,p){const _=p[o];if(null!==_)for(let I=0;I<_.length;)JC(c,u,_[I++],_[I++],_[I++])}function JC(s,o,u,c,d){const p=Yn(null);try{const _=s.inputTransforms;null!==_&&_.hasOwnProperty(c)&&(d=_[c].call(o,d)),null!==s.setInput?s.setInput(o,d,u,c):o[c]=d}finally{Yn(p)}}function rM(s,o,u){let c=null,d=0;for(;d<u.length;){const p=u[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===c&&(c=[]);const _=s[p];for(let I=0;I<_.length;I+=2)if(_[I]===o){c.push(p,_[I+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function XC(s,o,u,c){return[s,!0,!1,o,null,0,c,u,null,null,null]}function eD(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const p=u[c+1];if(-1!==p){const _=s.data[p];Lo(u[c]),_.contentQueries(2,o[p],p)}}}function af(s,o){return s[qr]?s[Kd][ai]=o:s[qr]=o,s[Kd]=o,o}function zy(s,o,u){Lo(0);const c=Yn(null);try{o(s,u)}finally{Yn(c)}}function $0(s){return s[Po]||(s[Po]=[])}function tD(s){return s.cleanup||(s.cleanup=[])}function G0(s,o){const u=s[_r],c=u?u.get(ld,null):null;c&&c.handleError(o)}function Wy(s,o,u,c,d){for(let p=0;p<u.length;){const _=u[p++],I=u[p++];JC(s.data[_],o[_],c,I,d)}}function iM(s,o){const u=Mi(o,s),c=u[Ke];!function nD(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])}(c,u);const d=u[Hn];null!==d&&null===u[Gn]&&(u[Gn]=NA(d,u[_r])),qy(c,u,u[Sn])}function qy(s,o,u){Du(o);try{const c=s.viewQuery;null!==c&&zy(1,c,u);const d=s.template;null!==d&&N0(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&eD(s,o),s.staticViewQueries&&zy(2,s.viewQuery,u);const p=s.components;null!==p&&function rD(s,o){for(let u=0;u<o.length;u++)iM(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[At]&=-5,Vo()}}let vn=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(u,c,d){const p=typeof Zone>"u"?null:Zone.current,_=new mc(u,A=>{this.all.has(A)&&this.queue.set(A,p)},d);let I;this.all.add(_),_.notify();const D=()=>{_.cleanup(),I?.(),this.all.delete(_),this.queue.delete(_)};return I=c?.onDestroy(D),{destroy:D}}flush(){if(0!==this.queue.size)for(const[u,c]of this.queue)this.queue.delete(u),c?c.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}}return s.\u0275prov=Nt({token:s,providedIn:"root",factory:()=>new s}),s})();function Ht(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const I=o[_];"number"==typeof I?p=I:1==p?d=Ue(d,I):2==p&&(c=Ue(c,I+": "+o[++_]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function wo(s,o,u,c,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(rn(p)),li(p)){for(let I=vr;I<p.length;I++){const D=p[I],A=D[Ke].firstChild;null!==A&&wo(D[Ke],D,A,c)}p[Kr]!==p[Hn]&&c.push(p[Kr])}const _=u.type;if(8&_)wo(s,o,u.child,c);else if(32&_){const I=go(u,o);let D;for(;D=I();)c.push(D)}else if(16&_){const I=Yo(o,u);if(Array.isArray(I))c.push(...I);else{const D=Dl(o[Rn]);wo(D[Ke],D,I,c,!0)}}u=d?u.projectionNext:u.next}return c}function In(s,o,u,c=!0){const d=o[Os].rendererFactory;d.begin&&d.begin();try{uf(s,o,s.template,u)}catch(_){throw c&&G0(o,_),_}finally{d.end&&d.end(),o[Os].effectManager?.flush()}}function uf(s,o,u,c){const d=o[At];if(256!=(256&d)){o[Os].effectManager?.flush(),Du(o);try{hh(o),function dl(s){return wt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&N0(s,o,u,2,c);const _=3==(3&d);if(_){const A=s.preOrderCheckHooks;null!==A&&Pa(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Rc(o,A,0,null),pl(o,0)}if(function Xn(s){for(let o=Yc(s);null!==o;o=fi(o)){if(!o[fs])continue;const u=o[ko];for(let c=0;c<u.length;c++){Ec(u[c])}}}(o),z0(o,2),null!==s.contentQueries&&eD(s,o),_){const A=s.contentCheckHooks;null!==A&&Pa(o,A)}else{const A=s.contentHooks;null!==A&&Rc(o,A,1),pl(o,1)}!function By(s,o){const u=s.hostBindingOpCodes;if(null===u)return;const c=Ga(o,Oo);try{for(let d=0;d<u.length;d++){const p=u[d];if(p<0)oo(~p);else{const _=p,I=u[++d],D=u[++d];mh(I,_),c.runInContext(D,2,o[_])}}}finally{null===o[Oo]&&Ml(o,Oo),oo(-1)}}(s,o);const I=s.components;null!==I&&oD(o,I,0);const D=s.viewQuery;if(null!==D&&zy(2,D,c),_){const A=s.viewCheckHooks;null!==A&&Pa(o,A)}else{const A=s.viewHooks;null!==A&&Rc(o,A,2),pl(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[At]&=-73,ul(o)}finally{Vo()}}}function z0(s,o){for(let u=Yc(s);null!==u;u=fi(u))for(let c=vr;c<u.length;c++)Ri(u[c],o)}function Jt(s,o,u){Ri(Mi(o,s),u)}function Ri(s,o){if(!function dh(s){return 128==(128&s[At])}(s))return;const u=s[Ke];if(80&s[At]&&0===o||1024&s[At]||2===o)uf(u,s,u.template,s[Sn]);else if(s[va]>0){z0(s,1);const d=s[Ke].components;null!==d&&oD(s,d,1)}}function oD(s,o,u){for(let c=0;c<o.length;c++)Jt(s,o[c],u)}class hd{get rootNodes(){const o=this._lView,u=o[Ke];return wo(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Sn]}set context(o){this._lView[Sn]=o}get destroyed(){return 256==(256&this._lView[At])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Cn];if(li(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(v(o,c),Ch(u,c))}this._attachedToViewContainer=!1}h(this._lView[Ke],this._lView)}onDestroy(o){!function no(s,o){if(256==(256&s[At]))throw new ie(911,!1);null===s[ui]&&(s[ui]=[]),s[ui].push(o)}(this._lView,o)}markForCheck(){yg(this._cdRefInjectingView||this._lView)}detach(){this._lView[At]&=-129}reattach(){this._lView[At]|=128}detectChanges(){In(this._lView[Ke],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Qp(s,o){nd(s,o,o[Mt],2,null,null)}(this._lView[Ke],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=o}}class Eo extends hd{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;In(o[Ke],o,o[Sn],!1)}checkNoChanges(){}get context(){return null}}class aD extends Zh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Pt(o);return new ta(u,this.ngModule)}}function uD(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class lD{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){c=$(c);const d=this.injector.get(o,b0,c);return d!==b0||u===b0?d:this.parentInjector.get(o,u,c)}}class ta extends E0{get inputs(){const o=this.componentDef,u=o.inputTransforms,c=uD(o.inputs);if(null!==u)for(const d of c)u.hasOwnProperty(d.propName)&&(d.transform=u[d.propName]);return c}get outputs(){return uD(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function yp(s){return s.map(jm).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,c,d){let p=(d=d||this.ngModule)instanceof ad?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new lD(o,p):o,I=_.get(PC,null);if(null===I)throw new ie(407,!1);const R={rendererFactory:I,sanitizer:_.get(Qh,null),effectManager:_.get(vn,null)},V=I.createRenderer(null,this.componentDef),W=this.componentDef.selectors[0][0]||"div",Q=c?function zA(s,o,u,c){const p=c.get(FC,!1)||u===Tn.ShadowDom,_=s.selectRootElement(o,p);return function GC(s){zC(s)}(_),_}(V,c,this.componentDef.encapsulation,_):Jc(V,W,function aM(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(W)),qe=this.componentDef.signals?4608:this.componentDef.onPush?576:528,lt=Gy(0,null,null,1,0,null,null,null,null,null,null),Ae=wg(null,lt,null,qe,null,null,R,V,_,null,null);let kt,Xt;Du(Ae);try{const on=this.componentDef;let ns,VE=null;on.findHostDirectiveDefs?(ns=[],VE=new Map,on.findHostDirectiveDefs(on,ns,VE),ns.push(on)):ns=[on];const h1=function Ig(s,o){const u=s[Ke],c=Ft;return s[c]=o,dd(u,c,2,"#host",null)}(Ae,Q),ZN=function uM(s,o,u,c,d,p,_){const I=d[Ke];!function cD(s,o,u,c){for(const d of s)o.mergedAttrs=Qt(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Ht(o,o.mergedAttrs,!0),null!==u&&vo(c,u,o))}(c,s,o,_);let D=null;null!==o&&(D=NA(o,d[_r]));const A=p.rendererFactory.createRenderer(o,u);let R=16;u.signals?R=4096:u.onPush&&(R=64);const V=wg(d,R0(u),null,R,d[s.index],s,p,A,null,null,D);return I.firstCreatePass&&B0(I,s,c.length-1),af(d,V),d[s.index]=V}(h1,Q,on,ns,Ae,R,V);Xt=ch(lt,Ft),Q&&function cM(s,o,u,c){if(c)at(s,u,["ng-version",kC.full]);else{const{attrs:d,classes:p}=function rl(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&u.push(p);else{if(!oi(d))break;d=p}c++}return{attrs:o,classes:u}}(o.selectors[0]);d&&at(s,u,d),p&&p.length>0&&Qi(s,u,p.join(" "))}}(V,on,Q,c),void 0!==u&&function dM(s,o,u){const c=s.projection=[];for(let d=0;d<o.length;d++){const p=u[d];c.push(null!=p?Array.from(p):null)}}(Xt,this.ngContentSelectors,u),kt=function lM(s,o,u,c,d,p){const _=Mr(),I=d[Ke],D=Ar(_,d);ZC(I,d,_,u,null,c);for(let R=0;R<u.length;R++)Br(lo(d,I,_.directiveStart+R,_),d);U0(I,d,_),D&&Br(D,d);const A=lo(d,I,_.directiveStart+_.componentOffset,_);if(s[Sn]=d[Sn]=A,null!==p)for(const R of p)R(A,o);return $y(I,_,s),A}(ZN,on,ns,VE,Ae,[dD]),qy(lt,Ae,null)}finally{Vo()}return new W0(this.componentType,kt,Al(Xt,Ae),Ae,Xt)}}class W0 extends Ik{constructor(o,u,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new Eo(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),u))return;const p=this._rootLView;Wy(p[Ke],p,d,o,u),this.previousInputValues.set(o,u),yg(Mi(this._tNode.index,p))}}get injector(){return new Us(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function dD(){const s=Mr();Nc(Se()[Ke],s)}function Zt(s){let o=function Pl(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(wr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ie(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const _=s;_.inputs=fd(s.inputs),_.inputTransforms=fd(s.inputTransforms),_.declaredInputs=fd(s.declaredInputs),_.outputs=fd(s.outputs);const I=d.hostBindings;I&&Yy(s,I);const D=d.viewQuery,A=d.contentQueries;if(D&&hD(s,D),A&&Wa(s,A),G(s.inputs,d.inputs),G(s.declaredInputs,d.declaredInputs),G(s.outputs,d.outputs),null!==d.inputTransforms&&(null===_.inputTransforms&&(_.inputTransforms={}),G(_.inputTransforms,d.inputTransforms)),wr(d)&&d.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const I=p[_];I&&I.ngInherit&&I(s),I===Zt&&(u=!1)}}o=Object.getPrototypeOf(o)}!function Zy(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Qt(d.hostAttrs,u=Qt(u,d.hostAttrs))}}(c)}function fd(s){return s===pn?{}:s===Et?[]:s}function hD(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function Wa(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,p)=>{o(c,d,p),u(c,d,p)}:o}function Yy(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}function K0(s){const o=s.inputConfig,u={};for(const c in o)if(o.hasOwnProperty(c)){const d=o[c];Array.isArray(d)&&d[2]&&(u[c]=d[2])}s.inputTransforms=u}function Dg(s){return!!Z0(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Z0(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Pi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function ra(s,o,u,c){const d=Se();return Pi(d,Pn(),o)&&(Wt(),Gs(Bn(),d,s,o,u,c)),ra}function Ng(s,o,u,c,d,p,_,I){const D=Se(),A=Wt(),R=s+Ft,V=A.firstCreatePass?function TM(s,o,u,c,d,p,_,I,D){const A=o.consts,R=dd(o,s,4,_||null,ys(A,I));V0(o,u,R,ys(A,D)),Nc(o,R);const V=R.tView=Gy(2,R,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A,null);return null!==o.queries&&(o.queries.template(o,R),V.queries=o.queries.embeddedTView(R)),R}(R,A,D,o,u,c,d,p,_):A.data[R];$i(V,!1);const W=Ef(A,D,V,s);Su()&&ed(A,D,W,V),Br(W,D),af(D,D[R]=XC(W,D,W,V)),Fs(V)&&Hy(A,D,V),null!=_&&Eg(D,V,I)}let Ef=function rw(s,o,u,c){return Uo(!0),o[Mt].createComment("")};function vD(s){return Vs(function Un(){return wt.lFrame.contextLView}(),Ft+s)}function xn(s,o,u){const c=Se();return Pi(c,Pn(),o)&&function Hs(s,o,u,c,d,p,_,I){const D=Ar(o,u);let R,A=o.inputs;!I&&null!=A&&(R=A[c])?(Wy(s,u,R,c,d),ks(o)&&function qC(s,o){const u=Mi(o,s);16&u[At]||(u[At]|=64)}(u,o.index)):3&o.type&&(c=function KA(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=_?_(d,o.value||"",c):d,p.setProperty(D,c,d))}(Wt(),Bn(),c,s,o,c[Mt],u,!1),xn}function zs(s,o,u,c,d){const _=d?"class":"style";Wy(s,u,o.inputs[_],_,c)}function If(s,o,u,c){const d=Se(),p=Wt(),_=Ft+s,I=d[Mt],D=p.firstCreatePass?function Rg(s,o,u,c,d,p){const _=o.consts,D=dd(o,s,2,c,ys(_,d));return V0(o,u,D,ys(_,p)),null!==D.attrs&&Ht(D,D.attrs,!1),null!==D.mergedAttrs&&Ht(D,D.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,D),D}(_,p,d,o,u,c):p.data[_],A=Vl(p,d,D,I,o,s);d[_]=A;const R=Fs(D);return $i(D,!0),vo(I,A,D),32!=(32&D.flags)&&Su()&&ed(p,d,A,D),0===function Mp(){return wt.lFrame.elementDepthCount}()&&Br(A,d),function ph(){wt.lFrame.elementDepthCount++}(),R&&(Hy(p,d,D),$y(p,D,d)),null!==c&&Eg(d,D),If}function Pg(){let s=Mr();vu()?function Sc(){wt.lFrame.isParent=!1}():(s=s.parent,$i(s,!1));const o=s;(function Ra(s){return wt.skipHydrationRootTNode===s})(o)&&function Np(){wt.skipHydrationRootTNode=null}(),function xp(){wt.lFrame.elementDepthCount--}();const u=Wt();return u.firstCreatePass&&(Nc(u,s),Ia(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function ao(s){return 0!=(8&s.flags)}(o)&&zs(u,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Er(s){return 0!=(16&s.flags)}(o)&&zs(u,o,Se(),o.stylesWithoutHost,!1),Pg}function Og(s,o,u,c){return If(s,o,u,c),Pg(),Og}let Vl=(s,o,u,c,d,p)=>(Uo(!0),Jc(c,d,function fl(){return wt.lFrame.currentNamespace}()));function ID(){return Se()}function ow(s){return!!s&&"function"==typeof s.then}function CD(s){return!!s&&"function"==typeof s.subscribe}function aw(s,o,u,c){const d=Se(),p=Wt(),_=Mr();return function bD(s,o,u,c,d,p,_){const I=Fs(c),A=s.firstCreatePass&&tD(s),R=o[Sn],V=$0(o);let W=!0;if(3&c.type||_){const Ve=Ar(c,o),qe=_?_(Ve):Ve,lt=V.length,Ae=_?Xt=>_(rn(Xt[c.index])):c.index;let kt=null;if(!_&&I&&(kt=function DD(s,o,u,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===u&&d[p+1]===c){const I=o[Po],D=d[p+2];return I.length>D?I[D]:null}"string"==typeof _&&(p+=2)}return null}(s,o,d,c.index)),null!==kt)(kt.__ngLastListenerFn__||kt).__ngNextListenerFn__=p,kt.__ngLastListenerFn__=p,W=!1;else{p=SD(c,o,R,p,!1);const Xt=u.listen(qe,d,p);V.push(p,Xt),A&&A.push(d,Ae,lt,lt+1)}}else p=SD(c,o,R,p,!1);const Q=c.outputs;let Ee;if(W&&null!==Q&&(Ee=Q[d])){const Ve=Ee.length;if(Ve)for(let qe=0;qe<Ve;qe+=2){const on=o[Ee[qe]][Ee[qe+1]].subscribe(p),ns=V.length;V.push(p,on),A&&A.push(d,c.index,ns,-(ns+1))}}}(p,d,d[Mt],_,s,o,c),aw}function TD(s,o,u,c){try{return ms(6,o,u),!1!==u(c)}catch(d){return G0(s,d),!1}finally{ms(7,o,u)}}function SD(s,o,u,c,d){return function p(_){if(_===Function)return c;yg(s.componentOffset>-1?Mi(s.index,o):o);let D=TD(o,u,c,_),A=p.__ngNextListenerFn__;for(;A;)D=TD(o,u,A,_)&&D,A=A.__ngNextListenerFn__;return d&&!1===D&&_.preventDefault(),D}}function AD(s=1){return function yh(s){return(wt.lFrame.contextLView=function Km(s,o){for(;s>0;)o=o[hs],s--;return o}(s,wt.lFrame.contextLView))[Sn]}(s)}function Cf(s,o){return s<<17|o<<2}function jl(s){return s>>17&32767}function hw(s){return 2|s}function $l(s){return(131068&s)>>2}function Df(s,o){return-131069&s|o<<2}function u_(s){return 1|s}function RD(s,o,u,c,d){const p=s[u+1],_=null===o;let I=c?jl(p):$l(p),D=!1;for(;0!==I&&(!1===D||_);){const R=s[I+1];kM(s[I],o)&&(D=!0,s[I+1]=c?u_(R):hw(R)),I=c?jl(R):$l(R)}D&&(s[u+1]=c?hw(p):u_(p))}function kM(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&L(s,o)>=0}function d_(s,o){return function Io(s,o,u,c){const d=Se(),p=Wt(),_=function Hi(s){const o=wt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);p.firstUpdatePass&&function Lg(s,o,u,c){const d=s.data;if(null===d[u+1]){const p=d[Yr()],_=function Hu(s,o){return o>=s.expandoStartIndex}(s,u);(function BD(s,o){return 0!=(s.flags&(o?8:16))})(p,c)&&null===o&&!_&&(o=!1),o=function h_(s,o,u,c){const d=function Ac(s){const o=wt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=yd(u=f_(null,s,o,u,c),o.attrs,c),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==d)if(u=f_(d,s,o,u,c),null===p){let D=function jM(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==$l(c))return s[jl(c)]}(s,o,c);void 0!==D&&Array.isArray(D)&&(D=f_(null,s,o,D[1],c),D=yd(D,o.attrs,c),function $M(s,o,u,c){s[jl(u?o.classBindings:o.styleBindings)]=c}(s,o,c,D))}else p=function HM(s,o,u){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=yd(c,s[p].hostAttrs,u);return yd(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(d,p,o,c),function pw(s,o,u,c,d,p){let _=p?o.classBindings:o.styleBindings,I=jl(_),D=$l(_);s[c]=u;let R,A=!1;if(Array.isArray(u)?(R=u[1],(null===R||L(u,R)>0)&&(A=!0)):R=u,d)if(0!==D){const W=jl(s[I+1]);s[c+1]=Cf(W,I),0!==W&&(s[W+1]=Df(s[W+1],c)),s[I+1]=function RM(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=Cf(I,0),0!==I&&(s[I+1]=Df(s[I+1],c)),I=c;else s[c+1]=Cf(D,0),0===I?I=c:s[D+1]=Df(s[D+1],c),D=c;A&&(s[c+1]=hw(s[c+1])),RD(s,R,c,!0),RD(s,R,c,!1),function OM(s,o,u,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&L(p,o)>=0&&(u[c+1]=u_(u[c+1]))}(o,R,s,c,p),_=Cf(I,D),p?o.classBindings=_:o.styleBindings=_}(d,p,o,u,_,c)}}(p,s,_,c),o!==Lt&&Pi(d,_,o)&&function LD(s,o,u,c,d,p,_,I){if(!(3&o.type))return;const D=s.data,A=D[I+1],R=function fw(s){return 1==(1&s)}(A)?VD(D,o,u,d,$l(A),_):void 0;_d(R)||(_d(p)||function NM(s){return 2==(2&s)}(A)&&(p=VD(D,null,u,d,I,_)),function hA(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let p=-1===c.indexOf("-")?void 0:Rh.DashCase;null==d?s.removeStyle(u,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=Rh.Important),s.setStyle(u,c,d,p))}}(c,_,xa(Yr(),u),d,p))}(p,p.data[Yr()],d,d[Mt],s,d[_+1]=function UD(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=J(sd(s)))),s}(o,u),c,_)}(s,o,null,!0),d_}function f_(s,o,u,c,d){let p=null;const _=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<_&&(p=o[I],c=yd(c,p.hostAttrs,d),p!==s);)I++;return null!==s&&(u.directiveStylingLast=I),c}function yd(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?d=_:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),b(s,_,!!u||o[++p]))}return void 0===s?null:s}function VD(s,o,u,c,d,p){const _=null===o;let I;for(;d>0;){const D=s[d],A=Array.isArray(D),R=A?D[1]:D,V=null===R;let W=u[d+1];W===Lt&&(W=V?Et:void 0);let Q=V?x(W,c):R===c?W:void 0;if(A&&!_d(Q)&&(Q=x(D,c)),_d(Q)&&(I=Q,_))return I;const Ee=s[d+1];d=_?jl(Ee):$l(Ee)}if(null!==o){let D=p?o.residualClasses:o.residualStyles;null!=D&&(I=x(D,c))}return I}function _d(s){return void 0!==s}function p_(s,o=""){const u=Se(),c=Wt(),d=s+Ft,p=c.firstCreatePass?dd(c,d,1,o,null):c.data[d],_=Ug(c,u,p,o,s);u[d]=_,Su()&&ed(c,u,_,p),$i(p,!1)}let Ug=(s,o,u,c,d)=>(Uo(!0),function mo(s,o){return s.createText(o)}(o[Mt],c));function g_(s){return m_("",s,""),g_}function m_(s,o,u){const c=Se(),d=function xt(s,o,u,c){return Pi(s,Pn(),u)?o+te(u)+c:Lt}(c,s,o,u);return d!==Lt&&function za(s,o,u){const c=xa(o,s);!function yo(s,o,u){s.setValue(o,u)}(s[Mt],c,u)}(c,Yr(),d),m_}const wd=void 0;var Xa=["en",[["a","p"],["AM","PM"],wd],[["AM","PM"],wd,wd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wd,"{1} 'at' {0}",wd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Hg(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let eu={};function C_(s){const o=function YD(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Nf(o);if(u)return u;const c=o.split("-")[0];if(u=Nf(c),u)return u;if("en"===c)return Xa;throw new ie(701,!1)}function xf(s){return C_(s)[_i.PluralCase]}function Nf(s){return s in eu||(eu[s]=nn.ng&&nn.ng.common&&nn.ng.common.locales&&nn.ng.common.locales[s]),eu[s]}var _i=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(_i||{});const Ed="en-US";let QD=Ed;function jw(s,o,u,c,d){if(s=Pe(s),Array.isArray(s))for(let p=0;p<s.length;p++)jw(s[p],o,u,c,d);else{const p=Wt(),_=Se();let I=$a(s)?s:Pe(s.provide),D=DC(s);const A=Mr(),R=1048575&A.providerIndexes,V=A.directiveStart,W=A.providerIndexes>>20;if($a(s)||!s.multi){const Q=new Au(D,d,nf),Ee=Hw(I,o,d?R:R+W,V);-1===Ee?(di($o(A,_),p,I),$w(p,s,o.length),o.push(I),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(Q),_.push(Q)):(u[Ee]=Q,_[Ee]=Q)}else{const Q=Hw(I,o,R+W,V),Ee=Hw(I,o,R,R+W),qe=Ee>=0&&u[Ee];if(d&&!qe||!d&&!(Q>=0&&u[Q])){di($o(A,_),p,I);const lt=function Ex(s,o,u,c,d){const p=new Au(s,u,nf);return p.multi=[],p.index=o,p.componentProviders=0,bb(p,d,c&&!u),p}(d?wx:vx,u.length,d,c,D);!d&&qe&&(u[Ee].providerFactory=lt),$w(p,s,o.length,0),o.push(I),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(lt),_.push(lt)}else $w(p,s,Q>-1?Q:Ee,bb(u[d?Ee:Q],D,!d&&c));!d&&c&&qe&&u[Ee].componentProviders++}}}function $w(s,o,u,c){const d=$a(o),p=function f0(s){return!!s.useClass}(o);if(d||p){const D=(p?Pe(o.useClass):o).prototype.ngOnDestroy;if(D){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const R=A.indexOf(u);-1===R?A.push(u,[c,D]):A[R+1].push(c,D)}else A.push(u,D)}}}function bb(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Hw(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function vx(s,o,u,c){return Gw(this.multi,[])}function wx(s,o,u,c){const d=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,I=lo(u,u[Ke],this.providerFactory.index,c);p=I.slice(0,_),Gw(d,p);for(let D=_;D<I.length;D++)p.push(I[D])}else p=[],Gw(d,p);return p}function Gw(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Tb(s,o=[]){return u=>{u.providersResolver=(c,d)=>function _x(s,o,u){const c=Wt();if(c.firstCreatePass){const d=wr(s);jw(u,c.data,c.blueprint,d,!0),jw(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class Ff{}class bo{}function Ix(s,o){return new R_(s,o??null,[])}class R_ extends Ff{constructor(o,u,c){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new aD(this);const d=br(o);this._bootstrapComponents=Ji(d.bootstrap),this._r3Injector=tf(o,u,[{provide:Ff,useValue:this},{provide:Zh,useValue:this.componentFactoryResolver},...c],J(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class zw extends bo{constructor(o){super(),this.moduleType=o}create(o){return new R_(this.moduleType,o,[])}}class Mb extends Ff{constructor(o){super(),this.componentFactoryResolver=new aD(this),this.instance=null;const u=new Ay([...o.providers,{provide:Ff,useValue:this},{provide:Zh,useValue:this.componentFactoryResolver}],o.parent||cg(),o.debugName,new Set(["environment"]));this.injector=u,o.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function xb(s,o,u=null){return new Mb({providers:s,parent:o,debugName:u,runEnvironmentInitializers:!0}).injector}let Cx=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u)){const c=Ty(0,u.type),d=c.length>0?xb([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u,d)}return this.cachedInjectors.get(u)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Nt({token:s,providedIn:"environment",factory:()=>new s(tn(ad))}),s})();function Nb(s){s.getStandaloneInjector=o=>o.get(Cx).getOrCreateStandaloneInjector(s)}function Lb(s,o,u,c,d,p){const _=o+u;return Pi(s,_,d)?function sn(s,o,u){return s[o]=u}(s,_+1,p?c.call(p,d):c(d)):function Wu(s,o){const u=s[o];return u===Lt?void 0:u}(s,_+1)}function $b(s,o){const u=Wt();let c;const d=s+Ft;u.firstCreatePass?(c=function Hb(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}}(o,u.pipeRegistry),u.data[d]=c,c.onDestroy&&(u.destroyHooks??=[]).push(d,c.onDestroy)):c=u.data[d];const p=c.factory||(c.factory=Ca(c.type)),_=_n(nf);try{const I=ci(!1),D=p();return ci(I),function iw(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,Se(),d,D),D}finally{_n(_)}}function qw(s,o,u){const c=s+Ft,d=Se(),p=Vs(d,c);return function Xg(s,o){return s[Ke].data[o].pure}(d,c)?Lb(d,function Lr(){const s=wt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,p.transform,u,p):p.transform(u)}function O_(s){return o=>{setTimeout(s,void 0,o)}}const oa=class zb extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,p=u||(()=>null),_=c;if(o&&"object"==typeof o){const D=o;d=D.next?.bind(D),p=D.error?.bind(D),_=D.complete?.bind(D)}this.__isAsync&&(p=O_(p),d&&(d=O_(d)),_&&(_=O_(_)));const I=super.subscribe({next:d,error:p,complete:_});return o instanceof X.w0&&o.add(I),I}};function $x(){return this._results[Symbol.iterator]()}class Kw{get changes(){return this._changes||(this._changes=new oa)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Kw.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=$x)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=function Ir(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Wo(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let em=(()=>{class s{}return s.__NG_ELEMENT_ID__=Gx,s})();const Wb=em,Hx=class extends Wb{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,u){return this.createEmbeddedViewImpl(o,u,null)}createEmbeddedViewImpl(o,u,c){const _=this._declarationTContainer.tView,I=wg(this._declarationLView,_,o,4096&this._declarationLView[At]?4096:16,null,_.declTNode,null,null,null,u||null,c||null);I[wa]=this._declarationLView[this._declarationTContainer.index];const A=this._declarationLView[Ti];return null!==A&&(I[Ti]=A.createEmbeddedView(_)),qy(_,I,o),new hd(I)}};function Gx(){return tm(Mr(),Se())}function tm(s,o){return 4&s.type?new Hx(o,s,Al(s,o)):null}let F_=(()=>{class s{}return s.__NG_ELEMENT_ID__=Zb,s})();function Zb(){return Qb(Mr(),Se())}const nm=F_,Yb=class extends nm{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Al(this._hostTNode,this._hostLView)}get injector(){return new Us(this._hostTNode,this._hostLView)}get parentInjector(){const o=Qn(this._hostTNode,this._hostLView);if(uo(o)){const u=xu(o,this._hostLView),c=Nr(o);return new Us(u[Ke].data[c+8],u)}return new Us(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=L_(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-vr}createEmbeddedView(o,u,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const I=o.createEmbeddedViewImpl(u||{},p,null);return this.insertImpl(I,d,false),I}createComponent(o,u,c,d,p){const _=o&&!function js(s){return"function"==typeof s}(o);let I;if(_)I=u;else{const Ve=u||{};I=Ve.index,c=Ve.injector,d=Ve.projectableNodes,p=Ve.environmentInjector||Ve.ngModuleRef}const D=_?o:new ta(Pt(o)),A=c||this.parentInjector;if(!p&&null==D.ngModule){const qe=(_?A:this.parentInjector).get(ad,null);qe&&(p=qe)}Pt(D.componentType??{});const Q=D.create(A,d,null,p);return this.insertImpl(Q.hostView,I,false),Q}insert(o,u){return this.insertImpl(o,u,!1)}insertImpl(o,u,c){const d=o._lView,p=d[Ke];if(function wc(s){return li(s[Cn])}(d)){const D=this.indexOf(o);if(-1!==D)this.detach(D);else{const A=d[Cn],R=new Yb(A,A[Fr],A[Cn]);R.detach(R.indexOf(o))}}const _=this._adjustIndex(u),I=this._lContainer;if(function py(s,o,u,c){const d=vr+c,p=u.length;c>0&&(u[d-1][ai]=o),c<p-vr?(o[ai]=u[d],Xm(u,vr+c,o)):(u.push(o),o[ai]=null),o[Cn]=u;const _=o[wa];null!==_&&u!==_&&function r0(s,o){const u=s[ko];o[Rn]!==o[Cn][Cn][Rn]&&(s[fs]=!0),null===u?s[ko]=[o]:u.push(o)}(_,o);const I=o[Ti];null!==I&&I.insertView(s),o[At]|=128}(p,d,I,_),!c){const D=mt(_,I),A=d[Mt],R=kn(A,I[Kr]);null!==R&&function n0(s,o,u,c,d,p){c[Hn]=d,c[Fr]=o,nd(s,c,u,1,d,p)}(p,I[Fr],A,d,R,D)}return o.attachToViewContainerRef(),Xm(V_(I),_,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=L_(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=v(this._lContainer,u);c&&(Ch(V_(this._lContainer),u),h(c[Ke],c))}detach(o){const u=this._adjustIndex(o,-1),c=v(this._lContainer,u);return c&&null!=Ch(V_(this._lContainer),u)?new hd(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function L_(s){return s[8]}function V_(s){return s[8]||(s[8]=[])}function Qb(s,o){let u;const c=o[s.index];return li(c)?u=c:(u=XC(c,o,null,s),o[s.index]=u,af(o,u)),Yw(u,o,s,c),new Yb(u,s,o)}let Yw=function U_(s,o,u,c){if(s[Kr])return;let d;d=8&u.type?rn(c):function rm(s,o){const u=s[Mt],c=u.createComment(""),d=Ar(o,s);return Y(u,kn(u,d),c,function _o(s,o){return s.nextSibling(o)}(u,d),!1),c}(o,u),s[Kr]=d};class wi{constructor(o){this.queryList=o,this.matches=null}clone(){return new wi(this.queryList)}setDirty(){this.queryList.setDirty()}}class Dd{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<c;p++){const _=u.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new Dd(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==eE(o,u).matches&&this.queries[u].setDirty()}}class Oi{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class qu{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new qu(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class im{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new im(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,u,Yx(u,p)),this.matchTNodeWithReadOption(o,u,Ho(u,o,p,!1,!1))}else c===em?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Ho(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===ud||d===F_||d===em&&4&u.type)this.addMatch(u.index,-2);else{const p=Ho(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function Yx(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function Qw(s,o,u,c){return-1===u?function Qx(s,o){return 11&s.type?Al(s,o):4&s.type?tm(s,o):null}(o,s):-2===u?function Gt(s,o,u){return u===ud?Al(o,s):u===em?tm(o,s):u===F_?Qb(o,s):void 0}(s,o,c):lo(s,s[Ke],u,o)}function Lf(s,o,u,c){const d=o[Ti].queries[c];if(null===d.matches){const p=s.data,_=u.matches,I=[];for(let D=0;D<_.length;D+=2){const A=_[D];I.push(A<0?null:Qw(o,p[A],_[D+1],u.metadata.read))}d.matches=I}return d.matches}function Jw(s,o,u,c){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const _=Lf(s,o,d,u);for(let I=0;I<p.length;I+=2){const D=p[I];if(D>0)c.push(_[I/2]);else{const A=p[I+1],R=o[-D];for(let V=vr;V<R.length;V++){const W=R[V];W[wa]===W[Cn]&&Jw(W[Ke],W,A,c)}if(null!==R[ko]){const V=R[ko];for(let W=0;W<V.length;W++){const Q=V[W];Jw(Q[Ke],Q,A,c)}}}}}return c}function bd(s){const o=Se(),u=Wt(),c=Cu();Lo(c+1);const d=eE(u,c);if(s.dirty&&function zm(s){return 4==(4&s[At])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?Jw(u,o,c,[]):Lf(u,o,d,c);s.reset(p,Yh),s.notifyOnChanges()}return!0}return!1}function Xb(s,o,u,c){const d=Wt();if(d.firstCreatePass){const p=Mr();(function Ku(s,o,u){null===s.queries&&(s.queries=new qu),s.queries.track(new im(o,u))})(d,new Oi(o,u,c),p.index),function Xx(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function Xw(s,o,u){const c=new Kw(4==(4&u));(function F0(s,o,u,c){const d=$0(o);d.push(u),s.firstCreatePass&&tD(s).push(c,d.length-1)})(s,o,c,c.destroy),null===o[Ti]&&(o[Ti]=new Dd),o[Ti].queries.push(new wi(c))}(d,Se(),u)}function ua(){return function eT(s,o){return s[Ti].queries[o].queryList}(Se(),Cu())}function eE(s,o){return s.queries.getByIndex(o)}function tE(s,o){return tm(s,o)}function wn(s){return!!br(s)}const Z_=new hn("Application Initializer");let la=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c}),this.appInits=Kt(Z_,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const d of this.appInits){const p=d();if(ow(p))u.push(p);else if(CD(p)){const _=new Promise((I,D)=>{p.subscribe({complete:I,error:D})});u.push(_)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),um=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Bf=new hn("LocaleId",{providedIn:"root",factory:()=>Kt(Bf,ht.Optional|ht.SkipSelf)||function lm(){return typeof $localize<"u"&&$localize.locale||Ed}()}),gN=new hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let cT=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new F.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class yN{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let _N=(()=>{class s{compileModuleSync(u){return new zw(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=Ji(br(u).declarations).reduce((_,I)=>{const D=Pt(I);return D&&_.push(new ta(D)),_},[]);return new yN(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function jf(...s){}class Ei{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new oa(!1),this.onMicrotaskEmpty=new oa(!1),this.onStable=new oa(!1),this.onError=new oa(!1),typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function hT(){const s="function"==typeof nn.requestAnimationFrame;let o=nn[s?"requestAnimationFrame":"setTimeout"],u=nn[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&u){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const d=u[Zone.__symbol__("OriginalDelegate")];d&&(u=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function gT(s){const o=()=>{!function pT(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(nn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,fE(s),s.isCheckStableRunning=!0,Wl(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),fE(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,p,_,I)=>{try{return Md(s),u.invokeTask(d,p,_,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),pE(s)}},onInvoke:(u,c,d,p,_,I,D)=>{try{return Md(s),u.invoke(d,p,_,I,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),pE(s)}},onHasTask:(u,c,d,p)=>{u.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,fE(s),Wl(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ei.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(Ei.isInAngularZone())throw new ie(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,o,Ju,jf,jf);try{return p.runTask(_,u,c)}finally{p.cancelTask(_)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const Ju={};function Wl(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function fE(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Md(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function pE(s){s._nesting--,Wl(s)}class EN{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new oa,this.onMicrotaskEmpty=new oa,this.onStable=new oa,this.onError=new oa}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const cm=new hn("",{providedIn:"root",factory:gE});function gE(){const s=Kt(Ei);let o=!0;const u=new ee.y(d=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{d.next(o),d.complete()})}),c=new ee.y(d=>{let p;s.runOutsideAngular(()=>{p=s.onStable.subscribe(()=>{Ei.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const _=s.onUnstable.subscribe(()=>{Ei.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{d.next(!1)}))});return()=>{p.unsubscribe(),_.unsubscribe()}});return(0,ne.T)(u,c.pipe((0,ge.B)()))}const Y_=new hn(""),mE=new hn("");let vE,yE=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,vE||(function _E(s){vE=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ei.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(tn(Ei),tn(Q_),tn(mE))},s.\u0275prov=Nt({token:s,factory:s.\u0275fac}),s})(),Q_=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return vE?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),da=null;const wE=new hn("AllowMultipleToken"),EE=new hn("PlatformDestroyListeners"),xd=new hn("appBootstrapListener");class yT{constructor(o,u){this.name=o,this.token=u}}function CN(s,o,u=[]){const c=`Platform: ${o}`,d=new hn(c);return(p=[])=>{let _=CE();if(!_||_.injector.get(wE,!1)){const I=[...u,...p,{provide:d,useValue:!0}];s?s(I):function _T(s){if(da&&!da.get(wE,!1))throw new ie(400,!1);(function J_(){!function sl(s){oh=s}(()=>{throw new ie(600,!1)})})(),da=s;const o=s.get(bN);(function IE(s){s.get(dg,null)?.forEach(u=>u())})(s)}(function DN(s=[],o){return xl.create({name:o,providers:[{provide:Sy,useValue:"platform"},{provide:EE,useValue:new Set([()=>da=null])},...s]})}(I,c))}return function Gk(s){const o=CE();if(!o)throw new ie(401,!1);return o}()}}function CE(){return da?.get(bN)??null}let bN=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function TN(s="zone.js",o){return"noop"===s?new EN:"zone.js"===s?new Ei(o):s}(c?.ngZone,function wT(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const p=function Ab(s,o,u){return new R_(s,o,u)}(u.moduleType,this.injector,function CT(s){return[{provide:Ei,useFactory:s},{provide:Gh,multi:!0,useFactory:()=>{const o=Kt(IT,{optional:!0});return()=>o.initialize()}},{provide:ET,useFactory:AN},{provide:cm,useFactory:gE}]}(()=>d)),_=p.injector.get(ld,null);return d.runOutsideAngular(()=>{const I=d.onError.subscribe({next:D=>{_.handleError(D)}});p.onDestroy(()=>{ql(this._modules,p),I.unsubscribe()})}),function X_(s,o,u){try{const c=u();return ow(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(_,d,()=>{const I=p.injector.get(la);return I.runInitializers(),I.donePromise.then(()=>(function JD(s){Qe(s,"Expected localeId to be defined"),"string"==typeof s&&(QD=s.toLowerCase().replace(/_/g,"-"))}(p.injector.get(Bf,Ed)||Ed),this._moduleDoBootstrap(p),p))})})}bootstrapModule(u,c=[]){const d=To({},c);return function IN(s,o,u){const c=new zw(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const c=u.injector.get($f);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new ie(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ie(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(EE,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(tn(xl))},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function To(s,o){return Array.isArray(o)?o.reduce(To,s):{...s,...o}}let $f=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Kt(ET),this.zoneIsStable=Kt(cm),this.componentTypes=[],this.components=[],this.isStable=Kt(cT).hasPendingTasks.pipe((0,Oe.w)(u=>u?(0,pe.of)(!1):this.zoneIsStable),(0,he.x)(),(0,ge.B)()),this._injector=Kt(ad)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const d=u instanceof E0;if(!this._injector.get(la).done)throw!d&&to(u),new ie(405,!1);let _;_=d?u:this._injector.get(Zh).resolveComponentFactory(u),this.componentTypes.push(_.componentType);const I=function mT(s){return s.isBoundToModule}(_)?void 0:this._injector.get(Ff),A=_.create(xl.NULL,[],c||_.selector,I),R=A.location.nativeElement,V=A.injector.get(Y_,null);return V?.registerApplication(R),A.onDestroy(()=>{this.detachView(A.hostView),ql(this.components,A),V?.unregisterApplication(R)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new ie(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;ql(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(xd,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>ql(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new ie(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function ql(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}const ET=new hn("",{providedIn:"root",factory:()=>Kt(ld).handleError.bind(void 0)});function AN(){const s=Kt(Ei),o=Kt(ld);return u=>s.runOutsideAngular(()=>o.handleError(u))}let IT=(()=>{class s{constructor(){this.zone=Kt(Ei),this.applicationRef=Kt($f)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Hf(){return!1}let dm=(()=>{class s{}return s.__NG_ELEMENT_ID__=xN,s})();function xN(s){return function NN(s,o,u){if(ks(s)&&!u){const c=Mi(s.index,o);return new hd(c,c)}return 47&s.type?new hd(o[Rn],o):null}(Mr(),Se(),16==(16&s))}class xE{constructor(){}supports(o){return Dg(o)}create(o){return new TT(o)}}const Wf=(s,o)=>o;class TT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Wf}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,p=null;for(;u||c;){const _=!c||u&&u.currentIndex<rv(c,d,p)?u:c,I=rv(_,d,p),D=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(u=u._next,null==_.previousIndex)d++;else{p||(p=[]);const A=I-d,R=D-d;if(A!=R){for(let W=0;W<A;W++){const Q=W<p.length?p[W]:p[W]=0,Ee=Q+W;R<=Ee&&Ee<A&&(p[W]=Q+1)}p[_.previousIndex]=R-A}}I!==D&&o(_,I,D)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Dg(o))throw new ie(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,_,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],_=this._trackByFn(I,p),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,p,_,I)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,_,I),c=!0),u=u._next}else d=0,function mM(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,I=>{_=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,I,_,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,_,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new kN(u,c),p,d),o}_verifyReinsertion(o,u,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new ST),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ST),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class kN{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FN{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class ST{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new FN,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rv(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class AT{constructor(){}supports(o){return o instanceof Map||Z0(o)}create(){return new NE}}class NE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Z0(o)))throw new ie(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const c=new MT(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class MT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xT(){return new RE([new xE])}let RE=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||xT()),deps:[[s,new Ur,new qo]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new ie(901,!1)}}return s.\u0275prov=Nt({token:s,providedIn:"root",factory:xT}),s})();function NT(){return new qf([new AT])}let qf=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||NT()),deps:[[s,new Ur,new qo]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new ie(901,!1)}}return s.\u0275prov=Nt({token:s,providedIn:"root",factory:NT}),s})();const UN=CN(null,"core",[]);let BN=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(tn($f))},s.\u0275mod=Ps({type:s}),s.\u0275inj=bn({}),s})();function WN(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function pm(s){const o=Pt(s);if(!o)return null;const u=new ta(o);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3106:(ot,De,O)=>{O.d(De,{Z:()=>We});var m=O(9058),X=O(4537),F=O(534),ee=O(7879);class ne{constructor(Ge,Le){this._delegate=Ge,this.firebase=Le,(0,F._addComponent)(Ge,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=Ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ge){this._delegate.automaticDataCollectionEnabled=Ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ge=>{this._delegate.checkDestroyed(),Ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(Ge,Le=F._DEFAULT_ENTRY_NAME){var pt;this._delegate.checkDestroyed();const ut=this._delegate.container.getProvider(Ge);return!ut.isInitialized()&&"EXPLICIT"===(null===(pt=ut.getComponent())||void 0===pt?void 0:pt.instantiationMode)&&ut.initialize(),ut.getImmediate({identifier:Le})}_removeServiceInstance(Ge,Le=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ge).clearInstance(Le)}_addComponent(Ge){(0,F._addComponent)(this._delegate,Ge)}_addOrOverwriteComponent(Ge){(0,F._addOrOverwriteComponent)(this._delegate,Ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function he(){const Pe=function Oe(Pe){const Ge={},Le={__esModule:!0,initializeApp:function ie(Fe,ze={}){const ae=F.initializeApp(Fe,ze);if((0,m.r3)(Ge,ae.name))return Ge[ae.name];const _t=new Pe(ae,Le);return Ge[ae.name]=_t,_t},app:ut,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function te(Fe){const ze=Fe.name,ae=ze.replace("-compat","");if(F._registerComponent(Fe)&&"PUBLIC"===Fe.type){const _t=(Ut=ut())=>{if("function"!=typeof Ut[ae])throw ge.create("invalid-app-argument",{appName:ze});return Ut[ae]()};void 0!==Fe.serviceProps&&(0,m.ZB)(_t,Fe.serviceProps),Le[ae]=_t,Pe.prototype[ae]=function(...Ut){return this._getService.bind(this,ze).apply(this,Fe.multipleInstances?Ut:[])}}return"PUBLIC"===Fe.type?Le[ae]:null},removeApp:function pt(Fe){delete Ge[Fe]},useAsService:function be(Fe,ze){return"serverAuth"===ze?null:ze},modularAPIs:F}};function ut(Fe){if(!(0,m.r3)(Ge,Fe=Fe||F._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:Fe});return Ge[Fe]}return Le.default=Le,Object.defineProperty(Le,"apps",{get:function _e(){return Object.keys(Ge).map(Fe=>Ge[Fe])}}),ut.App=Pe,Le}(ne);return Pe.INTERNAL=Object.assign(Object.assign({},Pe.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function Ge(Le){(0,m.ZB)(Pe,Le)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Pe}(),G=new ee.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pe=self.firebase.SDK_VERSION;Pe&&Pe.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=U;!function Me(Pe){(0,F.registerVersion)("@firebase/app-compat","0.2.13",Pe)}()},534:(ot,De,O)=>{O.r(De),O.d(De,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>eo,_DEFAULT_ENTRY_NAME:()=>ht,_addComponent:()=>Nn,_addOrOverwriteComponent:()=>Wr,_apps:()=>bt,_clearComponents:()=>an,_components:()=>_n,_getProvider:()=>gr,_registerComponent:()=>nn,_removeServiceInstance:()=>ma,deleteApp:()=>mr,getApp:()=>ii,getApps:()=>us,initializeApp:()=>ya,onLog:()=>ls,registerVersion:()=>En,setLogLevel:()=>tn});var m=O(5861),X=O(4537),F=O(7879),ee=O(9058);const ne=(fe,re)=>re.some(ke=>fe instanceof ke);let pe,ge;const U=new WeakMap,G=new WeakMap,J=new WeakMap,Ue=new WeakMap,Me=new WeakMap;let Ge={get(fe,re,ke){if(fe instanceof IDBTransaction){if("done"===re)return G.get(fe);if("objectStoreNames"===re)return fe.objectStoreNames||J.get(fe);if("store"===re)return ke.objectStoreNames[1]?void 0:ke.objectStore(ke.objectStoreNames[0])}return ie(fe[re])},set:(fe,re,ke)=>(fe[re]=ke,!0),has:(fe,re)=>fe instanceof IDBTransaction&&("done"===re||"store"===re)||re in fe};function ut(fe){return"function"==typeof fe?function pt(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...re){return fe.apply(_e(this),re),ie(U.get(this))}:function(...re){return ie(fe.apply(_e(this),re))}:function(re,...ke){const at=fe.call(_e(this),re,...ke);return J.set(at,re.sort?re.sort():[re]),ie(at)}}(fe):(fe instanceof IDBTransaction&&function Pe(fe){if(G.has(fe))return;const re=new Promise((ke,at)=>{const It=()=>{fe.removeEventListener("complete",Rt),fe.removeEventListener("error",Qt),fe.removeEventListener("abort",Qt)},Rt=()=>{ke(),It()},Qt=()=>{at(fe.error||new DOMException("AbortError","AbortError")),It()};fe.addEventListener("complete",Rt),fe.addEventListener("error",Qt),fe.addEventListener("abort",Qt)});G.set(fe,re)}(fe),ne(fe,function Oe(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,Ge):fe)}function ie(fe){if(fe instanceof IDBRequest)return function We(fe){const re=new Promise((ke,at)=>{const It=()=>{fe.removeEventListener("success",Rt),fe.removeEventListener("error",Qt)},Rt=()=>{ke(ie(fe.result)),It()},Qt=()=>{at(fe.error),It()};fe.addEventListener("success",Rt),fe.addEventListener("error",Qt)});return re.then(ke=>{ke instanceof IDBCursor&&U.set(ke,fe)}).catch(()=>{}),Me.set(re,fe),re}(fe);if(Ue.has(fe))return Ue.get(fe);const re=ut(fe);return re!==fe&&(Ue.set(fe,re),Me.set(re,fe)),re}const _e=fe=>Me.get(fe),Fe=["get","getKey","getAll","getAllKeys","count"],ze=["put","add","delete","clear"],ae=new Map;function _t(fe,re){if(!(fe instanceof IDBDatabase)||re in fe||"string"!=typeof re)return;if(ae.get(re))return ae.get(re);const ke=re.replace(/FromIndex$/,""),at=re!==ke,It=ze.includes(ke);if(!(ke in(at?IDBIndex:IDBObjectStore).prototype)||!It&&!Fe.includes(ke))return;const Rt=function(){var Qt=(0,m.Z)(function*(nr,...Kn){const Rs=this.transaction(nr,It?"readwrite":"readonly");let xo=Rs.store;return at&&(xo=xo.index(Kn.shift())),(yield Promise.all([xo[ke](...Kn),It&&Rs.done]))[0]});return function(Kn){return Qt.apply(this,arguments)}}();return ae.set(re,Rt),Rt}!function Le(fe){Ge=fe(Ge)}(fe=>({...fe,get:(re,ke,at)=>_t(re,ke)||fe.get(re,ke,at),has:(re,ke)=>!!_t(re,ke)||fe.has(re,ke)}));class Ut{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(ke=>{if(function pr(fe){const re=fe.getComponent();return"VERSION"===re?.type}(ke)){const at=ke.getImmediate();return`${at.library}/${at.version}`}return null}).filter(ke=>ke).join(" ")}}const zr="@firebase/app",qn=new F.Yd("@firebase/app"),ht="[DEFAULT]",Bt={[zr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bt=new Map,_n=new Map;function Nn(fe,re){try{fe.container.addComponent(re)}catch(ke){qn.debug(`Component ${re.name} failed to register with FirebaseApp ${fe.name}`,ke)}}function Wr(fe,re){fe.container.addOrOverwriteComponent(re)}function nn(fe){const re=fe.name;if(_n.has(re))return qn.debug(`There were multiple attempts to register component ${re}.`),!1;_n.set(re,fe);for(const ke of bt.values())Nn(ke,fe);return!0}function gr(fe,re){const ke=fe.container.getProvider("heartbeat").getImmediate({optional:!0});return ke&&ke.triggerHeartbeat(),fe.container.getProvider(re)}function ma(fe,re,ke=ht){gr(fe,re).clearInstance(ke)}function an(){_n.clear()}const Ot=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Bi{constructor(re,ke,at){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},ke),this._name=ke.name,this._automaticDataCollectionEnabled=ke.automaticDataCollectionEnabled,this._container=at,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw Ot.create("app-deleted",{appName:this._name})}}const eo="9.23.0";function ya(fe,re={}){let ke=fe;"object"!=typeof re&&(re={name:re});const at=Object.assign({name:ht,automaticDataCollectionEnabled:!1},re),It=at.name;if("string"!=typeof It||!It)throw Ot.create("bad-app-name",{appName:String(It)});if(ke||(ke=(0,ee.aH)()),!ke)throw Ot.create("no-options");const Rt=bt.get(It);if(Rt){if((0,ee.vZ)(ke,Rt.options)&&(0,ee.vZ)(at,Rt.config))return Rt;throw Ot.create("duplicate-app",{appName:It})}const Qt=new X.H0(It);for(const Kn of _n.values())Qt.addComponent(Kn);const nr=new Bi(ke,at,Qt);return bt.set(It,nr),nr}function ii(fe=ht){const re=bt.get(fe);if(!re&&fe===ht&&(0,ee.aH)())return ya();if(!re)throw Ot.create("no-app",{appName:fe});return re}function us(){return Array.from(bt.values())}function mr(fe){return tr.apply(this,arguments)}function tr(){return(tr=(0,m.Z)(function*(fe){const re=fe.name;bt.has(re)&&(bt.delete(re),yield Promise.all(fe.container.getProviders().map(ke=>ke.delete())),fe.isDeleted=!0)})).apply(this,arguments)}function En(fe,re,ke){var at;let It=null!==(at=Bt[fe])&&void 0!==at?at:fe;ke&&(It+=`-${ke}`);const Rt=It.match(/\s|\//),Qt=re.match(/\s|\//);if(Rt||Qt){const nr=[`Unable to register library "${It}" with version "${re}":`];return Rt&&nr.push(`library name "${It}" contains illegal characters (whitespace or "/")`),Rt&&Qt&&nr.push("and"),Qt&&nr.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void qn.warn(nr.join(" "))}nn(new X.wA(`${It}-version`,()=>({library:It,version:re}),"VERSION"))}function ls(fe,re){if(null!==fe&&"function"!=typeof fe)throw Ot.create("invalid-log-argument");(0,F.Am)(fe,re)}function tn(fe){(0,F.Ub)(fe)}const cs="firebase-heartbeat-database",Kt=1,$="firebase-heartbeat-store";let B=null;function q(){return B||(B=function te(fe,re,{blocked:ke,upgrade:at,blocking:It,terminated:Rt}={}){const Qt=indexedDB.open(fe,re),nr=ie(Qt);return at&&Qt.addEventListener("upgradeneeded",Kn=>{at(ie(Qt.result),Kn.oldVersion,Kn.newVersion,ie(Qt.transaction),Kn)}),ke&&Qt.addEventListener("blocked",Kn=>ke(Kn.oldVersion,Kn.newVersion,Kn)),nr.then(Kn=>{Rt&&Kn.addEventListener("close",()=>Rt()),It&&Kn.addEventListener("versionchange",Rs=>It(Rs.oldVersion,Rs.newVersion,Rs))}).catch(()=>{}),nr}(cs,Kt,{upgrade:(fe,re)=>{0===re&&fe.createObjectStore($)}}).catch(fe=>{throw Ot.create("idb-open",{originalErrorMessage:fe.message})})),B}function se(){return(se=(0,m.Z)(function*(fe){try{return yield(yield q()).transaction($).objectStore($).get(jt(fe))}catch(re){if(re instanceof ee.ZR)qn.warn(re.message);else{const ke=Ot.create("idb-get",{originalErrorMessage:re?.message});qn.warn(ke.message)}}})).apply(this,arguments)}function et(fe,re){return ft.apply(this,arguments)}function ft(){return(ft=(0,m.Z)(function*(fe,re){try{const at=(yield q()).transaction($,"readwrite");yield at.objectStore($).put(re,jt(fe)),yield at.done}catch(ke){if(ke instanceof ee.ZR)qn.warn(ke.message);else{const at=Ot.create("idb-set",{originalErrorMessage:ke?.message});qn.warn(at.message)}}})).apply(this,arguments)}function jt(fe){return`${fe.name}!${fe.options.appId}`}class Et{constructor(re){this.container=re,this._heartbeatsCache=null;const ke=this.container.getProvider("app").getImmediate();this._storage=new Di(ke),this._heartbeatsCachePromise=this._storage.read().then(at=>(this._heartbeatsCache=at,at))}triggerHeartbeat(){var re=this;return(0,m.Z)(function*(){const at=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=zt();if(null===re._heartbeatsCache&&(re._heartbeatsCache=yield re._heartbeatsCachePromise),re._heartbeatsCache.lastSentHeartbeatDate!==It&&!re._heartbeatsCache.heartbeats.some(Rt=>Rt.date===It))return re._heartbeatsCache.heartbeats.push({date:It,agent:at}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter(Rt=>{const Qt=new Date(Rt.date).valueOf();return Date.now()-Qt<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,m.Z)(function*(){if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null===re._heartbeatsCache||0===re._heartbeatsCache.heartbeats.length)return"";const ke=zt(),{heartbeatsToSend:at,unsentEntries:It}=function yr(fe,re=1024){const ke=[];let at=fe.slice();for(const It of fe){const Rt=ke.find(Qt=>Qt.agent===It.agent);if(Rt){if(Rt.dates.push(It.date),ds(ke)>re){Rt.dates.pop();break}}else if(ke.push({agent:It.agent,dates:[It.date]}),ds(ke)>re){ke.pop();break}at=at.slice(1)}return{heartbeatsToSend:ke,unsentEntries:at}}(re._heartbeatsCache.heartbeats),Rt=(0,ee.L)(JSON.stringify({version:2,heartbeats:at}));return re._heartbeatsCache.lastSentHeartbeatDate=ke,It.length>0?(re._heartbeatsCache.heartbeats=It,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),Rt})()}}function zt(){return(new Date).toISOString().substring(0,10)}class Di{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,m.Z)(function*(){return(yield re._canUseIndexedDBPromise)&&(yield function Ce(fe){return se.apply(this,arguments)}(re.app))||{heartbeats:[]}})()}overwrite(re){var ke=this;return(0,m.Z)(function*(){var at;if(yield ke._canUseIndexedDBPromise){const Rt=yield ke.read();return et(ke.app,{lastSentHeartbeatDate:null!==(at=re.lastSentHeartbeatDate)&&void 0!==at?at:Rt.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var ke=this;return(0,m.Z)(function*(){var at;if(yield ke._canUseIndexedDBPromise){const Rt=yield ke.read();return et(ke.app,{lastSentHeartbeatDate:null!==(at=re.lastSentHeartbeatDate)&&void 0!==at?at:Rt.lastSentHeartbeatDate,heartbeats:[...Rt.heartbeats,...re.heartbeats]})}})()}}function ds(fe){return(0,ee.L)(JSON.stringify({version:2,heartbeats:fe})).length}!function si(fe){nn(new X.wA("platform-logger",re=>new Ut(re),"PRIVATE")),nn(new X.wA("heartbeat",re=>new Et(re),"PRIVATE")),En(zr,"0.9.13",fe),En(zr,"0.9.13","esm2017"),En("fire-js","")}("")},4537:(ot,De,O)=>{O.d(De,{H0:()=>Oe,wA:()=>F,zt:()=>ne});var m=O(5861),X=O(9058);class F{constructor(U,G,J){this.name=U,this.instanceFactory=G,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ee="[DEFAULT]";class ne{constructor(U,G){this.name=U,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const G=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(G)){const J=new X.BH;if(this.instancesDeferred.set(G,J),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:G});Ue&&J.resolve(Ue)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(U){var G;const J=this.normalizeInstanceIdentifier(U?.identifier),Ue=null!==(G=U?.optional)&&void 0!==G&&G;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Me){if(Ue)return null;throw Me}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function ge(he){return"EAGER"===he.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[G,J]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(G);try{const Me=this.getOrInitializeService({instanceIdentifier:Ue});J.resolve(Me)}catch{}}}}clearInstance(U=ee){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,m.Z)(function*(){const G=Array.from(U.instances.values());yield Promise.all([...G.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...G.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ee){return this.instances.has(U)}getOptions(U=ee){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:G={}}=U,J=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:J,options:G});for(const[Me,We]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Me)&&We.resolve(Ue);return Ue}onInit(U,G){var J;const Ue=this.normalizeInstanceIdentifier(G),Me=null!==(J=this.onInitCallbacks.get(Ue))&&void 0!==J?J:new Set;Me.add(U),this.onInitCallbacks.set(Ue,Me);const We=this.instances.get(Ue);return We&&U(We,Ue),()=>{Me.delete(U)}}invokeOnInitCallbacks(U,G){const J=this.onInitCallbacks.get(G);if(J)for(const Ue of J)try{Ue(U,G)}catch{}}getOrInitializeService({instanceIdentifier:U,options:G={}}){let J=this.instances.get(U);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(he=U,he===ee?void 0:he),options:G}),this.instances.set(U,J),this.instancesOptions.set(U,G),this.invokeOnInitCallbacks(J,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,J)}catch{}var he;return J||null}normalizeInstanceIdentifier(U=ee){return this.component?this.component.multipleInstances?U:ee:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Oe{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const G=this.getProvider(U.name);if(G.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);G.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const G=new ne(U,this);return this.providers.set(U,G),G}getProviders(){return Array.from(this.providers.values())}}},7879:(ot,De,O)=>{O.d(De,{Am:()=>he,Ub:()=>Oe,Yd:()=>ge,in:()=>X});const m=[];var X=function(U){return U[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",U}(X||{});const F={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ee=X.INFO,ne={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},pe=(U,G,...J)=>{if(G<U.logLevel)return;const Ue=(new Date).toISOString(),Me=ne[G];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Me](`[${Ue}]  ${U.name}:`,...J)};class ge{constructor(G){this.name=G,this._logLevel=ee,this._logHandler=pe,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in X))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?F[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...G),this._logHandler(this,X.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...G),this._logHandler(this,X.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,X.INFO,...G),this._logHandler(this,X.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,X.WARN,...G),this._logHandler(this,X.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...G),this._logHandler(this,X.ERROR,...G)}}function Oe(U){m.forEach(G=>{G.setLogLevel(U)})}function he(U,G){for(const J of m){let Ue=null;G&&G.level&&(Ue=F[G.level]),J.userLogHandler=null===U?null:(Me,We,...Pe)=>{const Ge=Pe.map(Le=>{if(null==Le)return null;if("string"==typeof Le)return Le;if("number"==typeof Le||"boolean"==typeof Le)return Le.toString();if(Le instanceof Error)return Le.message;try{return JSON.stringify(Le)}catch{return null}}).filter(Le=>Le).join(" ");We>=(Ue??Me.logLevel)&&U({level:X[We].toLowerCase(),message:Ge,args:Pe,type:Me.name})}}}},3182:(ot,De,O)=>{O.d(De,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=O(534);(0,m.registerVersion)("firebase","9.23.0","app")},7142:(ot,De,O)=>{O.d(De,{Z:()=>m.Z});var m=O(3106);m.Z.registerVersion("firebase","9.23.0","app-compat")},5967:(ot,De,O)=>{O.r(De);var m=O(5861),X=O(3106),F=O(9058),ee=O(534),ne=O(7582),pe=O(7879),ge=O(4537);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const We=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Pe=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ge=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pt=new pe.Yd("@firebase/auth");function ie(v,...h){pt.logLevel<=pe.in.ERROR&&pt.error(`Auth (${ee.SDK_VERSION}): ${v}`,...h)}function _e(v,...h){throw ze(v,...h)}function te(v,...h){return ze(v,...h)}function be(v,h,g){const w=Object.assign(Object.assign({},Pe()),{[h]:g});return new F.LL("auth","Firebase",w).create(h,{appName:v.name})}function Fe(v,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&_e(v,"argument-error"),be(v,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(v,...h){if("string"!=typeof v){const g=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(g,...w)}return Ge.create(v,...h)}function ae(v,h,...g){if(!v)throw ze(h,...g)}function _t(v){const h="INTERNAL ASSERTION FAILED: "+v;throw ie(h),new Error(h)}function Ut(v,h){v||_t(h)}function pr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function zr(){return"http:"===xs()||"https:"===xs()}function xs(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ns{constructor(h,g){this.shortDelay=h,this.longDelay=g,Ut(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function qn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(zr()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ue(v,h){Ut(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class de{static initialize(h,g,w){this.fetchImpl=h,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void _t("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void _t("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void _t("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ve={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},we=new Ns(3e4,6e4);function Ie(v,h){return v.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:v.tenantId}):h}function Te(v,h,g,w){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,m.Z)(function*(v,h,g,w,S={}){return rt(v,S,(0,m.Z)(function*(){let N={},H={};w&&("GET"===h?H=w:N={body:JSON.stringify(w)});const Y=(0,F.xO)(Object.assign({key:v.config.apiKey},H)).slice(1),Re=yield v._getAdditionalHeaders();return Re["Content-Type"]="application/json",v.languageCode&&(Re["X-Firebase-Locale"]=v.languageCode),de.fetch()(Nt(v,v.config.apiHost,g,Y),Object.assign({method:h,headers:Re,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function rt(v,h,g){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,m.Z)(function*(v,h,g){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},ve),h);try{const S=new Dn(v),N=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const H=yield N.json();if("needConfirmation"in H)throw bn(v,"account-exists-with-different-credential",H);if(N.ok&&!("errorMessage"in H))return H;{const Y=N.ok?H.errorMessage:H.error.message,[Re,$e]=Y.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Re)throw bn(v,"credential-already-in-use",H);if("EMAIL_EXISTS"===Re)throw bn(v,"email-already-in-use",H);if("USER_DISABLED"===Re)throw bn(v,"user-disabled",H);const Xe=w[Re]||Re.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw be(v,Xe,$e);_e(v,Xe)}}catch(S){if(S instanceof F.ZR)throw S;_e(v,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function dt(v,h,g,w){return en.apply(this,arguments)}function en(){return(en=(0,m.Z)(function*(v,h,g,w,S={}){const N=yield Te(v,h,g,w,S);return"mfaPendingCredential"in N&&_e(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Nt(v,h,g,w){const S=`${h}${g}?${w}`;return v.config.emulator?ue(v.config,S):`${v.config.apiScheme}://${S}`}class Dn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(te(this.auth,"network-request-failed")),we.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bn(v,h,g){const w={appName:v.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const S=te(v,h,w);return S.customData._tokenResponse=g,S}function cn(){return(cn=(0,m.Z)(function*(v,h){return Te(v,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function ti(){return(ti=(0,m.Z)(function*(v,h){return Te(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ni(){return(ni=(0,m.Z)(function*(v,h){return Te(v,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function ri(v){if(v)try{const h=new Date(Number(v));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function ht(){return(ht=(0,m.Z)(function*(v,h=!1){const g=(0,F.m9)(v),w=yield g.getIdToken(h),S=bt(w);ae(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,H=N?.sign_in_provider;return{claims:S,token:w,authTime:ri(Bt(S.auth_time)),issuedAtTime:ri(Bt(S.iat)),expirationTime:ri(Bt(S.exp)),signInProvider:H||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function Bt(v){return 1e3*Number(v)}function bt(v){const[h,g,w]=v.split(".");if(void 0===h||void 0===g||void 0===w)return ie("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,F.tV)(g);return S?JSON.parse(S):(ie("Failed to decode base64 JWT payload"),null)}catch(S){return ie("Caught error parsing JWT payload as JSON",S?.toString()),null}}function Nn(v,h){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,m.Z)(function*(v,h,g=!1){if(g)return h;try{return yield h}catch(w){throw w instanceof F.ZR&&function nn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}class gr{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,m.Z)(function*(){yield g.iteration()}),w)}iteration(){var h=this;return(0,m.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class ma{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=ri(this.lastLoginAt),this.creationTime=ri(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function an(v){return Dr.apply(this,arguments)}function Dr(){return Dr=(0,m.Z)(function*(v){var h;const g=v.auth,w=yield v.getIdToken(),S=yield Nn(v,function ga(v,h){return ni.apply(this,arguments)}(g,{idToken:w}));ae(S?.users.length,g,"internal-error");const N=S.users[0];v._notifyReloadListener(N);const H=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?function ya(v){return v.map(h=>{var{providerId:g}=h,w=(0,ne._T)(h,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}(N.providerUserInfo):[],Y=function eo(v,h){return[...v.filter(w=>!h.some(S=>S.providerId===w.providerId)),...h]}(v.providerData,H),Xe=!!v.isAnonymous&&!(v.email&&N.passwordHash||Y?.length),it={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:Y,metadata:new ma(N.createdAt,N.lastLoginAt),isAnonymous:Xe};Object.assign(v,it)}),Dr.apply(this,arguments)}function Bi(){return(Bi=(0,m.Z)(function*(v){const h=(0,F.m9)(v);yield an(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function us(){return(us=(0,m.Z)(function*(v,h){const g=yield rt(v,{},(0,m.Z)(function*(){const w=(0,F.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:N}=v.config,H=Nt(v,S,"/v1/token",`key=${N}`),Y=yield v._getAdditionalHeaders();return Y["Content-Type"]="application/x-www-form-urlencoded",de.fetch()(H,{method:"POST",headers:Y,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class mr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ae(h.idToken,"internal-error"),ae(typeof h.idToken<"u","internal-error"),ae(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function _n(v){const h=bt(v);return ae(h,"internal-error"),ae(typeof h.exp<"u","internal-error"),ae(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var w=this;return(0,m.Z)(function*(){return ae(!w.accessToken||w.refreshToken,h,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var w=this;return(0,m.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:H}=yield function ii(v,h){return us.apply(this,arguments)}(h,g);w.updateTokensAndExpiration(S,N,Number(H))})()}updateTokensAndExpiration(h,g,w){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,g){const{refreshToken:w,accessToken:S,expirationTime:N}=g,H=new mr;return w&&(ae("string"==typeof w,"internal-error",{appName:h}),H.refreshToken=w),S&&(ae("string"==typeof S,"internal-error",{appName:h}),H.accessToken=S),N&&(ae("number"==typeof N,"internal-error",{appName:h}),H.expirationTime=N),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new mr,this.toJSON())}_performRefresh(){return _t("not implemented")}}function tr(v,h){ae("string"==typeof v||typeof v>"u","internal-error",{appName:h})}class En{constructor(h){var{uid:g,auth:w,stsTokenManager:S}=h,N=(0,ne._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new ma(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,m.Z)(function*(){const w=yield Nn(g,g.stsTokenManager.getToken(g.auth,h));return ae(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(h){return function iu(v){return ht.apply(this,arguments)}(this,h)}reload(){return function Ot(v){return Bi.apply(this,arguments)}(this)}_assign(h){this!==h&&(ae(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const g=new En(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(h){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var w=this;return(0,m.Z)(function*(){let S=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),S=!0),g&&(yield an(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,m.Z)(function*(){const g=yield h.getIdToken();return yield Nn(h,function lr(v,h){return cn.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var w,S,N,H,Y,Re,$e,Xe;const it=null!==(w=g.displayName)&&void 0!==w?w:void 0,kn=null!==(S=g.email)&&void 0!==S?S:void 0,_o=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,Bh=null!==(H=g.photoURL)&&void 0!==H?H:void 0,gy=null!==(Y=g.tenantId)&&void 0!==Y?Y:void 0,Xp=null!==(Re=g._redirectEventId)&&void 0!==Re?Re:void 0,eg=null!==($e=g.createdAt)&&void 0!==$e?$e:void 0,tg=null!==(Xe=g.lastLoginAt)&&void 0!==Xe?Xe:void 0,{uid:ed,emailVerified:dr,isAnonymous:Yo,providerData:mt,stsTokenManager:Uu}=g;ae(ed&&Uu,h,"internal-error");const td=mr.fromJSON(this.name,Uu);ae("string"==typeof ed,h,"internal-error"),tr(it,h.name),tr(kn,h.name),ae("boolean"==typeof dr,h,"internal-error"),ae("boolean"==typeof Yo,h,"internal-error"),tr(_o,h.name),tr(Bh,h.name),tr(gy,h.name),tr(Xp,h.name),tr(eg,h.name),tr(tg,h.name);const Jn=new En({uid:ed,auth:h,email:kn,emailVerified:dr,displayName:it,isAnonymous:Yo,photoURL:Bh,phoneNumber:_o,tenantId:gy,stsTokenManager:td,createdAt:eg,lastLoginAt:tg});return mt&&Array.isArray(mt)&&(Jn.providerData=mt.map(nd=>Object.assign({},nd))),Xp&&(Jn._redirectEventId=Xp),Jn}static _fromIdTokenResponse(h,g,w=!1){return(0,m.Z)(function*(){const S=new mr;S.updateFromServerResponse(g);const N=new En({uid:g.localId,auth:h,stsTokenManager:S,isAnonymous:w});return yield an(N),N})()}}const ls=new Map;function tn(v){Ut(v instanceof Function,"Expected a class definition");let h=ls.get(v);return h?(Ut(h instanceof v,"Instance stored in cache mismatched with class"),h):(h=new v,ls.set(v,h),h)}const Kt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(g,w){var S=this;return(0,m.Z)(function*(){S.storage[g]=w})()}_get(g){var w=this;return(0,m.Z)(function*(){const S=w.storage[g];return void 0===S?null:S})()}_remove(g){var w=this;return(0,m.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return v.type="NONE",v})();function $(v,h,g){return`firebase:${v}:${h}:${g}`}class B{constructor(h,g,w){this.persistence=h,this.auth=g,this.userKey=w;const{config:S,name:N}=this.auth;this.fullUserKey=$(this.userKey,S.apiKey,N),this.fullPersistenceKey=$("persistence",S.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,m.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?En._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,m.Z)(function*(){if(g.persistence===h)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,w="authUser"){return(0,m.Z)(function*(){if(!g.length)return new B(tn(Kt),h,w);const S=(yield Promise.all(g.map(function(){var $e=(0,m.Z)(function*(Xe){if(yield Xe._isAvailable())return Xe});return function(Xe){return $e.apply(this,arguments)}}()))).filter($e=>$e);let N=S[0]||tn(Kt);const H=$(w,h.config.apiKey,h.name);let Y=null;for(const $e of g)try{const Xe=yield $e._get(H);if(Xe){const it=En._fromJSON(h,Xe);$e!==N&&(Y=it),N=$e;break}}catch{}const Re=S.filter($e=>$e._shouldAllowMigration);return N._shouldAllowMigration&&Re.length?(N=Re[0],Y&&(yield N._set(H,Y.toJSON())),yield Promise.all(g.map(function(){var $e=(0,m.Z)(function*(Xe){if(Xe!==N)try{yield Xe._remove(H)}catch{}});return function(Xe){return $e.apply(this,arguments)}}())),new B(N,h,w)):new B(N,h,w)})()}}function q(v){const h=v.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(ft(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ce(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Tn(h))return"Blackberry";if(pn(h))return"Webos";if(se(h))return"Safari";if((h.includes("chrome/")||et(h))&&!h.includes("edge/"))return"Chrome";if(jt(h))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Ce(v=(0,F.z$)()){return/firefox\//i.test(v)}function se(v=(0,F.z$)()){const h=v.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function et(v=(0,F.z$)()){return/crios\//i.test(v)}function ft(v=(0,F.z$)()){return/iemobile/i.test(v)}function jt(v=(0,F.z$)()){return/android/i.test(v)}function Tn(v=(0,F.z$)()){return/blackberry/i.test(v)}function pn(v=(0,F.z$)()){return/webos/i.test(v)}function Et(v=(0,F.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function ds(v=(0,F.z$)()){return Et(v)||jt(v)||pn(v)||Tn(v)||/windows phone/i.test(v)||ft(v)}function fe(v,h=[]){let g;switch(v){case"Browser":g=q((0,F.z$)());break;case"Worker":g=`${q((0,F.z$)())}-${v}`;break;default:g=v}const w=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${ee.SDK_VERSION}/${w}`}function ke(){return(ke=(0,m.Z)(function*(v){return(yield Te(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function at(v,h){return It.apply(this,arguments)}function It(){return(It=(0,m.Z)(function*(v,h){return Te(v,"GET","/v2/recaptchaConfig",Ie(v,h))})).apply(this,arguments)}function Rt(v){return void 0!==v&&void 0!==v.getResponse}function Qt(v){return void 0!==v&&void 0!==v.enterprise}class nr{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function Rs(v){return new Promise((h,g)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=h,w.onerror=S=>{const N=te("internal-error");N.customData=S,g(N)},w.type="text/javascript",w.charset="UTF-8",function Kn(){var v,h;return null!==(h=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==h?h:document}().appendChild(w)})}function xo(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Hd{constructor(h){this.type="recaptcha-enterprise",this.auth=Zn(h)}verify(h="verify",g=!1){var w=this;return(0,m.Z)(function*(){function N(){return N=(0,m.Z)(function*(Y){if(!g){if(null==Y.tenantId&&null!=Y._agentRecaptchaConfig)return Y._agentRecaptchaConfig.siteKey;if(null!=Y.tenantId&&void 0!==Y._tenantRecaptchaConfigs[Y.tenantId])return Y._tenantRecaptchaConfigs[Y.tenantId].siteKey}return new Promise(function(){var Re=(0,m.Z)(function*($e,Xe){at(Y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(it=>{if(void 0!==it.recaptchaKey){const kn=new nr(it);return null==Y.tenantId?Y._agentRecaptchaConfig=kn:Y._tenantRecaptchaConfigs[Y.tenantId]=kn,$e(kn.siteKey)}Xe(new Error("recaptcha Enterprise site key undefined"))}).catch(it=>{Xe(it)})});return function($e,Xe){return Re.apply(this,arguments)}}())}),N.apply(this,arguments)}function H(Y,Re,$e){const Xe=window.grecaptcha;Qt(Xe)?Xe.enterprise.ready(()=>{Xe.enterprise.execute(Y,{action:h}).then(it=>{Re(it)}).catch(()=>{Re("NO_RECAPTCHA")})}):$e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Y,Re)=>{(function S(Y){return N.apply(this,arguments)})(w.auth).then($e=>{if(!g&&Qt(window.grecaptcha))H($e,Y,Re);else{if(typeof window>"u")return void Re(new Error("RecaptchaVerifier is only supported in browser"));Rs("https://www.google.com/recaptcha/enterprise.js?render="+$e).then(()=>{H($e,Y,Re)}).catch(Xe=>{Re(Xe)})}}).catch($e=>{Re($e)})})})()}}function bi(v,h,g){return rc.apply(this,arguments)}function rc(){return(rc=(0,m.Z)(function*(v,h,g,w=!1){const S=new Hd(v);let N;try{N=yield S.verify(g)}catch{N=yield S.verify(g,!0)}const H=Object.assign({},h);return Object.assign(H,w?{captchaResp:N}:{captchaResponse:N}),Object.assign(H,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(H,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),H})).apply(this,arguments)}class nl{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const w=N=>new Promise((H,Y)=>{try{H(h(N))}catch(Re){Y(Re)}});w.onAbort=g,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,m.Z)(function*(){if(g.auth.currentUser===h)return;const w=[];try{for(const S of g.queue)yield S(h),S.onAbort&&w.push(S.onAbort)}catch(S){w.reverse();for(const N of w)try{N()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class Gd{constructor(h,g,w,S){this.app=h,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=w,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new No(this),this.idTokenSubscription=new No(this),this.beforeStateQueue=new nl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ge,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(h,g){var w=this;return g&&(this._popupRedirectResolver=tn(g)),this._initializationPromise=this.queue((0,m.Z)(function*(){var S,N;if(!w._deleted&&(w.persistenceManager=yield B.create(w,h),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,m.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,m.Z)(function*(){var w;const S=yield g.assertedPersistence.getCurrentUser();let N=S,H=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Y=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Re=N?._redirectEventId,$e=yield g.tryRedirectSignIn(h);(!Y||Y===Re)&&$e?.user&&(N=$e.user,H=!0)}if(!N)return g.directlySetCurrentUser(null);if(!N._redirectEventId){if(H)try{yield g.beforeStateQueue.runMiddleware(N)}catch(Y){N=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Y))}return N?g.reloadAndSetCurrentUserOrClear(N):g.directlySetCurrentUser(null)}return ae(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===N._redirectEventId?g.directlySetCurrentUser(N):g.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var g=this;return(0,m.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,m.Z)(function*(){try{yield an(h)}catch(w){if("auth/network-request-failed"!==w?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Mo(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var h=this;return(0,m.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,m.Z)(function*(){const w=h?(0,F.m9)(h):null;return w&&ae(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(h,g=!1){var w=this;return(0,m.Z)(function*(){if(!w._deleted)return h&&ae(w.tenantId===h.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(h)),w.queue((0,m.Z)(function*(){yield w.directlySetCurrentUser(h),w.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,m.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,m.Z)(function*(){yield g.assertedPersistence.setPersistence(tn(h))}))}initializeRecaptchaConfig(){var h=this;return(0,m.Z)(function*(){const g=yield at(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new nr(g);null==h.tenantId?h._agentRecaptchaConfig=w:h._tenantRecaptchaConfigs[h.tenantId]=w,w.emailPasswordEnabled&&new Hd(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new F.LL("auth","Firebase",h())}onAuthStateChanged(h,g,w){return this.registerStateListener(this.authStateSubscription,h,g,w)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,w){return this.registerStateListener(this.idTokenSubscription,h,g,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var w=this;return(0,m.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(g);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,m.Z)(function*(){if(!g.redirectPersistenceManager){const w=h&&tn(h)||g._popupRedirectResolver;ae(w,g,"argument-error"),g.redirectPersistenceManager=yield B.create(g,[tn(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,m.Z)(function*(){var w,S;return g._isInitialized&&(yield g.queue((0,m.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===h?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,m.Z)(function*(){if(h===g.currentUser)return g.queue((0,m.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,w,S){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),H=this._isInitialized?Promise.resolve():this._initializationPromise;return ae(H,this,"internal-error"),H.then(()=>N(this.currentUser)),"function"==typeof g?h.addObserver(g,w,S):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,m.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=fe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,m.Z)(function*(){var g;const w={"X-Client-Version":h.clientVersion};h.app.options.appId&&(w["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();S&&(w["X-Firebase-Client"]=S);const N=yield h._getAppCheckToken();return N&&(w["X-Firebase-AppCheck"]=N),w})()}_getAppCheckToken(){var h=this;return(0,m.Z)(function*(){var g;const w=yield null===(g=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return w?.error&&function ut(v,...h){pt.logLevel<=pe.in.WARN&&pt.warn(`Auth (${ee.SDK_VERSION}): ${v}`,...h)}(`Error while retrieving App Check token: ${w.error}`),w?.token})()}}function Zn(v){return(0,F.m9)(v)}class No{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ro(v){const h=v.indexOf(":");return h<0?"":v.substr(0,h+1)}function Wd(v){if(!v)return null;const h=Number(v);return isNaN(h)?null:h}class Ps{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return _t("not implemented")}_getIdTokenResponse(h){return _t("not implemented")}_linkToIdToken(h,g){return _t("not implemented")}_getReauthenticationResolver(h){return _t("not implemented")}}function _p(v,h){return ou.apply(this,arguments)}function ou(){return(ou=(0,m.Z)(function*(v,h){return Te(v,"POST","/v1/accounts:resetPassword",Ie(v,h))})).apply(this,arguments)}function ic(v,h){return sc.apply(this,arguments)}function sc(){return(sc=(0,m.Z)(function*(v,h){return Te(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function cr(){return(cr=(0,m.Z)(function*(v,h){return Te(v,"POST","/v1/accounts:update",Ie(v,h))})).apply(this,arguments)}function dn(v,h){return to.apply(this,arguments)}function to(){return(to=(0,m.Z)(function*(v,h){return dt(v,"POST","/v1/accounts:signInWithPassword",Ie(v,h))})).apply(this,arguments)}function br(v,h){return au.apply(this,arguments)}function au(){return(au=(0,m.Z)(function*(v,h){return Te(v,"POST","/v1/accounts:sendOobCode",Ie(v,h))})).apply(this,arguments)}function _a(){return(_a=(0,m.Z)(function*(v,h){return br(v,h)})).apply(this,arguments)}function uu(v,h){return qd.apply(this,arguments)}function qd(){return(qd=(0,m.Z)(function*(v,h){return br(v,h)})).apply(this,arguments)}function Hn(v,h){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,m.Z)(function*(v,h){return br(v,h)})).apply(this,arguments)}function Cn(){return(Cn=(0,m.Z)(function*(v,h){return br(v,h)})).apply(this,arguments)}function va(){return(va=(0,m.Z)(function*(v,h){return dt(v,"POST","/v1/accounts:signInWithEmailLink",Ie(v,h))})).apply(this,arguments)}function Po(){return(Po=(0,m.Z)(function*(v,h){return dt(v,"POST","/v1/accounts:signInWithEmailLink",Ie(v,h))})).apply(this,arguments)}class Sn extends Ps{constructor(h,g,w,S=null){super("password",w),this._email=h,this._password=g,this._tenantId=S}static _fromEmailAndPassword(h,g){return new Sn(h,g,"password")}static _fromEmailAndCode(h,g,w=null){return new Sn(h,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,m.Z)(function*(){var w;switch(g.signInMethod){case"password":const S={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=h._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const N=yield bi(h,S,"signInWithPassword");return dn(h,N)}return dn(h,S).catch(function(){var N=(0,m.Z)(function*(H){if("auth/missing-recaptcha-token"===H.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Y=yield bi(h,S,"signInWithPassword");return dn(h,Y)}return Promise.reject(H)});return function(H){return N.apply(this,arguments)}}());case"emailLink":return function ai(v,h){return va.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:_e(h,"internal-error")}})()}_linkToIdToken(h,g){var w=this;return(0,m.Z)(function*(){switch(w.signInMethod){case"password":return ic(h,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Fr(v,h){return Po.apply(this,arguments)}(h,{idToken:g,email:w._email,oobCode:w._password});default:_e(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function _r(v,h){return Os.apply(this,arguments)}function Os(){return(Os=(0,m.Z)(function*(v,h){return dt(v,"POST","/v1/accounts:signInWithIdp",Ie(v,h))})).apply(this,arguments)}class qr extends Ps{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new qr(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):_e("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S}=g,N=(0,ne._T)(g,["providerId","signInMethod"]);if(!w||!S)return null;const H=new qr(w,S);return H.idToken=N.idToken||void 0,H.accessToken=N.accessToken||void 0,H.secret=N.secret,H.nonce=N.nonce,H.pendingToken=N.pendingToken||null,H}_getIdTokenResponse(h){return _r(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,_r(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,_r(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,F.xO)(g)}return h}}function hs(){return(hs=(0,m.Z)(function*(v,h){return Te(v,"POST","/v1/accounts:sendVerificationCode",Ie(v,h))})).apply(this,arguments)}function wa(){return(wa=(0,m.Z)(function*(v,h){return dt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,h))})).apply(this,arguments)}function Ti(){return(Ti=(0,m.Z)(function*(v,h){const g=yield dt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,h));if(g.temporaryProof)throw bn(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Ea={USER_NOT_FOUND:"user-not-found"};function ui(){return(ui=(0,m.Z)(function*(v,h){return dt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Ea)})).apply(this,arguments)}class Gn extends Ps{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Gn({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Gn({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function Rn(v,h){return wa.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function lu(v,h){return Ti.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Zd(v,h){return ui.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:w,verificationCode:S}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:w,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:w,phoneNumber:S,temporaryProof:N}=h;return w||g||S||N?new Gn({verificationId:g,verificationCode:w,phoneNumber:S,temporaryProof:N}):null}}class Ft{constructor(h){var g,w,S,N,H,Y;const Re=(0,F.zd)((0,F.pd)(h)),$e=null!==(g=Re.apiKey)&&void 0!==g?g:null,Xe=null!==(w=Re.oobCode)&&void 0!==w?w:null,it=function ac(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Re.mode)&&void 0!==S?S:null);ae($e&&Xe&&it,"argument-error"),this.apiKey=$e,this.operation=it,this.code=Xe,this.continueUrl=null!==(N=Re.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(H=Re.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(Y=Re.tenantId)&&void 0!==Y?Y:null}static parseLink(h){const g=function Oo(v){const h=(0,F.zd)((0,F.pd)(v)).link,g=h?(0,F.zd)((0,F.pd)(h)).deep_link_id:null,w=(0,F.zd)((0,F.pd)(v)).deep_link_id;return(w?(0,F.zd)((0,F.pd)(w)).link:null)||w||g||h||v}(h);try{return new Ft(g)}catch{return null}}}let il=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,w){return Sn._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const S=Ft.parseLink(w);return ae(S,"argument-error"),Sn._fromEmailAndCode(g,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class fs{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Kr extends fs{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Si extends Kr{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return ae("providerId"in g&&"signInMethod"in g,"argument-error"),qr._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ae(h.idToken||h.accessToken,"argument-error"),qr._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Si.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Si.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:N,nonce:H,providerId:Y}=h;if(!w&&!S&&!g&&!N||!Y)return null;try{return new Si(Y)._credential({idToken:g,accessToken:w,nonce:H,pendingToken:N})}catch{return null}}}let ko=(()=>{class v extends Kr{constructor(){super("facebook.com")}static credential(g){return qr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Fo=(()=>{class v extends Kr{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return qr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:S}=g;if(!w&&!S)return null;try{return v.credential(w,S)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),vr=(()=>{class v extends Kr{constructor(){super("github.com")}static credential(g){return qr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class zn extends Ps{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return _r(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,_r(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,_r(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S,pendingToken:N}=g;return w&&S&&N&&w===S?new zn(w,N):null}static _create(h,g){return new zn(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ia extends fs{constructor(h){ae(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Ia.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Ia.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=zn.fromJSON(h);return ae(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:w}=h;if(!g||!w)return null;try{return zn._create(w,g)}catch{return null}}}let ks=(()=>{class v extends Kr{constructor(){super("twitter.com")}static credential(g,w){return qr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=g;if(!w||!S)return null;try{return v.credential(w,S)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Fs(v,h){return wr.apply(this,arguments)}function wr(){return(wr=(0,m.Z)(function*(v,h){return dt(v,"POST","/v1/accounts:signUp",Ie(v,h))})).apply(this,arguments)}class Tr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,w,S=!1){return(0,m.Z)(function*(){const N=yield En._fromIdTokenResponse(h,w,S),H=uc(w);return new Tr({user:N,providerId:H,_tokenResponse:w,operationType:g})})()}static _forOperation(h,g,w){return(0,m.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const S=uc(w);return new Tr({user:h,providerId:S,_tokenResponse:w,operationType:g})})()}}function uc(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Yd(){return(Yd=(0,m.Z)(function*(v){var h;const g=Zn(v);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new Tr({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Fs(g,{returnSecureToken:!0}),S=yield Tr._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class cu extends F.ZR{constructor(h,g,w,S){var N;super(g.code,g.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,cu.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,g,w,S){return new cu(h,g,w,S)}}function wp(v,h,g,w){return("reauthenticate"===h?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?cu._fromErrorAndOperation(v,N,h,w):N})}function Ep(v){return new Set(v.map(({providerId:h})=>h).filter(h=>!!h))}function ps(){return ps=(0,m.Z)(function*(v,h){const g=(0,F.m9)(v);yield du(!0,g,h);const{providerUserInfo:w}=yield function Cr(v,h){return ti.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),S=Ep(w||[]);return g.providerData=g.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),ps.apply(this,arguments)}function lc(v,h){return Qd.apply(this,arguments)}function Qd(){return(Qd=(0,m.Z)(function*(v,h,g=!1){const w=yield Nn(v,h._linkToIdToken(v.auth,yield v.getIdToken()),g);return Tr._forOperation(v,"link",w)})).apply(this,arguments)}function du(v,h,g){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,m.Z)(function*(v,h,g){yield an(h);const S=!1===v?"provider-already-linked":"no-such-provider";ae(Ep(h.providerData).has(g)===v,h.auth,S)})).apply(this,arguments)}function Ip(v,h){return cc.apply(this,arguments)}function cc(){return(cc=(0,m.Z)(function*(v,h,g=!1){const{auth:w}=v,S="reauthenticate";try{const N=yield Nn(v,wp(w,S,h,v),g);ae(N.idToken,w,"internal-error");const H=bt(N.idToken);ae(H,w,"internal-error");const{sub:Y}=H;return ae(v.uid===Y,w,"user-mismatch"),Tr._forOperation(v,S,N)}catch(N){throw"auth/user-not-found"===N?.code&&_e(w,"user-mismatch"),N}})).apply(this,arguments)}function Cp(v,h){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,m.Z)(function*(v,h,g=!1){const w="signIn",S=yield wp(v,w,h),N=yield Tr._fromIdTokenResponse(v,w,S);return g||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function dc(v,h){return hu.apply(this,arguments)}function hu(){return(hu=(0,m.Z)(function*(v,h){return Cp(Zn(v),h)})).apply(this,arguments)}function eh(v,h){return th.apply(this,arguments)}function th(){return(th=(0,m.Z)(function*(v,h){const g=(0,F.m9)(v);return yield du(!1,g,h.providerId),lc(g,h)})).apply(this,arguments)}function Wn(v,h){return Dp.apply(this,arguments)}function Dp(){return(Dp=(0,m.Z)(function*(v,h){return Ip((0,F.m9)(v),h)})).apply(this,arguments)}function hc(){return(hc=(0,m.Z)(function*(v,h){return dt(v,"POST","/v1/accounts:signInWithCustomToken",Ie(v,h))})).apply(this,arguments)}function Ai(){return Ai=(0,m.Z)(function*(v,h){const g=Zn(v),w=yield function Ca(v,h){return hc.apply(this,arguments)}(g,{token:h,returnSecureToken:!0}),S=yield Tr._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(S.user),S}),Ai.apply(this,arguments)}class fu{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?pu._fromServerResponse(h,g):"totpInfo"in g?rh._fromServerResponse(h,g):_e(h,"internal-error")}}class pu extends fu{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new pu(g)}}class rh extends fu{constructor(h){super("totp",h)}static _fromServerResponse(h,g){return new rh(g)}}function Da(v,h,g){var w;ae((null===(w=g.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),ae(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ae(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(ae(g.android.packageName.length>0,v,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function ba(){return ba=(0,m.Z)(function*(v,h,g){var w;const S=Zn(v),N={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const H=yield bi(S,N,"getOobCode",!0);g&&Da(S,H,g),yield uu(S,H)}else g&&Da(S,N,g),yield uu(S,N).catch(function(){var H=(0,m.Z)(function*(Y){if("auth/missing-recaptcha-token"!==Y.code)return Promise.reject(Y);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Re=yield bi(S,N,"getOobCode",!0);g&&Da(S,Re,g),yield uu(S,Re)}});return function(Y){return H.apply(this,arguments)}}())}),ba.apply(this,arguments)}function Ta(){return(Ta=(0,m.Z)(function*(v,h,g){yield _p((0,F.m9)(v),{oobCode:h,newPassword:g})})).apply(this,arguments)}function Zr(){return Zr=(0,m.Z)(function*(v,h){yield function Pt(v,h){return cr.apply(this,arguments)}((0,F.m9)(v),{oobCode:h})}),Zr.apply(this,arguments)}function ih(v,h){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,m.Z)(function*(v,h){const g=(0,F.m9)(v),w=yield _p(g,{oobCode:h}),S=w.requestType;switch(ae(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(w.mfaInfo,g,"internal-error");default:ae(w.email,g,"internal-error")}let N=null;return w.mfaInfo&&(N=fu._fromServerResponse(Zn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function Ls(){return(Ls=(0,m.Z)(function*(v,h){const{data:g}=yield ih((0,F.m9)(v),h);return g.email})).apply(this,arguments)}function fc(){return fc=(0,m.Z)(function*(v,h,g){var w;const S=Zn(v),N={returnSecureToken:!0,email:h,password:g,clientType:"CLIENT_TYPE_WEB"};let H;if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const $e=yield bi(S,N,"signUpPassword");H=Fs(S,$e)}else H=Fs(S,N).catch(function(){var $e=(0,m.Z)(function*(Xe){if("auth/missing-recaptcha-token"===Xe.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const it=yield bi(S,N,"signUpPassword");return Fs(S,it)}return Promise.reject(Xe)});return function(Xe){return $e.apply(this,arguments)}}());const Y=yield H.catch($e=>Promise.reject($e)),Re=yield Tr._fromIdTokenResponse(S,"signIn",Y);return yield S._updateCurrentUser(Re.user),Re}),fc.apply(this,arguments)}function sl(){return sl=(0,m.Z)(function*(v,h,g){var w;const S=Zn(v),N={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function H(Y,Re){ae(Re.handleCodeInApp,S,"argument-error"),Re&&Da(S,Y,Re)}if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Y=yield bi(S,N,"getOobCode",!0);H(Y,g),yield Hn(S,Y)}else H(N,g),yield Hn(S,N).catch(function(){var Y=(0,m.Z)(function*(Re){if("auth/missing-recaptcha-token"!==Re.code)return Promise.reject(Re);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const $e=yield bi(S,N,"getOobCode",!0);H($e,g),yield Hn(S,$e)}});return function(Re){return Y.apply(this,arguments)}}())}),sl.apply(this,arguments)}function bp(){return(bp=(0,m.Z)(function*(v,h,g){const w=(0,F.m9)(v),S=il.credentialWithLink(h,g||pr());return ae(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),dc(w,S)})).apply(this,arguments)}function ah(){return(ah=(0,m.Z)(function*(v,h){return Te(v,"POST","/v1/accounts:createAuthUri",Ie(v,h))})).apply(this,arguments)}function mc(){return mc=(0,m.Z)(function*(v,h){const w={identifier:h,continueUri:zr()?pr():"http://localhost"},{signinMethods:S}=yield function Tp(v,h){return ah.apply(this,arguments)}((0,F.m9)(v),w);return S||[]}),mc.apply(this,arguments)}function Ma(){return Ma=(0,m.Z)(function*(v,h){const g=(0,F.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};h&&Da(g.auth,S,h);const{email:N}=yield function oc(v,h){return _a.apply(this,arguments)}(g.auth,S);N!==v.email&&(yield v.reload())}),Ma.apply(this,arguments)}function mu(){return mu=(0,m.Z)(function*(v,h,g){const w=(0,F.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:h};g&&Da(w.auth,N,g);const{email:H}=yield function At(v,h){return Cn.apply(this,arguments)}(w.auth,N);H!==v.email&&(yield v.reload())}),mu.apply(this,arguments)}function _c(){return(_c=(0,m.Z)(function*(v,h){return Te(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function al(){return al=(0,m.Z)(function*(v,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const w=(0,F.m9)(v),N={idToken:yield w.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},H=yield Nn(w,function Sp(v,h){return _c.apply(this,arguments)}(w.auth,N));w.displayName=H.displayName||null,w.photoURL=H.photoUrl||null;const Y=w.providerData.find(({providerId:Re})=>"password"===Re);Y&&(Y.displayName=w.displayName,Y.photoURL=w.photoURL),yield w._updateTokensIfNecessary(H)}),al.apply(this,arguments)}function ms(v,h,g){return yu.apply(this,arguments)}function yu(){return(yu=(0,m.Z)(function*(v,h,g){const{auth:w}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};h&&(N.email=h),g&&(N.password=g);const H=yield Nn(v,ic(w,N));yield v._updateTokensIfNecessary(H,!0)})).apply(this,arguments)}class rn{constructor(h,g,w={}){this.isNewUser=h,this.providerId=g,this.profile=w}}class _u extends rn{constructor(h,g,w,S){super(h,g,w),this.username=S}}class xa extends rn{constructor(h,g){super(h,"facebook.com",g)}}class Ar extends _u{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Na extends rn{constructor(h,g){super(h,"google.com",g)}}class ch extends _u{constructor(h,g,w){super(h,"twitter.com",g,w)}}function Vs(v){const{user:h,_tokenResponse:g}=v;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function lh(v){var h,g;if(!v)return null;const{providerId:w}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const H=null===(g=null===(h=bt(v.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(H)return new rn(N,"anonymous"!==H&&"custom"!==H?H:null)}if(!w)return null;switch(w){case"facebook.com":return new xa(N,S);case"github.com":return new Ar(N,S);case"google.com":return new Na(N,S);case"twitter.com":return new ch(N,S,v.screenName||null);case"custom":case"anonymous":return new rn(N,null);default:return new rn(N,w,S)}}(g)}class ro{constructor(h,g,w){this.type=h,this.credential=g,this.auth=w}static _fromIdtoken(h,g){return new ro("enroll",h,g)}static _fromMfaPendingCredential(h){return new ro("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,w;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return ro._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(w=h.multiFactorSession)&&void 0!==w&&w.idToken)return ro._fromIdtoken(h.multiFactorSession.idToken)}return null}}class wt{constructor(h,g,w){this.session=h,this.hints=g,this.signInResolver=w}static _fromError(h,g){const w=Zn(h),S=g.customData._serverResponse,N=(S.mfaInfo||[]).map(Y=>fu._fromServerResponse(w,Y));ae(S.mfaPendingCredential,w,"internal-error");const H=ro._fromMfaPendingCredential(S.mfaPendingCredential);return new wt(H,N,function(){var Y=(0,m.Z)(function*(Re){const $e=yield Re._process(w,H);delete S.mfaInfo,delete S.mfaPendingCredential;const Xe=Object.assign(Object.assign({},S),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(g.operationType){case"signIn":const it=yield Tr._fromIdTokenResponse(w,g.operationType,Xe);return yield w._updateCurrentUser(it.user),it;case"reauthenticate":return ae(g.user,w,"internal-error"),Tr._forOperation(g.user,g.operationType,Xe);default:_e(w,"internal-error")}});return function(Re){return Y.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,m.Z)(function*(){return g.signInResolver(h)})()}}class ji{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>fu._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new ji(h)}getSession(){var h=this;return(0,m.Z)(function*(){return ro._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var w=this;return(0,m.Z)(function*(){const S=h,N=yield w.getSession(),H=yield Nn(w.user,S._process(w.user.auth,N,g));return yield w.user._updateTokensIfNecessary(H),w.user.reload()})()}unenroll(h){var g=this;return(0,m.Z)(function*(){const w="string"==typeof h?h:h.uid,S=yield g.user.getIdToken();try{const N=yield Nn(g.user,function Dc(v,h){return Te(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ie(v,h))}(g.user.auth,{idToken:S,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:H})=>H!==w),yield g.user._updateTokensIfNecessary(N),yield g.user.reload()}catch(N){throw N}})()}}const Ra=new WeakMap,bc="__sak";class Tc{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(bc,"1"),this.storage.removeItem(bc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const io=(()=>{class v extends Tc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Np(){const v=(0,F.z$)();return se(v)||Et(v)}()&&function si(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ds(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),N=this.localCache[w];S!==N&&g(w,N,S)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((Y,Re,$e)=>{this.notifyListeners(Y,$e)});const S=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Y=this.storage.getItem(S);if(g.newValue!==Y)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!w)return}const N=()=>{const Y=this.storage.getItem(S);!w&&this.localCache[S]===Y||this.notifyListeners(S,Y)},H=this.storage.getItem(S);!function Di(){return(0,F.w1)()&&10===document.documentMode}()||H===g.newValue||g.newValue===g.oldValue?N():setTimeout(N,10)}notifyListeners(g,w){this.localCache[g]=w;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var S=()=>super._set,N=this;return(0,m.Z)(function*(){yield S().call(N,g,w),N.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,S=this;return(0,m.Z)(function*(){const N=yield w().call(S,g);return S.localCache[g]=JSON.stringify(N),N})()}_remove(g){var w=()=>super._remove,S=this;return(0,m.Z)(function*(){yield w().call(S,g),delete S.localCache[g]})()}}return v.type="LOCAL",v})(),so=(()=>{class v extends Tc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return v.type="SESSION",v})();let $i=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(N=>N.isListeningto(g));if(w)return w;const S=new v(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,m.Z)(function*(){const S=g,{eventId:N,eventType:H,data:Y}=S.data,Re=w.handlersMap[H];if(!Re?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:H});const $e=Array.from(Re).map(function(){var it=(0,m.Z)(function*(kn){return kn(S.origin,Y)});return function(kn){return it.apply(this,arguments)}}()),Xe=yield function ll(v){return Promise.all(v.map(function(){var h=(0,m.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return h.apply(this,arguments)}}()))}($e);S.ports[0].postMessage({status:"done",eventId:N,eventType:H,response:Xe})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function vu(v="",h=10){let g="";for(let w=0;w<h;w++)g+=Math.floor(10*Math.random());return v+g}class Sc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,w=50){var S=this;return(0,m.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let H,Y;return new Promise((Re,$e)=>{const Xe=vu("",20);N.port1.start();const it=setTimeout(()=>{$e(new Error("unsupported_event"))},w);Y={messageChannel:N,onMessage(kn){const _o=kn;if(_o.data.eventId===Xe)switch(_o.data.status){case"ack":clearTimeout(it),H=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),Re(_o.data.response);break;default:clearTimeout(it),clearTimeout(H),$e(new Error("invalid_response"))}}},S.handlers.add(Y),N.port1.addEventListener("message",Y.onMessage),S.target.postMessage({eventType:h,eventId:Xe,data:g},[N.port2])}).finally(()=>{Y&&S.removeMessageHandler(Y)})})()}}function Un(){return window}function cl(){return typeof Un().WorkerGlobalScope<"u"&&"function"==typeof Un().importScripts}function xi(){return(xi=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Hi="firebaseLocalStorageDb",wu="firebaseLocalStorage",mh="fbase_key";class Eu{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Iu(v,h){return v.transaction([wu],h?"readwrite":"readonly").objectStore(wu)}function Cu(){const v=indexedDB.open(Hi,1);return new Promise((h,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(wu,{keyPath:mh})}catch(S){g(S)}}),v.addEventListener("success",(0,m.Z)(function*(){const w=v.result;w.objectStoreNames.contains(wu)?h(w):(w.close(),yield function Ac(){const v=indexedDB.deleteDatabase(Hi);return new Eu(v).toPromise()}(),h(yield Cu()))}))})}function Lo(v,h,g){return _s.apply(this,arguments)}function _s(){return(_s=(0,m.Z)(function*(v,h,g){const w=Iu(v,!0).put({[mh]:h,value:g});return new Eu(w).toPromise()})).apply(this,arguments)}function Du(){return(Du=(0,m.Z)(function*(v,h){const g=Iu(v,!1).get(h),w=yield new Eu(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function bu(v,h){const g=Iu(v,!0).delete(h);return new Eu(g).toPromise()}const Vo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,m.Z)(function*(){return g.db||(g.db=yield Cu()),g.db})()}_withRetries(g){var w=this;return(0,m.Z)(function*(){let S=0;for(;;)try{const N=yield w._openDb();return yield g(N)}catch(N){if(S++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,m.Z)(function*(){return cl()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,m.Z)(function*(){g.receiver=$i._getInstance(function Pn(){return cl()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,m.Z)(function*(S,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(S,N){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,m.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,m.Z)(function*(){var w,S;if(g.activeServiceWorker=yield function Lr(){return xi.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Sc(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);N&&null!==(w=N[0])&&void 0!==w&&w.fulfilled&&null!==(S=N[0])&&void 0!==S&&S.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,m.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function dl(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Cu();return yield Lo(g,bc,"1"),yield bu(g,bc),!0}catch{}return!1})()}_withPendingWrite(g){var w=this;return(0,m.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var S=this;return(0,m.Z)(function*(){return S._withPendingWrite((0,m.Z)(function*(){return yield S._withRetries(N=>Lo(N,g,w)),S.localCache[g]=w,S.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,m.Z)(function*(){const S=yield w._withRetries(N=>function hl(v,h){return Du.apply(this,arguments)}(N,g));return w.localCache[g]=S,S})()}_remove(g){var w=this;return(0,m.Z)(function*(){return w._withPendingWrite((0,m.Z)(function*(){return yield w._withRetries(S=>bu(S,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,m.Z)(function*(){const w=yield g._withRetries(H=>{const Y=Iu(H,!1).getAll();return new Eu(Y).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:H,value:Y}of w)N.add(H),JSON.stringify(g.localCache[H])!==JSON.stringify(Y)&&(g.notifyListeners(H,Y),S.push(H));for(const H of Object.keys(g.localCache))g.localCache[H]&&!N.has(H)&&(g.notifyListeners(H,null),S.push(H));return S})()}notifyListeners(g,w){this.localCache[g]=w;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Tu=1e12;class Op{constructor(h){this.auth=h,this.counter=Tu,this._widgets=new Map}render(h,g){const w=this.counter;return this._widgets.set(w,new _h(h,this.auth.name,g||{})),this.counter++,w}reset(h){var g;const w=h||Tu;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Tu))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,m.Z)(function*(){var w;return null===(w=g._widgets.get(h||Tu))||void 0===w||w.execute(),""})()}}class _h{constructor(h,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;ae(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Zm(v){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)h.push(g.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const fl=xo("rcb"),xc=new Ns(3e4,6e4);class Uo{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Un().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return ae(function vh(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),h,"argument-error"),this.shouldResolveImmediately(g)&&Rt(Un().grecaptcha)?Promise.resolve(Un().grecaptcha):new Promise((w,S)=>{const N=Un().setTimeout(()=>{S(te(h,"network-request-failed"))},xc.get());Un()[fl]=()=>{Un().clearTimeout(N),delete Un()[fl];const Y=Un().grecaptcha;if(!Y||!Rt(Y))return void S(te(h,"internal-error"));const Re=Y.render;Y.render=($e,Xe)=>{const it=Re($e,Xe);return this.counter++,it},this.hostLanguage=g,w(Y)},Rs(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:fl,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),S(te(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=Un().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Nc{load(h){return(0,m.Z)(function*(){return new Op(h)})()}clearedOneInstance(){}}const Pa="recaptcha",Rc={theme:"light",type:"image"};class pl{constructor(h,g=Object.assign({},Rc),w){this.parameters=g,this.type=Pa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Zn(w),this.isInvisible="invisible"===this.parameters.size,ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;ae(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Nc:new Uo,this.validateStartingState()}verify(){var h=this;return(0,m.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(g)||new Promise(N=>{const H=Y=>{Y&&(h.tokenChangeListeners.delete(H),N(Y))};h.tokenChangeListeners.add(H),h.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof h)h(g);else if("string"==typeof h){const w=Un()[h];"function"==typeof w&&w(g)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,m.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,m.Z)(function*(){ae(zr()&&!cl(),h.auth,"internal-error"),yield function On(){let v=null;return new Promise(h=>{"complete"!==document.readyState?(v=()=>h(),window.addEventListener("load",v)):h()}).catch(h=>{throw v&&window.removeEventListener("load",v),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function re(v){return ke.apply(this,arguments)}(h.auth);ae(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vr{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Gn._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function vs(){return(vs=(0,m.Z)(function*(v,h,g){const w=Zn(v),S=yield Bo(w,h,(0,F.m9)(g));return new Vr(S,N=>dc(w,N))})).apply(this,arguments)}function Mu(){return(Mu=(0,m.Z)(function*(v,h,g){const w=(0,F.m9)(v);yield du(!1,w,"phone");const S=yield Bo(w.auth,h,(0,F.m9)(g));return new Vr(S,N=>eh(w,N))})).apply(this,arguments)}function Oa(){return(Oa=(0,m.Z)(function*(v,h,g){const w=(0,F.m9)(v),S=yield Bo(w.auth,h,(0,F.m9)(g));return new Vr(S,N=>Wn(w,N))})).apply(this,arguments)}function Bo(v,h,g){return ao.apply(this,arguments)}function ao(){return ao=(0,m.Z)(function*(v,h,g){var w;const S=yield g.verify();try{let N;if(ae("string"==typeof S,v,"argument-error"),ae(g.type===Pa,v,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const H=N.session;if("phoneNumber"in N)return ae("enroll"===H.type,v,"internal-error"),(yield function fh(v,h){return Te(v,"POST","/v2/accounts/mfaEnrollment:start",Ie(v,h))}(v,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{ae("signin"===H.type,v,"internal-error");const Y=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return ae(Y,v,"missing-multi-factor-info"),(yield function yh(v,h){return Te(v,"POST","/v2/accounts/mfaSignIn:start",Ie(v,h))}(v,{mfaPendingCredential:H.credential,mfaEnrollmentId:Y,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield function Kd(v,h){return hs.apply(this,arguments)}(v,{phoneNumber:N.phoneNumber,recaptchaToken:S});return H}}finally{g._reset()}}),ao.apply(this,arguments)}function Ct(){return(Ct=(0,m.Z)(function*(v,h){yield lc((0,F.m9)(v),h)})).apply(this,arguments)}let ka=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=Zn(g)}verifyPhoneNumber(g,w){return Bo(this.auth,g,(0,F.m9)(w))}static credential(g,w){return Gn._fromVerification(g,w)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:S}=g;return w&&S?Gn._fromTokenResponse(w,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function uo(v,h){return h?tn(h):(ae(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Nr extends Ps{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return _r(h,this._buildIdpRequest())}_linkToIdToken(h,g){return _r(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return _r(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function Oc(v){return Cp(v.auth,new Nr(v),v.bypassAuthState)}function xu(v){const{auth:h,user:g}=v;return ae(g,h,"internal-error"),Ip(g,new Nr(v),v.bypassAuthState)}function jo(v){return ci.apply(this,arguments)}function ci(){return(ci=(0,m.Z)(function*(v){const{auth:h,user:g}=v;return ae(g,h,"internal-error"),lc(g,new Nr(v),v.bypassAuthState)})).apply(this,arguments)}class Gi{constructor(h,g,w,S,N=!1){this.auth=h,this.resolver=w,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,m.Z)(function*(w,S){h.pendingPromise={resolve:w,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(w,S){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,m.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:N,tenantId:H,error:Y,type:Re}=h;if(Y)return void g.reject(Y);const $e={auth:g.auth,requestUri:w,sessionId:S,tenantId:H||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Re)($e))}catch(Xe){g.reject(Xe)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Oc;case"linkViaPopup":case"linkViaRedirect":return jo;case"reauthViaPopup":case"reauthViaRedirect":return xu;default:_e(this.auth,"internal-error")}}resolve(h){Ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zi=new Ns(2e3,1e4);function wh(){return(wh=(0,m.Z)(function*(v,h,g){const w=Zn(v);Fe(v,h,fs);const S=uo(w,g);return new Ru(w,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function kc(){return(kc=(0,m.Z)(function*(v,h,g){const w=(0,F.m9)(v);Fe(w.auth,h,fs);const S=uo(w.auth,g);return new Ru(w.auth,"reauthViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}function Ni(){return(Ni=(0,m.Z)(function*(v,h,g){const w=(0,F.m9)(v);Fe(w.auth,h,fs);const S=uo(w.auth,g);return new Ru(w.auth,"linkViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}let Ru=(()=>{class v extends Gi{constructor(g,w,S,N,H){super(g,w,N,H),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,m.Z)(function*(){const w=yield g.execute();return ae(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,m.Z)(function*(){Ut(1===g.filter.length,"Popup operations only handle one event");const w=vu();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(te(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(te(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,zi.get())};g()}}return v.currentPopupAction=null,v})();const Qn="pendingRedirect",di=new Map;class Ym extends Gi{constructor(h,g,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,m.Z)(function*(){let w=di.get(g.auth._key());if(!w){try{const N=(yield function Fc(v,h){return gl.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;w=()=>Promise.resolve(N)}catch(S){w=()=>Promise.reject(S)}di.set(g.auth._key(),w)}return g.bypassAuthState||di.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,w=this;return(0,m.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(w,h);if("unknown"!==h.type){if(h.eventId){const S=yield w.auth._redirectUserForId(h.eventId);if(S)return w.user=S,g().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function gl(){return(gl=(0,m.Z)(function*(v,h){const g=_l(h),w=lo(v);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(g));return yield w._remove(g),S})).apply(this,arguments)}function ml(v,h){return yl.apply(this,arguments)}function yl(){return(yl=(0,m.Z)(function*(v,h){return lo(v)._set(_l(h),"true")})).apply(this,arguments)}function Ho(v,h){di.set(v._key(),h)}function lo(v){return tn(v._redirectPersistence)}function _l(v){return $(Qn,v.config.apiKey,v.name)}function vl(v,h,g){return function Pu(v,h,g){return Us.apply(this,arguments)}(v,h,g)}function Us(){return(Us=(0,m.Z)(function*(v,h,g){const w=Zn(v);Fe(v,h,fs),yield w._initializationPromise;const S=uo(w,g);return yield ml(S,w),S._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function Eh(v,h,g){return function Lc(v,h,g){return Fa.apply(this,arguments)}(v,h,g)}function Fa(){return(Fa=(0,m.Z)(function*(v,h,g){const w=(0,F.m9)(v);Fe(w.auth,h,fs),yield w.auth._initializationPromise;const S=uo(w.auth,g);yield ml(S,w.auth);const N=yield Go(w);return S._openRedirect(w.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function Lp(v,h,g){return function Ih(v,h,g){return La.apply(this,arguments)}(v,h,g)}function La(){return(La=(0,m.Z)(function*(v,h,g){const w=(0,F.m9)(v);Fe(w.auth,h,fs),yield w.auth._initializationPromise;const S=uo(w.auth,g);yield du(!1,w,h.providerId),yield ml(S,w.auth);const N=yield Go(w);return S._openRedirect(w.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function Bs(){return(Bs=(0,m.Z)(function*(v,h){return yield Zn(v)._initializationPromise,Wi(v,h,!1)})).apply(this,arguments)}function Wi(v,h){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,m.Z)(function*(v,h,g=!1){const w=Zn(v),S=uo(w,h),H=yield new Ym(w,S,g).execute();return H&&!g&&(delete H.user._redirectEventId,yield w._persistUserIfCurrent(H.user),yield w._setRedirectUser(null,h)),H})).apply(this,arguments)}function Go(v){return qi.apply(this,arguments)}function qi(){return(qi=(0,m.Z)(function*(v){const h=vu(`${v.uid}:::`);return v._redirectEventId=h,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),h})).apply(this,arguments)}class zo{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(g=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Vc(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Il(v);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var w;if(h.error&&!Il(h)){const S=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(te(this.auth,S))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const w=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(El(h))}saveEventToCache(h){this.cachedEventUids.add(El(h)),this.lastProcessedEventTime=Date.now()}}function El(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(h=>h).join("-")}function Il({type:v,error:h}){return"unknown"===v&&"auth/no-auth-event"===h?.code}function Qr(v){return ho.apply(this,arguments)}function ho(){return(ho=(0,m.Z)(function*(v,h={}){return Te(v,"GET","/v1/projects",h)})).apply(this,arguments)}const Qm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ku=/^https?/;function Es(){return(Es=(0,m.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:h}=yield Qr(v);for(const g of h)try{if(jn(g))return}catch{}_e(v,"unauthorized-domain")})).apply(this,arguments)}function jn(v){const h=pr(),{protocol:g,hostname:w}=new URL(h);if(v.startsWith("chrome-extension://")){const H=new URL(v);return""===H.hostname&&""===w?"chrome-extension:"===g&&v.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&H.hostname===w}if(!ku.test(g))return!1;if(Qm.test(v))return w===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const Uc=new Ns(3e4,6e4);function js(){const v=Un().___jsl;if(v?.H)for(const h of Object.keys(v.H))if(v.H[h].r=v.H[h].r||[],v.H[h].L=v.H[h].L||[],v.H[h].r=[...v.H[h].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let Ir=null;const Xm=new Ns(5e3,15e3),Ch="__/auth/iframe",Fu="emulator/auth/iframe",ey={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wv(v){const h=v.config;ae(h.authDomain,v,"auth-domain-config-required");const g=h.emulator?ue(h,Fu):`https://${v.config.authDomain}/${Ch}`,w={apiKey:h.apiKey,appName:v.name,v:ee.SDK_VERSION},S=zv.get(v.config.apiHost);S&&(w.eid=S);const N=v._getFrameworks();return N.length&&(w.fw=N.join(",")),`${g}?${(0,F.xO)(w).slice(1)}`}function b(){return b=(0,m.Z)(function*(v){const h=yield function Ki(v){return Ir=Ir||function Wo(v){return new Promise((h,g)=>{var w,S,N;function H(){js(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{js(),g(te(v,"network-request-failed"))},timeout:Uc.get()})}if(null!==(S=null===(w=Un().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(N=Un().gapi)||void 0===N||!N.load){const Y=xo("iframefcb");return Un()[Y]=()=>{gapi.load?H():g(te(v,"network-request-failed"))},Rs(`https://apis.google.com/js/api.js?onload=${Y}`).catch(Re=>g(Re))}H()}}).catch(h=>{throw Ir=null,h})}(v),Ir}(v),g=Un().gapi;return ae(g,v,"internal-error"),h.open({where:document.body,url:Wv(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ey,dontclear:!0},w=>new Promise(function(){var S=(0,m.Z)(function*(N,H){yield w.restyle({setHideOnLeave:!1});const Y=te(v,"network-request-failed"),Re=Un().setTimeout(()=>{H(Y)},Xm.get());function $e(){Un().clearTimeout(Re),N(w)}w.ping($e).then($e,()=>{H(Y)})});return function(N,H){return S.apply(this,arguments)}}()))}),b.apply(this,arguments)}const x={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class He{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Dt="__/auth/handler",St="emulator/auth/handler",Rr=encodeURIComponent("fac");function $n(v,h,g,w,S,N){return $s.apply(this,arguments)}function $s(){return($s=(0,m.Z)(function*(v,h,g,w,S,N){ae(v.config.authDomain,v,"auth-domain-config-required"),ae(v.config.apiKey,v,"invalid-api-key");const H={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:w,v:ee.SDK_VERSION,eventId:S};if(h instanceof fs){h.setDefaultLanguage(v.languageCode),H.providerId=h.providerId||"",(0,F.xb)(h.getCustomParameters())||(H.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Xe,it]of Object.entries(N||{}))H[Xe]=it}if(h instanceof Kr){const Xe=h.getScopes().filter(it=>""!==it);Xe.length>0&&(H.scopes=Xe.join(","))}v.tenantId&&(H.tid=v.tenantId);const Y=H;for(const Xe of Object.keys(Y))void 0===Y[Xe]&&delete Y[Xe];const Re=yield v._getAppCheckToken(),$e=Re?`#${Rr}=${encodeURIComponent(Re)}`:"";return`${function qo({config:v}){return v.emulator?ue(v,St):`https://${v.authDomain}/${Dt}`}(v)}?${(0,F.xO)(Y).slice(1)}${$e}`})).apply(this,arguments)}const fo="webStorageSupport",Zi=class Ur{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=so,this._completeRedirectFn=Wi,this._overrideRedirectResult=Ho}_openPopup(h,g,w,S){var N=this;return(0,m.Z)(function*(){var H;Ut(null===(H=N.eventManagers[h._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const Y=yield $n(h,g,w,pr(),S);return function je(v,h,g,w=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),H=Math.max((window.screen.availWidth-w)/2,0).toString();let Y="";const Re=Object.assign(Object.assign({},x),{width:w.toString(),height:S.toString(),top:N,left:H}),$e=(0,F.z$)().toLowerCase();g&&(Y=et($e)?"_blank":g),Ce($e)&&(h=h||"http://localhost",Re.scrollbars="yes");const Xe=Object.entries(Re).reduce((kn,[_o,Bh])=>`${kn}${_o}=${Bh},`,"");if(function yr(v=(0,F.z$)()){var h;return Et(v)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}($e)&&"_self"!==Y)return function tt(v,h){const g=document.createElement("a");g.href=v,g.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(h||"",Y),new He(null);const it=window.open(h||"",Y,Xe);ae(it,v,"popup-blocked");try{it.focus()}catch{}return new He(it)}(h,Y,vu())})()}_openRedirect(h,g,w,S){var N=this;return(0,m.Z)(function*(){return yield N._originValidation(h),function Wm(v){Un().location.href=v}(yield $n(h,g,w,pr(),S)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:S,promise:N}=this.eventManagers[g];return S?Promise.resolve(S):(Ut(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(h);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(h){var g=this;return(0,m.Z)(function*(){const w=yield function C(v){return b.apply(this,arguments)}(h),S=new zo(h);return w.register("authEvent",N=>(ae(N?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:S},g.iframes[h._key()]=w,S})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(fo,{type:fo},S=>{var N;const H=null===(N=S?.[0])||void 0===N?void 0:N[fo];void 0!==H&&g(!!H),_e(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Jm(v){return Es.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return ds()||se()||Et()}};class Dh{constructor(h){this.factorId=h}_process(h,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,w);case"signin":return this._finalizeSignIn(h,g.credential);default:return _t("unexpected MultiFactorSessionType")}}}class bh extends Dh{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new bh(h)}_finalizeEnroll(h,g,w){return function Mp(v,h){return Te(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ie(v,h))}(h,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Km(v,h){return Te(v,"POST","/v2/accounts/mfaSignIn:finalize",Ie(v,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Th=(()=>{class v{constructor(){}static assertion(g){return bh._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var po="@firebase/auth";class Vp{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,m.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(w=>{h(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);g&&(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ko(){return window}(0,F.Pz)("authIdTokenMaxAge"),function Up(v){(0,ee._registerComponent)(new ge.wA("auth",(h,{options:g})=>{const w=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),N=h.getProvider("app-check-internal"),{apiKey:H,authDomain:Y}=w.options;ae(H&&!H.includes(":"),"invalid-api-key",{appName:w.name});const Re={apiKey:H,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fe(v)},$e=new Gd(w,S,N,Re);return function yp(v,h){const g=h?.persistence||[],w=(Array.isArray(g)?g:[g]).map(tn);h?.errorMap&&v._updateErrorMap(h.errorMap),v._initializeWithPersistence(w,h?.popupRedirectResolver)}($e,g),$e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,w)=>{h.getProvider("auth-internal").initialize()})),(0,ee._registerComponent)(new ge.wA("auth-internal",h=>{const g=Zn(h.getProvider("auth").getImmediate());return new Vp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)(po,"0.23.2",function ty(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ee.registerVersion)(po,"0.23.2","esm2017")}("Browser");function iy(){return iy=(0,m.Z)(function*(v,h,g){var w;const{BuildInfo:S}=Ko();Ut(h.sessionId,"AuthEvent did not contain a session ID");const N=yield function sy(v){return Hc.apply(this,arguments)}(h.sessionId),H={};return Et()?H.ibi=S.packageName:jt()?H.apn=S.packageName:_e(v,"operation-not-supported-in-this-environment"),S.displayName&&(H.appDisplayName=S.displayName),H.sessionId=N,$n(v,g,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,H)}),iy.apply(this,arguments)}function Yv(){return(Yv=(0,m.Z)(function*(v){const{BuildInfo:h}=Ko(),g={};Et()?g.iosBundleId=h.packageName:jt()?g.androidPackageName=h.packageName:_e(v,"operation-not-supported-in-this-environment"),yield Qr(v,g)})).apply(this,arguments)}function $c(){return($c=(0,m.Z)(function*(v,h,g){const{cordova:w}=Ko();let S=()=>{};try{yield new Promise((N,H)=>{let Y=null;function Re(){var it;N();const kn=null===(it=w.plugins.browsertab)||void 0===it?void 0:it.close;"function"==typeof kn&&kn(),"function"==typeof g?.close&&g.close()}function $e(){Y||(Y=window.setTimeout(()=>{H(te(v,"redirect-cancelled-by-user"))},2e3))}function Xe(){"visible"===document?.visibilityState&&$e()}h.addPassiveListener(Re),document.addEventListener("resume",$e,!1),jt()&&document.addEventListener("visibilitychange",Xe,!1),S=()=>{h.removePassiveListener(Re),document.removeEventListener("resume",$e,!1),document.removeEventListener("visibilitychange",Xe,!1),Y&&window.clearTimeout(Y)}})}finally{S()}})).apply(this,arguments)}function Hc(){return(Hc=(0,m.Z)(function*(v){const h=function cA(v){if(Ut(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const h=new ArrayBuffer(v.length),g=new Uint8Array(h);for(let w=0;w<v.length;w++)g[w]=v.charCodeAt(w);return g}(v),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ah extends zo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,m.Z)(function*(){yield h.initPromise})()}}function Hp(v){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,m.Z)(function*(v){const h=yield Gc()._get(zp(v));return h&&(yield Gc()._remove(zp(v))),h})).apply(this,arguments)}function oy(){const v=[];for(let g=0;g<20;g++){const w=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(w))}return v.join("")}function Gc(){return tn(io)}function zp(v){return $("authEvent",v.config.apiKey,v.name)}function xh(v){if(!v?.includes("?"))return{};const[h,...g]=v.split("?");return(0,F.zd)(g.join("?"))}const Rh=class Wc{constructor(){this._redirectPersistence=so,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Wi,this._overrideRedirectResult=Ho}_initialize(h){var g=this;return(0,m.Z)(function*(){const w=h._key();let S=g.eventManagers.get(w);return S||(S=new Ah(h),g.eventManagers.set(w,S),g.attachCallbackListeners(h,S)),S})()}_openPopup(h){_e(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,w,S){var N=this;return(0,m.Z)(function*(){!function Qv(v){var h,g,w,S,N,H,Y,Re,$e,Xe;const it=Ko();ae("function"==typeof(null===(h=it?.universalLinks)||void 0===h?void 0:h.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ae(typeof(null===(g=it?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ae("function"==typeof(null===(N=null===(S=null===(w=it?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(Re=null===(Y=null===(H=it?.cordova)||void 0===H?void 0:H.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===Re?void 0:Re.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(Xe=null===($e=it?.cordova)||void 0===$e?void 0:$e.InAppBrowser)||void 0===Xe?void 0:Xe.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const H=yield N._initialize(h);yield H.initialized(),H.resetRedirect(),function Fp(){di.clear()}(),yield N._originValidation(h);const Y=function Mh(v,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:oy(),postBody:null,tenantId:v.tenantId,error:te(v,"no-auth-event")}}(h,w,S);yield function Jv(v,h){return Gc()._set(zp(v),h)}(h,Y);const Re=yield function Zv(v,h,g){return iy.apply(this,arguments)}(h,Y,g),$e=yield function tC(v){const{cordova:h}=Ko();return new Promise(g=>{h.plugins.browsertab.isAvailable(w=>{let S=null;w?h.plugins.browsertab.openUrl(v):S=h.InAppBrowser.open(v,function zt(v=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(S)})})}(Re);return function $p(v,h,g){return $c.apply(this,arguments)}(h,H,$e)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Sh(v){return Yv.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:w,handleOpenURL:S,BuildInfo:N}=Ko(),H=setTimeout((0,m.Z)(function*(){yield Hp(h),g.onEvent(Wp())}),500),Y=function(){var Xe=(0,m.Z)(function*(it){clearTimeout(H);const kn=yield Hp(h);let _o=null;kn&&it?.url&&(_o=function Gp(v,h){var g,w;const S=function Xv(v){const h=xh(v),g=h.link?decodeURIComponent(h.link):void 0,w=xh(g).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return xh(S).link||S||w||g||v}(h);if(S.includes("/__/auth/callback")){const N=xh(S),H=N.firebaseError?function zc(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,Y=null===(w=null===(g=H?.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Re=Y?te(Y):null;return Re?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Re,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:S,postBody:null}}return null}(kn,it.url)),g.onEvent(_o||Wp())});return function(kn){return Xe.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,Y);const Re=S,$e=`${N.packageName.toLowerCase()}://`;Ko().handleOpenURL=function(){var Xe=(0,m.Z)(function*(it){if(it.toLowerCase().startsWith($e)&&Y({url:it}),"function"==typeof Re)try{Re(it)}catch(kn){console.error(kn)}});return function(it){return Xe.apply(this,arguments)}}()}};function Wp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:te("no-auth-event")}}function qc(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Kp(v=(0,F.z$)()){return!("file:"!==qc()&&"ionic:"!==qc()&&"capacitor:"!==qc()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kc(){try{const v=self.localStorage,h=vu();if(v)return v.setItem(h,"1"),v.removeItem(h),!function hi(v=(0,F.z$)()){return function ly(){return(0,F.w1)()&&11===document?.documentMode}()||function e0(v=(0,F.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,F.hl)()}catch{return kh()&&(0,F.hl)()}return!1}function kh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Cl(){return(function rC(){return"http:"===qc()||"https:"===qc()}()||(0,F.ru)()||Kp())&&!function uy(){return(0,F.b$)()||(0,F.UG)()}()&&Kc()&&!kh()}function Br(){return Kp()&&typeof document<"u"}function Fh(){return(Fh=(0,m.Z)(function*(){return!!Br()&&new Promise(v=>{const h=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),v(!0)})})})).apply(this,arguments)}const Yi={LOCAL:"local",NONE:"none",SESSION:"session"},Ua=ae,Zp="persistence";function Vh(v){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,m.Z)(function*(v){yield v._initializationPromise;const h=hy(),g=$(Zp,v.config.apiKey,v.name);h&&h.setItem(g,v._getPersistence())})).apply(this,arguments)}function hy(){var v;try{return(null===(v=function Lh(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Zc=ae;class go{constructor(){this.browserResolver=tn(Zi),this.cordovaResolver=tn(Rh),this.underlyingResolver=null,this._redirectPersistence=so,this._completeRedirectFn=Wi,this._overrideRedirectResult=Ho}_initialize(h){var g=this;return(0,m.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,w,S){var N=this;return(0,m.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,g,w,S)})()}_openRedirect(h,g,w,S){var N=this;return(0,m.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,g,w,S)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Br()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Zc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,m.Z)(function*(){if(h.underlyingResolver)return;const g=yield function Vu(){return Fh.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function fy(v){return v.unwrap()}function t0(v){return Yc(v)}function Yc(v){const{_tokenResponse:h}=v instanceof F.ZR?v.customData:v;if(!h)return null;if(!(v instanceof F.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return ka.credentialFromResult(v);const g=h.providerId;if(!g||g===he.PASSWORD)return null;let w;switch(g){case he.GOOGLE:w=Fo;break;case he.FACEBOOK:w=ko;break;case he.GITHUB:w=vr;break;case he.TWITTER:w=ks;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:H,pendingToken:Y,nonce:Re}=h;return N||H||S||Y?Y?g.startsWith("saml.")?zn._create(g,Y):qr._fromParams({providerId:g,signInMethod:g,pendingToken:Y,idToken:S,accessToken:N}):new Si(g).credential({idToken:S,accessToken:N,rawNonce:Re}):null}return v instanceof F.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function fi(v,h){return h.catch(g=>{throw g instanceof F.ZR&&function iC(v,h){var g;const w=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new mo(v,function Cc(v,h){var g;const w=(0,F.m9)(v),S=h;return ae(h.customData.operationType,w,"argument-error"),ae(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),wt._fromError(w,S)}(v,h));else if(w){const S=Yc(h),N=h;S&&(N.credential=S,N.tenantId=w.tenantId||void 0,N.email=w.email||void 0,N.phoneNumber=w.phoneNumber||void 0)}}(v,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:t0(g),additionalUserInfo:Vs(g),user:yo.getOrCreate(S)}})}function Qc(v,h){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,m.Z)(function*(v,h){const g=yield h;return{verificationId:g.verificationId,confirm:w=>fi(v,g.confirm(w))}})).apply(this,arguments)}class mo{constructor(h,g){this.resolver=g,this.auth=function Dl(v){return v.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return fi(fy(this.auth),this.resolver.resolveSignIn(h))}}class yo{constructor(h){this._delegate=h,this.multiFactor=function gh(v){const h=(0,F.m9)(v);return Ra.has(h)||Ra.set(h,ji._fromUser(h)),Ra.get(h)}(h)}static getOrCreate(h){return yo.USER_MAP.has(h)||yo.USER_MAP.set(h,new yo(h)),yo.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,m.Z)(function*(){return fi(g.auth,eh(g._delegate,h))})()}linkWithPhoneNumber(h,g){var w=this;return(0,m.Z)(function*(){return Qc(w.auth,function Au(v,h,g){return Mu.apply(this,arguments)}(w._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,m.Z)(function*(){return fi(g.auth,function $o(v,h,g){return Ni.apply(this,arguments)}(g._delegate,h,go))})()}linkWithRedirect(h){var g=this;return(0,m.Z)(function*(){return yield Vh(Zn(g.auth)),Lp(g._delegate,h,go)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,m.Z)(function*(){return fi(g.auth,Wn(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return Qc(this.auth,function Pc(v,h,g){return Oa.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return fi(this.auth,function ws(v,h,g){return kc.apply(this,arguments)}(this._delegate,h,go))}reauthenticateWithRedirect(h){var g=this;return(0,m.Z)(function*(){return yield Vh(Zn(g.auth)),Eh(g._delegate,h,go)})()}sendEmailVerification(h){return function yc(v,h){return Ma.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,m.Z)(function*(){return yield function Gm(v,h){return ps.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function vc(v,h){return ms((0,F.m9)(v),h,null)}(this._delegate,h)}updatePassword(h){return function uh(v,h){return ms((0,F.m9)(v),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Er(v,h){return Ct.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Ap(v,h){return al.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function ol(v,h,g){return mu.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}yo.USER_MAP=new WeakMap;const Ba=ae;let Jc=(()=>{class v{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Ba(S,"invalid-api-key",{appName:g.name}),Ba(S,"invalid-api-key",{appName:g.name});const N=typeof window<"u"?go:void 0;this._delegate=w.initialize({options:{persistence:n0(S,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(We),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?yo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function rl(v,h,g){const w=Zn(v);ae(w._canInitEmulator,w,"emulator-config-failed"),ae(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const S=!!g?.disableWarnings,N=Ro(h),{host:H,port:Y}=function zd(v){const h=Ro(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(h.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const N=S[1];return{host:N,port:Wd(w.substr(N.length+1))}}{const[N,H]=w.split(":");return{host:N,port:Wd(H)}}}(h);w.config.emulator={url:`${N}//${H}${null===Y?"":`:${Y}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:H,port:Y,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function $m(){function v(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,w)}applyActionCode(g){return function Yn(v,h){return Zr.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return ih(this._delegate,g)}confirmPasswordReset(g,w){return function gs(v,h,g){return Ta.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var S=this;return(0,m.Z)(function*(){return fi(S._delegate,function sh(v,h,g){return fc.apply(this,arguments)}(S._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function gc(v,h){return mc.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function pc(v,h){const g=Ft.parseLink(h);return"EMAIL_SIGNIN"===g?.operation}(0,g)}getRedirectResult(){var g=this;return(0,m.Z)(function*(){Ba(Cl(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function co(v,h){return Bs.apply(this,arguments)}(g._delegate,go);return w?fi(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Ph(v,h){Zn(v)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,w,S){const{next:N,error:H,complete:Y}=Yp(g,w,S);return this._delegate.onAuthStateChanged(N,H,Y)}onIdTokenChanged(g,w,S){const{next:N,error:H,complete:Y}=Yp(g,w,S);return this._delegate.onIdTokenChanged(N,H,Y)}sendSignInLinkToEmail(g,w){return function Aa(v,h,g){return sl.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function Gv(v,h,g){return ba.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,m.Z)(function*(){let S;switch(function cy(v,h){Ua(Object.values(Yi).includes(h),v,"invalid-persistence-type"),(0,F.b$)()?Ua(h!==Yi.SESSION,v,"unsupported-persistence-type"):(0,F.UG)()?Ua(h===Yi.NONE,v,"unsupported-persistence-type"):kh()?Ua(h===Yi.NONE||h===Yi.LOCAL&&(0,F.hl)(),v,"unsupported-persistence-type"):Ua(h===Yi.NONE||Kc(),v,"unsupported-persistence-type")}(w._delegate,g),g){case Yi.SESSION:S=so;break;case Yi.LOCAL:S=(yield tn(Vo)._isAvailable())?Vo:io;break;case Yi.NONE:S=Kt;break;default:return _e("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return fi(this._delegate,function vp(v){return Yd.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return fi(this._delegate,dc(this._delegate,g))}signInWithCustomToken(g){return fi(this._delegate,function nh(v,h){return Ai.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return fi(this._delegate,function oh(v,h,g){return dc((0,F.m9)(v),il.credential(h,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return fi(this._delegate,function Sr(v,h,g){return bp.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Qc(this._delegate,function kp(v,h,g){return vs.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,m.Z)(function*(){return Ba(Cl(),w._delegate,"operation-not-supported-in-this-environment"),fi(w._delegate,function Nu(v,h,g){return wh.apply(this,arguments)}(w._delegate,g,go))})()}signInWithRedirect(g){var w=this;return(0,m.Z)(function*(){return Ba(Cl(),w._delegate,"operation-not-supported-in-this-environment"),yield Vh(w._delegate),vl(w._delegate,g,go)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function gu(v,h){return Ls.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Yi,v})();function Yp(v,h,g){let w=v;"function"!=typeof v&&({next:w,error:h,complete:g}=v);const S=w;return{next:H=>S(H&&yo.getOrCreate(H)),error:h,complete:g}}function n0(v,h){const g=function dy(v,h){const g=hy();if(!g)return[];const w=$(Zp,v,h);switch(g.getItem(w)){case Yi.NONE:return[Kt];case Yi.LOCAL:return[Vo,so];case Yi.SESSION:return[so];default:return[]}}(v,h);if(typeof self<"u"&&!g.includes(Vo)&&g.push(Vo),typeof window<"u")for(const w of[io,so])g.includes(w)||g.push(w);return g.includes(Kt)||g.push(Kt),g}class Qp{constructor(){this.providerId="phone",this._delegate=new ka(fy(X.Z.auth()))}static credential(h,g){return ka.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}Qp.PHONE_SIGN_IN_METHOD=ka.PHONE_SIGN_IN_METHOD,Qp.PROVIDER_ID=ka.PROVIDER_ID;const Xc=ae;class py{constructor(h,g,w=X.Z.app()){var S;Xc(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new pl(h,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Jp(v){v.INTERNAL.registerComponent(new ge.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new Jc(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:il,FacebookAuthProvider:ko,GithubAuthProvider:vr,GoogleAuthProvider:Fo,OAuthProvider:Si,SAMLAuthProvider:Ia,PhoneAuthProvider:Qp,PhoneMultiFactorGenerator:Th,RecaptchaVerifier:py,TwitterAuthProvider:ks,Auth:Jc,AuthCredential:Ps,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(X.Z)},5861:(ot,De,O)=>{function m(F,ee,ne,pe,ge,Oe,he){try{var U=F[Oe](he),G=U.value}catch(J){return void ne(J)}U.done?ee(G):Promise.resolve(G).then(pe,ge)}function X(F){return function(){var ee=this,ne=arguments;return new Promise(function(pe,ge){var Oe=F.apply(ee,ne);function he(G){m(Oe,pe,ge,he,U,"next",G)}function U(G){m(Oe,pe,ge,he,U,"throw",G)}he(void 0)})}}O.d(De,{Z:()=>X})},7582:(ot,De,O)=>{function ee(ue,de){var ve={};for(var we in ue)Object.prototype.hasOwnProperty.call(ue,we)&&de.indexOf(we)<0&&(ve[we]=ue[we]);if(null!=ue&&"function"==typeof Object.getOwnPropertySymbols){var Ie=0;for(we=Object.getOwnPropertySymbols(ue);Ie<we.length;Ie++)de.indexOf(we[Ie])<0&&Object.prototype.propertyIsEnumerable.call(ue,we[Ie])&&(ve[we[Ie]]=ue[we[Ie]])}return ve}function J(ue,de,ve,we){return new(ve||(ve=Promise))(function(Te,Qe){function rt(en){try{dt(we.next(en))}catch(Nt){Qe(Nt)}}function Vn(en){try{dt(we.throw(en))}catch(Nt){Qe(Nt)}}function dt(en){en.done?Te(en.value):function Ie(Te){return Te instanceof ve?Te:new ve(function(Qe){Qe(Te)})}(en.value).then(rt,Vn)}dt((we=we.apply(ue,de||[])).next())})}function ie(ue){return this instanceof ie?(this.v=ue,this):new ie(ue)}function _e(ue,de,ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,we=ve.apply(ue,de||[]),Te=[];return Ie={},Qe("next"),Qe("throw"),Qe("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie;function Qe(Dn){we[Dn]&&(Ie[Dn]=function(bn){return new Promise(function(lr,cn){Te.push([Dn,bn,lr,cn])>1||rt(Dn,bn)})})}function rt(Dn,bn){try{!function Vn(Dn){Dn.value instanceof ie?Promise.resolve(Dn.value.v).then(dt,en):Nt(Te[0][2],Dn)}(we[Dn](bn))}catch(lr){Nt(Te[0][3],lr)}}function dt(Dn){rt("next",Dn)}function en(Dn){rt("throw",Dn)}function Nt(Dn,bn){Dn(bn),Te.shift(),Te.length&&rt(Te[0][0],Te[0][1])}}function be(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,de=ue[Symbol.asyncIterator];return de?de.call(ue):(ue=function Pe(ue){var de="function"==typeof Symbol&&Symbol.iterator,ve=de&&ue[de],we=0;if(ve)return ve.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&we>=ue.length&&(ue=void 0),{value:ue&&ue[we++],done:!ue}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(ue),ve={},we("next"),we("throw"),we("return"),ve[Symbol.asyncIterator]=function(){return this},ve);function we(Te){ve[Te]=ue[Te]&&function(Qe){return new Promise(function(rt,Vn){!function Ie(Te,Qe,rt,Vn){Promise.resolve(Vn).then(function(dt){Te({value:dt,done:rt})},Qe)}(rt,Vn,(Qe=ue[Te](Qe)).done,Qe.value)})}}}O.d(De,{FC:()=>_e,KL:()=>be,_T:()=>ee,mG:()=>J,qq:()=>ie}),"function"==typeof SuppressedError&&SuppressedError}},ot=>{ot(ot.s=4222)}]);